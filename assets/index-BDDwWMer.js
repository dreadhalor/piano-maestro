function i_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mp={exports:{}},Ua={},Rp={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),o_=Symbol.for("react.portal"),a_=Symbol.for("react.fragment"),l_=Symbol.for("react.strict_mode"),c_=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),d_=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),f_=Symbol.for("react.suspense"),p_=Symbol.for("react.memo"),m_=Symbol.for("react.lazy"),Th=Symbol.iterator;function g_(t){return t===null||typeof t!="object"?null:(t=Th&&t[Th]||t["@@iterator"],typeof t=="function"?t:null)}var Op={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pp=Object.assign,Dp={};function js(t,e,n){this.props=t,this.context=e,this.refs=Dp,this.updater=n||Op}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lp(){}Lp.prototype=js.prototype;function Ru(t,e,n){this.props=t,this.context=e,this.refs=Dp,this.updater=n||Op}var Ou=Ru.prototype=new Lp;Ou.constructor=Ru;Pp(Ou,js.prototype);Ou.isPureReactComponent=!0;var kh=Array.isArray,Fp=Object.prototype.hasOwnProperty,Pu={current:null},jp={key:!0,ref:!0,__self:!0,__source:!0};function Vp(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Fp.call(e,r)&&!jp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qi,type:t,key:i,ref:o,props:s,_owner:Pu.current}}function v_(t,e){return{$$typeof:qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Du(t){return typeof t=="object"&&t!==null&&t.$$typeof===qi}function y_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ah=/\/+/g;function Ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y_(""+t.key):e.toString(36)}function jo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qi:case o_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ml(o,0):r,kh(s)?(n="",t!=null&&(n=t.replace(Ah,"$&/")+"/"),jo(s,e,n,"",function(c){return c})):s!=null&&(Du(s)&&(s=v_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ah,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",kh(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ml(i,a);o+=jo(i,e,n,l,s)}else if(l=g_(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ml(i,a++),o+=jo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ho(t,e,n){if(t==null)return t;var r=[],s=0;return jo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function __(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},Vo={transition:null},w_={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Vo,ReactCurrentOwner:Pu};function Bp(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:ho,forEach:function(t,e,n){ho(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ho(t,function(){e++}),e},toArray:function(t){return ho(t,function(e){return e})||[]},only:function(t){if(!Du(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=js;ee.Fragment=a_;ee.Profiler=c_;ee.PureComponent=Ru;ee.StrictMode=l_;ee.Suspense=f_;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w_;ee.act=Bp;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Pu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Fp.call(e,l)&&!jp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qi,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:d_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u_,_context:t},t.Consumer=t};ee.createElement=Vp;ee.createFactory=function(t){var e=Vp.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:h_,render:t}};ee.isValidElement=Du;ee.lazy=function(t){return{$$typeof:m_,_payload:{_status:-1,_result:t},_init:__}};ee.memo=function(t,e){return{$$typeof:p_,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Vo.transition;Vo.transition={};try{t()}finally{Vo.transition=e}};ee.unstable_act=Bp;ee.useCallback=function(t,e){return ut.current.useCallback(t,e)};ee.useContext=function(t){return ut.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ut.current.useEffect(t,e)};ee.useId=function(){return ut.current.useId()};ee.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ut.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ee.useRef=function(t){return ut.current.useRef(t)};ee.useState=function(t){return ut.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ut.current.useTransition()};ee.version="18.3.1";Rp.exports=ee;var S=Rp.exports;const Je=Mu(S),S_=i_({__proto__:null,default:Je},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_=S,E_=Symbol.for("react.element"),x_=Symbol.for("react.fragment"),b_=Object.prototype.hasOwnProperty,N_=C_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T_={key:!0,ref:!0,__self:!0,__source:!0};function zp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)b_.call(e,r)&&!T_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:E_,type:t,key:i,ref:o,props:s,_owner:N_.current}}Ua.Fragment=x_;Ua.jsx=zp;Ua.jsxs=zp;Mp.exports=Ua;var C=Mp.exports,Up={exports:{}},kt={},Wp={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,O){var L=R.length;R.push(O);e:for(;0<L;){var z=L-1>>>1,q=R[z];if(0<s(q,O))R[z]=O,R[L]=q,L=z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var O=R[0],L=R.pop();if(L!==O){R[0]=L;e:for(var z=0,q=R.length,Be=q>>>1;z<Be;){var ke=2*(z+1)-1,X=R[ke],re=ke+1,Me=R[re];if(0>s(X,L))re<q&&0>s(Me,X)?(R[z]=Me,R[re]=L,z=re):(R[z]=X,R[ke]=L,z=ke);else if(re<q&&0>s(Me,L))R[z]=Me,R[re]=L,z=re;else break e}}return O}function s(R,O){var L=R.sortIndex-O.sortIndex;return L!==0?L:R.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,g=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(R){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=R)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(R){if(m=!1,_(R),!p)if(n(l)!==null)p=!0,F(w);else{var O=n(c);O!==null&&U(E,O.startTime-R)}}function w(R,O){p=!1,m&&(m=!1,f(x),x=-1),g=!0;var L=h;try{for(_(O),d=n(l);d!==null&&(!(d.expirationTime>O)||R&&!I());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var q=z(d.expirationTime<=O);O=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),_(O)}else r(l);d=n(l)}if(d!==null)var Be=!0;else{var ke=n(c);ke!==null&&U(E,ke.startTime-O),Be=!1}return Be}finally{d=null,h=L,g=!1}}var N=!1,b=null,x=-1,A=5,T=-1;function I(){return!(t.unstable_now()-T<A)}function k(){if(b!==null){var R=t.unstable_now();T=R;var O=!0;try{O=b(!0,R)}finally{O?V():(N=!1,b=null)}}else N=!1}var V;if(typeof v=="function")V=function(){v(k)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=k,V=function(){$.postMessage(null)}}else V=function(){y(k,0)};function F(R){b=R,N||(N=!0,V())}function U(R,O){x=y(function(){R(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,F(w))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var L=h;h=O;try{return R()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,O){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=h;h=R;try{return O()}finally{h=L}},t.unstable_scheduleCallback=function(R,O,L){var z=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?z+L:z):L=z,R){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,R={id:u++,callback:O,priorityLevel:R,startTime:L,expirationTime:q,sortIndex:-1},L>z?(R.sortIndex=L,e(c,R),n(l)===null&&R===n(c)&&(m?(f(x),x=-1):m=!0,U(E,L-z))):(R.sortIndex=q,e(l,R),p||g||(p=!0,F(w))),R},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(R){var O=h;return function(){var L=h;h=O;try{return R.apply(this,arguments)}finally{h=L}}}})(Gp);Wp.exports=Gp;var k_=Wp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_=S,Nt=k_;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $p=new Set,bi={};function Or(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(bi[t]=e,t=0;t<e.length;t++)$p.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=Object.prototype.hasOwnProperty,I_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ih={},Mh={};function M_(t){return yc.call(Mh,t)?!0:yc.call(Ih,t)?!1:I_.test(t)?Mh[t]=!0:(Ih[t]=!0,!1)}function R_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O_(t,e,n,r){if(e===null||typeof e>"u"||R_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lu=/[\-:]([a-z])/g;function Fu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lu,Fu);Ye[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lu,Fu);Ye[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lu,Fu);Ye[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ju(t,e,n,r){var s=Ye.hasOwnProperty(e)?Ye[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O_(e,n,s,r)&&(n=null),r||s===null?M_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tn=A_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),Kr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Vu=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),Hp=Symbol.for("react.provider"),qp=Symbol.for("react.context"),Bu=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),zu=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Kp=Symbol.for("react.offscreen"),Rh=Symbol.iterator;function ei(t){return t===null||typeof t!="object"?null:(t=Rh&&t[Rh]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Rl;function ui(t){if(Rl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var Ol=!1;function Pl(t,e){if(!t||Ol)return"";Ol=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ol=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ui(t):""}function P_(t){switch(t.tag){case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return ui("Suspense");case 19:return ui("SuspenseList");case 0:case 2:case 15:return t=Pl(t.type,!1),t;case 11:return t=Pl(t.type.render,!1),t;case 1:return t=Pl(t.type,!0),t;default:return""}}function Cc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Kr:return"Portal";case _c:return"Profiler";case Vu:return"StrictMode";case wc:return"Suspense";case Sc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qp:return(t.displayName||"Context")+".Consumer";case Hp:return(t._context.displayName||"Context")+".Provider";case Bu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zu:return e=t.displayName||null,e!==null?e:Cc(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return Cc(t(e))}catch{}}return null}function D_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cc(e);case 8:return e===Vu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L_(t){var e=Yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function po(t){t._valueTracker||(t._valueTracker=L_(t))}function Qp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ec(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xp(t,e){e=e.checked,e!=null&&ju(t,"checked",e,!1)}function xc(t,e){Xp(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bc(t,e.type,n):e.hasOwnProperty("defaultValue")&&bc(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ph(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bc(t,e,n){(e!=="number"||ra(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var di=Array.isArray;function us(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Nc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(di(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function Zp(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mo,em=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ni(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F_=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(t){F_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pi[e]=pi[t]})});function tm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pi.hasOwnProperty(t)&&pi[t]?(""+e).trim():e+"px"}function nm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var j_=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kc(t,e){if(e){if(j_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Ac(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=null;function Uu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mc=null,ds=null,hs=null;function Fh(t){if(t=Qi(t)){if(typeof Mc!="function")throw Error(P(280));var e=t.stateNode;e&&(e=qa(e),Mc(t.stateNode,t.type,e))}}function rm(t){ds?hs?hs.push(t):hs=[t]:ds=t}function sm(){if(ds){var t=ds,e=hs;if(hs=ds=null,Fh(t),e)for(t=0;t<e.length;t++)Fh(e[t])}}function im(t,e){return t(e)}function om(){}var Dl=!1;function am(t,e,n){if(Dl)return t(e,n);Dl=!0;try{return im(t,e,n)}finally{Dl=!1,(ds!==null||hs!==null)&&(om(),sm())}}function Ti(t,e){var n=t.stateNode;if(n===null)return null;var r=qa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var Rc=!1;if(Cn)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){Rc=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{Rc=!1}function V_(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var mi=!1,sa=null,ia=!1,Oc=null,B_={onError:function(t){mi=!0,sa=t}};function z_(t,e,n,r,s,i,o,a,l){mi=!1,sa=null,V_.apply(B_,arguments)}function U_(t,e,n,r,s,i,o,a,l){if(z_.apply(this,arguments),mi){if(mi){var c=sa;mi=!1,sa=null}else throw Error(P(198));ia||(ia=!0,Oc=c)}}function Pr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jh(t){if(Pr(t)!==t)throw Error(P(188))}function W_(t){var e=t.alternate;if(!e){if(e=Pr(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jh(s),t;if(i===r)return jh(s),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function cm(t){return t=W_(t),t!==null?um(t):null}function um(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=um(t);if(e!==null)return e;t=t.sibling}return null}var dm=Nt.unstable_scheduleCallback,Vh=Nt.unstable_cancelCallback,G_=Nt.unstable_shouldYield,$_=Nt.unstable_requestPaint,Ae=Nt.unstable_now,H_=Nt.unstable_getCurrentPriorityLevel,Wu=Nt.unstable_ImmediatePriority,hm=Nt.unstable_UserBlockingPriority,oa=Nt.unstable_NormalPriority,q_=Nt.unstable_LowPriority,fm=Nt.unstable_IdlePriority,Wa=null,ln=null;function K_(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Wa,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:X_,Y_=Math.log,Q_=Math.LN2;function X_(t){return t>>>=0,t===0?32:31-(Y_(t)/Q_|0)|0}var go=64,vo=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function aa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=hi(a):(i&=o,i!==0&&(r=hi(i)))}else o=n&~s,o!==0?r=hi(o):i!==0&&(r=hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kt(e),s=1<<n,r|=t[n],e&=~s;return r}function Z_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Kt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Z_(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Pc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pm(){var t=go;return go<<=1,!(go&4194240)&&(go=64),t}function Ll(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ki(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=n}function e1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ie=0;function mm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gm,$u,vm,ym,_m,Dc=!1,yo=[],Hn=null,qn=null,Kn=null,ki=new Map,Ai=new Map,Un=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bh(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function ni(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qi(e),e!==null&&$u(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function n1(t,e,n,r,s){switch(e){case"focusin":return Hn=ni(Hn,t,e,n,r,s),!0;case"dragenter":return qn=ni(qn,t,e,n,r,s),!0;case"mouseover":return Kn=ni(Kn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ki.set(i,ni(ki.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ai.set(i,ni(Ai.get(i)||null,t,e,n,r,s)),!0}return!1}function wm(t){var e=gr(t.target);if(e!==null){var n=Pr(e);if(n!==null){if(e=n.tag,e===13){if(e=lm(n),e!==null){t.blockedOn=e,_m(t.priority,function(){vm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ic=r,n.target.dispatchEvent(r),Ic=null}else return e=Qi(n),e!==null&&$u(e),t.blockedOn=n,!1;e.shift()}return!0}function zh(t,e,n){Bo(t)&&n.delete(e)}function r1(){Dc=!1,Hn!==null&&Bo(Hn)&&(Hn=null),qn!==null&&Bo(qn)&&(qn=null),Kn!==null&&Bo(Kn)&&(Kn=null),ki.forEach(zh),Ai.forEach(zh)}function ri(t,e){t.blockedOn===e&&(t.blockedOn=null,Dc||(Dc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,r1)))}function Ii(t){function e(s){return ri(s,t)}if(0<yo.length){ri(yo[0],t);for(var n=1;n<yo.length;n++){var r=yo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&ri(Hn,t),qn!==null&&ri(qn,t),Kn!==null&&ri(Kn,t),ki.forEach(e),Ai.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)wm(n),n.blockedOn===null&&Un.shift()}var fs=Tn.ReactCurrentBatchConfig,la=!0;function s1(t,e,n,r){var s=ie,i=fs.transition;fs.transition=null;try{ie=1,Hu(t,e,n,r)}finally{ie=s,fs.transition=i}}function i1(t,e,n,r){var s=ie,i=fs.transition;fs.transition=null;try{ie=4,Hu(t,e,n,r)}finally{ie=s,fs.transition=i}}function Hu(t,e,n,r){if(la){var s=Lc(t,e,n,r);if(s===null)Hl(t,e,r,ca,n),Bh(t,r);else if(n1(s,t,e,n,r))r.stopPropagation();else if(Bh(t,r),e&4&&-1<t1.indexOf(t)){for(;s!==null;){var i=Qi(s);if(i!==null&&gm(i),i=Lc(t,e,n,r),i===null&&Hl(t,e,r,ca,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hl(t,e,r,null,n)}}var ca=null;function Lc(t,e,n,r){if(ca=null,t=Uu(r),t=gr(t),t!==null)if(e=Pr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ca=t,null}function Sm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H_()){case Wu:return 1;case hm:return 4;case oa:case q_:return 16;case fm:return 536870912;default:return 16}default:return 16}}var Gn=null,qu=null,zo=null;function Cm(){if(zo)return zo;var t,e=qu,n=e.length,r,s="value"in Gn?Gn.value:Gn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zo=s.slice(t,1<r?1-r:void 0)}function Uo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _o(){return!0}function Uh(){return!1}function At(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_o:Uh,this.isPropagationStopped=Uh,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=At(Vs),Yi=Ce({},Vs,{view:0,detail:0}),o1=At(Yi),Fl,jl,si,Ga=Ce({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(Fl=t.screenX-si.screenX,jl=t.screenY-si.screenY):jl=Fl=0,si=t),Fl)},movementY:function(t){return"movementY"in t?t.movementY:jl}}),Wh=At(Ga),a1=Ce({},Ga,{dataTransfer:0}),l1=At(a1),c1=Ce({},Yi,{relatedTarget:0}),Vl=At(c1),u1=Ce({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),d1=At(u1),h1=Ce({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),f1=At(h1),p1=Ce({},Vs,{data:0}),Gh=At(p1),m1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=v1[t])?!!e[t]:!1}function Yu(){return y1}var _1=Ce({},Yi,{key:function(t){if(t.key){var e=m1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?g1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(t){return t.type==="keypress"?Uo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),w1=At(_1),S1=Ce({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$h=At(S1),C1=Ce({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),E1=At(C1),x1=Ce({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),b1=At(x1),N1=Ce({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T1=At(N1),k1=[9,13,27,32],Qu=Cn&&"CompositionEvent"in window,gi=null;Cn&&"documentMode"in document&&(gi=document.documentMode);var A1=Cn&&"TextEvent"in window&&!gi,Em=Cn&&(!Qu||gi&&8<gi&&11>=gi),Hh=" ",qh=!1;function xm(t,e){switch(t){case"keyup":return k1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function I1(t,e){switch(t){case"compositionend":return bm(e);case"keypress":return e.which!==32?null:(qh=!0,Hh);case"textInput":return t=e.data,t===Hh&&qh?null:t;default:return null}}function M1(t,e){if(Qr)return t==="compositionend"||!Qu&&xm(t,e)?(t=Cm(),zo=qu=Gn=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Em&&e.locale!=="ko"?null:e.data;default:return null}}var R1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!R1[t.type]:e==="textarea"}function Nm(t,e,n,r){rm(r),e=ua(e,"onChange"),0<e.length&&(n=new Ku("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vi=null,Mi=null;function O1(t){Fm(t,0)}function $a(t){var e=Jr(t);if(Qp(e))return t}function P1(t,e){if(t==="change")return e}var Tm=!1;if(Cn){var Bl;if(Cn){var zl="oninput"in document;if(!zl){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),zl=typeof Yh.oninput=="function"}Bl=zl}else Bl=!1;Tm=Bl&&(!document.documentMode||9<document.documentMode)}function Qh(){vi&&(vi.detachEvent("onpropertychange",km),Mi=vi=null)}function km(t){if(t.propertyName==="value"&&$a(Mi)){var e=[];Nm(e,Mi,t,Uu(t)),am(O1,e)}}function D1(t,e,n){t==="focusin"?(Qh(),vi=e,Mi=n,vi.attachEvent("onpropertychange",km)):t==="focusout"&&Qh()}function L1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $a(Mi)}function F1(t,e){if(t==="click")return $a(e)}function j1(t,e){if(t==="input"||t==="change")return $a(e)}function V1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:V1;function Ri(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yc.call(e,s)||!Xt(t[s],e[s]))return!1}return!0}function Xh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zh(t,e){var n=Xh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xh(n)}}function Am(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Am(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Im(){for(var t=window,e=ra();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ra(t.document)}return e}function Xu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function B1(t){var e=Im(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Am(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zh(n,i);var o=Zh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z1=Cn&&"documentMode"in document&&11>=document.documentMode,Xr=null,Fc=null,yi=null,jc=!1;function Jh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jc||Xr==null||Xr!==ra(r)||(r=Xr,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yi&&Ri(yi,r)||(yi=r,r=ua(Fc,"onSelect"),0<r.length&&(e=new Ku("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xr)))}function wo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zr={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},Ul={},Mm={};Cn&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Ha(t){if(Ul[t])return Ul[t];if(!Zr[t])return t;var e=Zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mm)return Ul[t]=e[n];return t}var Rm=Ha("animationend"),Om=Ha("animationiteration"),Pm=Ha("animationstart"),Dm=Ha("transitionend"),Lm=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(t,e){Lm.set(t,e),Or(e,[t])}for(var Wl=0;Wl<ef.length;Wl++){var Gl=ef[Wl],U1=Gl.toLowerCase(),W1=Gl[0].toUpperCase()+Gl.slice(1);or(U1,"on"+W1)}or(Rm,"onAnimationEnd");or(Om,"onAnimationIteration");or(Pm,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(Dm,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function tf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,U_(r,e,void 0,t),t.currentTarget=null}function Fm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;tf(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;tf(s,a,c),i=l}}}if(ia)throw t=Oc,ia=!1,Oc=null,t}function he(t,e){var n=e[Wc];n===void 0&&(n=e[Wc]=new Set);var r=t+"__bubble";n.has(r)||(jm(e,t,2,!1),n.add(r))}function $l(t,e,n){var r=0;e&&(r|=4),jm(n,t,r,e)}var So="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[So]){t[So]=!0,$p.forEach(function(n){n!=="selectionchange"&&(G1.has(n)||$l(n,!1,t),$l(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[So]||(e[So]=!0,$l("selectionchange",!1,e))}}function jm(t,e,n,r){switch(Sm(e)){case 1:var s=s1;break;case 4:s=i1;break;default:s=Hu}n=s.bind(null,e,n,t),s=void 0,!Rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=gr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}am(function(){var c=i,u=Uu(n),d=[];e:{var h=Lm.get(t);if(h!==void 0){var g=Ku,p=t;switch(t){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":g=w1;break;case"focusin":p="focus",g=Vl;break;case"focusout":p="blur",g=Vl;break;case"beforeblur":case"afterblur":g=Vl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=l1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=E1;break;case Rm:case Om:case Pm:g=d1;break;case Dm:g=b1;break;case"scroll":g=o1;break;case"wheel":g=T1;break;case"copy":case"cut":case"paste":g=f1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$h}var m=(e&4)!==0,y=!m&&t==="scroll",f=m?h!==null?h+"Capture":null:h;m=[];for(var v=c,_;v!==null;){_=v;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,f!==null&&(E=Ti(v,f),E!=null&&m.push(Pi(v,E,_)))),y)break;v=v.return}0<m.length&&(h=new g(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Ic&&(p=n.relatedTarget||n.fromElement)&&(gr(p)||p[En]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=c,p=p?gr(p):null,p!==null&&(y=Pr(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=c),g!==p)){if(m=Wh,E="onMouseLeave",f="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=$h,E="onPointerLeave",f="onPointerEnter",v="pointer"),y=g==null?h:Jr(g),_=p==null?h:Jr(p),h=new m(E,v+"leave",g,n,u),h.target=y,h.relatedTarget=_,E=null,gr(u)===c&&(m=new m(f,v+"enter",p,n,u),m.target=_,m.relatedTarget=y,E=m),y=E,g&&p)t:{for(m=g,f=p,v=0,_=m;_;_=Wr(_))v++;for(_=0,E=f;E;E=Wr(E))_++;for(;0<v-_;)m=Wr(m),v--;for(;0<_-v;)f=Wr(f),_--;for(;v--;){if(m===f||f!==null&&m===f.alternate)break t;m=Wr(m),f=Wr(f)}m=null}else m=null;g!==null&&nf(d,h,g,m,!1),p!==null&&y!==null&&nf(d,y,p,m,!0)}}e:{if(h=c?Jr(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var w=P1;else if(Kh(h))if(Tm)w=j1;else{w=L1;var N=D1}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=F1);if(w&&(w=w(t,c))){Nm(d,w,n,u);break e}N&&N(t,h,c),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&bc(h,"number",h.value)}switch(N=c?Jr(c):window,t){case"focusin":(Kh(N)||N.contentEditable==="true")&&(Xr=N,Fc=c,yi=null);break;case"focusout":yi=Fc=Xr=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,Jh(d,n,u);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":Jh(d,n,u)}var b;if(Qu)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Qr?xm(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Em&&n.locale!=="ko"&&(Qr||x!=="onCompositionStart"?x==="onCompositionEnd"&&Qr&&(b=Cm()):(Gn=u,qu="value"in Gn?Gn.value:Gn.textContent,Qr=!0)),N=ua(c,x),0<N.length&&(x=new Gh(x,t,null,n,u),d.push({event:x,listeners:N}),b?x.data=b:(b=bm(n),b!==null&&(x.data=b)))),(b=A1?I1(t,n):M1(t,n))&&(c=ua(c,"onBeforeInput"),0<c.length&&(u=new Gh("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=b))}Fm(d,e)})}function Pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ti(t,n),i!=null&&r.unshift(Pi(t,i,s)),i=Ti(t,e),i!=null&&r.push(Pi(t,i,s))),t=t.return}return r}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nf(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ti(n,i),l!=null&&o.unshift(Pi(n,l,a))):s||(l=Ti(n,i),l!=null&&o.push(Pi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function rf(t){return(typeof t=="string"?t:""+t).replace($1,`
`).replace(H1,"")}function Co(t,e,n){if(e=rf(e),rf(t)!==e&&n)throw Error(P(425))}function da(){}var Vc=null,Bc=null;function zc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uc=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,sf=typeof Promise=="function"?Promise:void 0,K1=typeof queueMicrotask=="function"?queueMicrotask:typeof sf<"u"?function(t){return sf.resolve(null).then(t).catch(Y1)}:Uc;function Y1(t){setTimeout(function(){throw t})}function ql(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ii(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ii(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function of(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),on="__reactFiber$"+Bs,Di="__reactProps$"+Bs,En="__reactContainer$"+Bs,Wc="__reactEvents$"+Bs,Q1="__reactListeners$"+Bs,X1="__reactHandles$"+Bs;function gr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=of(t);t!==null;){if(n=t[on])return n;t=of(t)}return e}t=n,n=t.parentNode}return null}function Qi(t){return t=t[on]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function qa(t){return t[Di]||null}var Gc=[],es=-1;function ar(t){return{current:t}}function pe(t){0>es||(t.current=Gc[es],Gc[es]=null,es--)}function le(t,e){es++,Gc[es]=t.current,t.current=e}var nr={},nt=ar(nr),gt=ar(!1),xr=nr;function Ss(t,e){var n=t.type.contextTypes;if(!n)return nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vt(t){return t=t.childContextTypes,t!=null}function ha(){pe(gt),pe(nt)}function af(t,e,n){if(nt.current!==nr)throw Error(P(168));le(nt,e),le(gt,n)}function Vm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(P(108,D_(t)||"Unknown",s));return Ce({},n,r)}function fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,xr=nt.current,le(nt,t),le(gt,gt.current),!0}function lf(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=Vm(t,e,xr),r.__reactInternalMemoizedMergedChildContext=t,pe(gt),pe(nt),le(nt,t)):pe(gt),le(gt,n)}var vn=null,Ka=!1,Kl=!1;function Bm(t){vn===null?vn=[t]:vn.push(t)}function Z1(t){Ka=!0,Bm(t)}function lr(){if(!Kl&&vn!==null){Kl=!0;var t=0,e=ie;try{var n=vn;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,Ka=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),dm(Wu,lr),s}finally{ie=e,Kl=!1}}return null}var ts=[],ns=0,pa=null,ma=0,Mt=[],Rt=0,br=null,yn=1,_n="";function pr(t,e){ts[ns++]=ma,ts[ns++]=pa,pa=t,ma=e}function zm(t,e,n){Mt[Rt++]=yn,Mt[Rt++]=_n,Mt[Rt++]=br,br=t;var r=yn;t=_n;var s=32-Kt(r)-1;r&=~(1<<s),n+=1;var i=32-Kt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,yn=1<<32-Kt(e)+s|n<<s|r,_n=i+t}else yn=1<<i|n<<s|r,_n=t}function Zu(t){t.return!==null&&(pr(t,1),zm(t,1,0))}function Ju(t){for(;t===pa;)pa=ts[--ns],ts[ns]=null,ma=ts[--ns],ts[ns]=null;for(;t===br;)br=Mt[--Rt],Mt[Rt]=null,_n=Mt[--Rt],Mt[Rt]=null,yn=Mt[--Rt],Mt[Rt]=null}var bt=null,xt=null,ve=!1,Gt=null;function Um(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,xt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:yn,overflow:_n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,xt=null,!0):!1;default:return!1}}function $c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hc(t){if(ve){var e=xt;if(e){var n=e;if(!cf(t,e)){if($c(t))throw Error(P(418));e=Yn(n.nextSibling);var r=bt;e&&cf(t,e)?Um(r,n):(t.flags=t.flags&-4097|2,ve=!1,bt=t)}}else{if($c(t))throw Error(P(418));t.flags=t.flags&-4097|2,ve=!1,bt=t}}}function uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function Eo(t){if(t!==bt)return!1;if(!ve)return uf(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zc(t.type,t.memoizedProps)),e&&(e=xt)){if($c(t))throw Wm(),Error(P(418));for(;e;)Um(t,e),e=Yn(e.nextSibling)}if(uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=bt?Yn(t.stateNode.nextSibling):null;return!0}function Wm(){for(var t=xt;t;)t=Yn(t.nextSibling)}function Cs(){xt=bt=null,ve=!1}function ed(t){Gt===null?Gt=[t]:Gt.push(t)}var J1=Tn.ReactCurrentBatchConfig;function ii(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function xo(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function df(t){var e=t._init;return e(t._payload)}function Gm(t){function e(f,v){if(t){var _=f.deletions;_===null?(f.deletions=[v],f.flags|=16):_.push(v)}}function n(f,v){if(!t)return null;for(;v!==null;)e(f,v),v=v.sibling;return null}function r(f,v){for(f=new Map;v!==null;)v.key!==null?f.set(v.key,v):f.set(v.index,v),v=v.sibling;return f}function s(f,v){return f=Jn(f,v),f.index=0,f.sibling=null,f}function i(f,v,_){return f.index=_,t?(_=f.alternate,_!==null?(_=_.index,_<v?(f.flags|=2,v):_):(f.flags|=2,v)):(f.flags|=1048576,v)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,v,_,E){return v===null||v.tag!==6?(v=tc(_,f.mode,E),v.return=f,v):(v=s(v,_),v.return=f,v)}function l(f,v,_,E){var w=_.type;return w===Yr?u(f,v,_.props.children,E,_.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===jn&&df(w)===v.type)?(E=s(v,_.props),E.ref=ii(f,v,_),E.return=f,E):(E=Yo(_.type,_.key,_.props,null,f.mode,E),E.ref=ii(f,v,_),E.return=f,E)}function c(f,v,_,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=nc(_,f.mode,E),v.return=f,v):(v=s(v,_.children||[]),v.return=f,v)}function u(f,v,_,E,w){return v===null||v.tag!==7?(v=Sr(_,f.mode,E,w),v.return=f,v):(v=s(v,_),v.return=f,v)}function d(f,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=tc(""+v,f.mode,_),v.return=f,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fo:return _=Yo(v.type,v.key,v.props,null,f.mode,_),_.ref=ii(f,null,v),_.return=f,_;case Kr:return v=nc(v,f.mode,_),v.return=f,v;case jn:var E=v._init;return d(f,E(v._payload),_)}if(di(v)||ei(v))return v=Sr(v,f.mode,_,null),v.return=f,v;xo(f,v)}return null}function h(f,v,_,E){var w=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:a(f,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fo:return _.key===w?l(f,v,_,E):null;case Kr:return _.key===w?c(f,v,_,E):null;case jn:return w=_._init,h(f,v,w(_._payload),E)}if(di(_)||ei(_))return w!==null?null:u(f,v,_,E,null);xo(f,_)}return null}function g(f,v,_,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return f=f.get(_)||null,a(v,f,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fo:return f=f.get(E.key===null?_:E.key)||null,l(v,f,E,w);case Kr:return f=f.get(E.key===null?_:E.key)||null,c(v,f,E,w);case jn:var N=E._init;return g(f,v,_,N(E._payload),w)}if(di(E)||ei(E))return f=f.get(_)||null,u(v,f,E,w,null);xo(v,E)}return null}function p(f,v,_,E){for(var w=null,N=null,b=v,x=v=0,A=null;b!==null&&x<_.length;x++){b.index>x?(A=b,b=null):A=b.sibling;var T=h(f,b,_[x],E);if(T===null){b===null&&(b=A);break}t&&b&&T.alternate===null&&e(f,b),v=i(T,v,x),N===null?w=T:N.sibling=T,N=T,b=A}if(x===_.length)return n(f,b),ve&&pr(f,x),w;if(b===null){for(;x<_.length;x++)b=d(f,_[x],E),b!==null&&(v=i(b,v,x),N===null?w=b:N.sibling=b,N=b);return ve&&pr(f,x),w}for(b=r(f,b);x<_.length;x++)A=g(b,f,x,_[x],E),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?x:A.key),v=i(A,v,x),N===null?w=A:N.sibling=A,N=A);return t&&b.forEach(function(I){return e(f,I)}),ve&&pr(f,x),w}function m(f,v,_,E){var w=ei(_);if(typeof w!="function")throw Error(P(150));if(_=w.call(_),_==null)throw Error(P(151));for(var N=w=null,b=v,x=v=0,A=null,T=_.next();b!==null&&!T.done;x++,T=_.next()){b.index>x?(A=b,b=null):A=b.sibling;var I=h(f,b,T.value,E);if(I===null){b===null&&(b=A);break}t&&b&&I.alternate===null&&e(f,b),v=i(I,v,x),N===null?w=I:N.sibling=I,N=I,b=A}if(T.done)return n(f,b),ve&&pr(f,x),w;if(b===null){for(;!T.done;x++,T=_.next())T=d(f,T.value,E),T!==null&&(v=i(T,v,x),N===null?w=T:N.sibling=T,N=T);return ve&&pr(f,x),w}for(b=r(f,b);!T.done;x++,T=_.next())T=g(b,f,x,T.value,E),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?x:T.key),v=i(T,v,x),N===null?w=T:N.sibling=T,N=T);return t&&b.forEach(function(k){return e(f,k)}),ve&&pr(f,x),w}function y(f,v,_,E){if(typeof _=="object"&&_!==null&&_.type===Yr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case fo:e:{for(var w=_.key,N=v;N!==null;){if(N.key===w){if(w=_.type,w===Yr){if(N.tag===7){n(f,N.sibling),v=s(N,_.props.children),v.return=f,f=v;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===jn&&df(w)===N.type){n(f,N.sibling),v=s(N,_.props),v.ref=ii(f,N,_),v.return=f,f=v;break e}n(f,N);break}else e(f,N);N=N.sibling}_.type===Yr?(v=Sr(_.props.children,f.mode,E,_.key),v.return=f,f=v):(E=Yo(_.type,_.key,_.props,null,f.mode,E),E.ref=ii(f,v,_),E.return=f,f=E)}return o(f);case Kr:e:{for(N=_.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(f,v.sibling),v=s(v,_.children||[]),v.return=f,f=v;break e}else{n(f,v);break}else e(f,v);v=v.sibling}v=nc(_,f.mode,E),v.return=f,f=v}return o(f);case jn:return N=_._init,y(f,v,N(_._payload),E)}if(di(_))return p(f,v,_,E);if(ei(_))return m(f,v,_,E);xo(f,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(f,v.sibling),v=s(v,_),v.return=f,f=v):(n(f,v),v=tc(_,f.mode,E),v.return=f,f=v),o(f)):n(f,v)}return y}var Es=Gm(!0),$m=Gm(!1),ga=ar(null),va=null,rs=null,td=null;function nd(){td=rs=va=null}function rd(t){var e=ga.current;pe(ga),t._currentValue=e}function qc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ps(t,e){va=t,td=rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(td!==t)if(t={context:t,memoizedValue:e,next:null},rs===null){if(va===null)throw Error(P(308));rs=t,va.dependencies={lanes:0,firstContext:t}}else rs=rs.next=t;return e}var vr=null;function sd(t){vr===null?vr=[t]:vr.push(t)}function Hm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sd(e)):(n.next=s.next,s.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xn(t,n)}return s=r.interleaved,s===null?(e.next=e,sd(r)):(e.next=s.next,s.next=e),r.interleaved=e,xn(t,n)}function Wo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}function hf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ya(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,g=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,g=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(g,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(g,d,h):p,h==null)break e;d=Ce({},d,h);break e;case 2:Vn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Tr|=o,t.lanes=o,t.memoizedState=d}}function ff(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(P(191,s));s.call(r)}}}var Xi={},cn=ar(Xi),Li=ar(Xi),Fi=ar(Xi);function yr(t){if(t===Xi)throw Error(P(174));return t}function od(t,e){switch(le(Fi,e),le(Li,t),le(cn,Xi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tc(e,t)}pe(cn),le(cn,e)}function xs(){pe(cn),pe(Li),pe(Fi)}function Km(t){yr(Fi.current);var e=yr(cn.current),n=Tc(e,t.type);e!==n&&(le(Li,t),le(cn,n))}function ad(t){Li.current===t&&(pe(cn),pe(Li))}var we=ar(0);function _a(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yl=[];function ld(){for(var t=0;t<Yl.length;t++)Yl[t]._workInProgressVersionPrimary=null;Yl.length=0}var Go=Tn.ReactCurrentDispatcher,Ql=Tn.ReactCurrentBatchConfig,Nr=0,Se=null,Fe=null,ze=null,wa=!1,_i=!1,ji=0,ew=0;function Xe(){throw Error(P(321))}function cd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function ud(t,e,n,r,s,i){if(Nr=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Go.current=t===null||t.memoizedState===null?sw:iw,t=n(r,s),_i){i=0;do{if(_i=!1,ji=0,25<=i)throw Error(P(301));i+=1,ze=Fe=null,e.updateQueue=null,Go.current=ow,t=n(r,s)}while(_i)}if(Go.current=Sa,e=Fe!==null&&Fe.next!==null,Nr=0,ze=Fe=Se=null,wa=!1,e)throw Error(P(300));return t}function dd(){var t=ji!==0;return ji=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Se.memoizedState=ze=t:ze=ze.next=t,ze}function Bt(){if(Fe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=ze===null?Se.memoizedState:ze.next;if(e!==null)ze=e,Fe=t;else{if(t===null)throw Error(P(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ze===null?Se.memoizedState=ze=t:ze=ze.next=t}return ze}function Vi(t,e){return typeof e=="function"?e(t):e}function Xl(t){var e=Bt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Nr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Se.lanes|=u,Tr|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Xt(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Tr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zl(t){var e=Bt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Xt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ym(){}function Qm(t,e){var n=Se,r=Bt(),s=e(),i=!Xt(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,hd(Jm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Bi(9,Zm.bind(null,n,r,s,e),void 0,null),Ue===null)throw Error(P(349));Nr&30||Xm(n,e,s)}return s}function Xm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zm(t,e,n,r){e.value=n,e.getSnapshot=r,eg(e)&&tg(t)}function Jm(t,e,n){return n(function(){eg(e)&&tg(t)})}function eg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function tg(t){var e=xn(t,1);e!==null&&Yt(e,t,1,-1)}function pf(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e.queue=t,t=t.dispatch=rw.bind(null,Se,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ng(){return Bt().memoizedState}function $o(t,e,n,r){var s=sn();Se.flags|=t,s.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function Ya(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&cd(r,o.deps)){s.memoizedState=Bi(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Bi(1|e,n,i,r)}function mf(t,e){return $o(8390656,8,t,e)}function hd(t,e){return Ya(2048,8,t,e)}function rg(t,e){return Ya(4,2,t,e)}function sg(t,e){return Ya(4,4,t,e)}function ig(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function og(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4,4,ig.bind(null,e,t),n)}function fd(){}function ag(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lg(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cg(t,e,n){return Nr&21?(Xt(n,e)||(n=pm(),Se.lanes|=n,Tr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function tw(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=Ql.transition;Ql.transition={};try{t(!1),e()}finally{ie=n,Ql.transition=r}}function ug(){return Bt().memoizedState}function nw(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dg(t))hg(e,n);else if(n=Hm(t,e,n,r),n!==null){var s=ct();Yt(n,t,r,s),fg(n,e,r)}}function rw(t,e,n){var r=Zn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dg(t))hg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Xt(a,o)){var l=e.interleaved;l===null?(s.next=s,sd(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Hm(t,e,s,r),n!==null&&(s=ct(),Yt(n,t,r,s),fg(n,e,r))}}function dg(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function hg(t,e){_i=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}var Sa={readContext:Vt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},sw={readContext:Vt,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:mf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$o(4194308,4,ig.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $o(4194308,4,t,e)},useInsertionEffect:function(t,e){return $o(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nw.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:pf,useDebugValue:fd,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=pf(!1),e=t[0];return t=tw.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=sn();if(ve){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Ue===null)throw Error(P(349));Nr&30||Xm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,mf(Jm.bind(null,r,i,t),[t]),r.flags|=2048,Bi(9,Zm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=sn(),e=Ue.identifierPrefix;if(ve){var n=_n,r=yn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ji++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ew++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iw={readContext:Vt,useCallback:ag,useContext:Vt,useEffect:hd,useImperativeHandle:og,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:lg,useReducer:Xl,useRef:ng,useState:function(){return Xl(Vi)},useDebugValue:fd,useDeferredValue:function(t){var e=Bt();return cg(e,Fe.memoizedState,t)},useTransition:function(){var t=Xl(Vi)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Qm,useId:ug,unstable_isNewReconciler:!1},ow={readContext:Vt,useCallback:ag,useContext:Vt,useEffect:hd,useImperativeHandle:og,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:lg,useReducer:Zl,useRef:ng,useState:function(){return Zl(Vi)},useDebugValue:fd,useDeferredValue:function(t){var e=Bt();return Fe===null?e.memoizedState=t:cg(e,Fe.memoizedState,t)},useTransition:function(){var t=Zl(Vi)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Qm,useId:ug,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qa={isMounted:function(t){return(t=t._reactInternals)?Pr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Zn(t),i=wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Yt(e,t,s,r),Wo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Zn(t),i=wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Yt(e,t,s,r),Wo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Zn(t),s=wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&(Yt(e,t,r,n),Wo(e,t,r))}};function gf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ri(n,r)||!Ri(s,i):!0}function pg(t,e,n){var r=!1,s=nr,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=vt(e)?xr:nt.current,r=e.contextTypes,i=(r=r!=null)?Ss(t,s):nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qa.enqueueReplaceState(e,e.state,null)}function Yc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},id(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=vt(e)?xr:nt.current,s.context=Ss(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Kc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qa.enqueueReplaceState(s,s.state,null),ya(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bs(t,e){try{var n="",r=e;do n+=P_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aw=typeof WeakMap=="function"?WeakMap:Map;function mg(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ea||(Ea=!0,ou=r),Qc(t,e)},n}function gg(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qc(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Sw.bind(null,t,e,n),e.then(t,t))}function _f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var lw=Tn.ReactCurrentOwner,mt=!1;function it(t,e,n,r){e.child=t===null?$m(e,null,n,r):Es(e,t.child,n,r)}function Sf(t,e,n,r,s){n=n.render;var i=e.ref;return ps(e,s),r=ud(t,e,n,r,i,s),n=dd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ve&&n&&Zu(e),e.flags|=1,it(t,e,r,s),e.child)}function Cf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vg(t,e,i,r,s)):(t=Yo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ri,n(o,r)&&t.ref===e.ref)return bn(t,e,s)}return e.flags|=1,t=Jn(i,r),t.ref=e.ref,t.return=e,e.child=t}function vg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ri(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,bn(t,e,s)}return Xc(t,e,n,r,s)}function yg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(is,Ct),Ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(is,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(is,Ct),Ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,le(is,Ct),Ct|=r;return it(t,e,s,n),e.child}function _g(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xc(t,e,n,r,s){var i=vt(n)?xr:nt.current;return i=Ss(e,i),ps(e,s),n=ud(t,e,n,r,i,s),r=dd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ve&&r&&Zu(e),e.flags|=1,it(t,e,n,s),e.child)}function Ef(t,e,n,r,s){if(vt(n)){var i=!0;fa(e)}else i=!1;if(ps(e,s),e.stateNode===null)Ho(t,e),pg(e,n,r),Yc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vt(c):(c=vt(n)?xr:nt.current,c=Ss(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&vf(e,o,r,c),Vn=!1;var h=e.memoizedState;o.state=h,ya(e,r,o,s),l=e.memoizedState,a!==r||h!==l||gt.current||Vn?(typeof u=="function"&&(Kc(e,n,u,r),l=e.memoizedState),(a=Vn||gf(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qm(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ut(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vt(l):(l=vt(n)?xr:nt.current,l=Ss(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&vf(e,o,r,l),Vn=!1,h=e.memoizedState,o.state=h,ya(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||gt.current||Vn?(typeof g=="function"&&(Kc(e,n,g,r),p=e.memoizedState),(c=Vn||gf(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Zc(t,e,n,r,i,s)}function Zc(t,e,n,r,s,i){_g(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lf(e,n,!1),bn(t,e,i);r=e.stateNode,lw.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Es(e,t.child,null,i),e.child=Es(e,null,a,i)):it(t,e,a,i),e.memoizedState=r.state,s&&lf(e,n,!0),e.child}function wg(t){var e=t.stateNode;e.pendingContext?af(t,e.pendingContext,e.pendingContext!==e.context):e.context&&af(t,e.context,!1),od(t,e.containerInfo)}function xf(t,e,n,r,s){return Cs(),ed(s),e.flags|=256,it(t,e,n,r),e.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function eu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sg(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),le(we,s&1),t===null)return Hc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ja(o,r,0,null),t=Sr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=eu(n),e.memoizedState=Jc,t):pd(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return cw(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Jn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Jn(a,i):(i=Sr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?eu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Jc,r}return i=t.child,t=i.sibling,r=Jn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pd(t,e){return e=Ja({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bo(t,e,n,r){return r!==null&&ed(r),Es(e,t.child,null,n),t=pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jl(Error(P(422))),bo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ja({mode:"visible",children:r.children},s,0,null),i=Sr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Es(e,t.child,null,o),e.child.memoizedState=eu(o),e.memoizedState=Jc,i);if(!(e.mode&1))return bo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=Jl(i,r,void 0),bo(t,e,o,r)}if(a=(o&t.childLanes)!==0,mt||a){if(r=Ue,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xn(t,s),Yt(r,t,s,-1))}return wd(),r=Jl(Error(P(421))),bo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Cw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xt=Yn(s.nextSibling),bt=e,ve=!0,Gt=null,t!==null&&(Mt[Rt++]=yn,Mt[Rt++]=_n,Mt[Rt++]=br,yn=t.id,_n=t.overflow,br=e),e=pd(e,r.children),e.flags|=4096,e)}function bf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qc(t.return,e,n)}function ec(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Cg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(it(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bf(t,n,e);else if(t.tag===19)bf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&_a(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ec(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_a(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ec(e,!0,n,null,i);break;case"together":ec(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uw(t,e,n){switch(e.tag){case 3:wg(e),Cs();break;case 5:Km(e);break;case 1:vt(e.type)&&fa(e);break;case 4:od(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;le(ga,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?Sg(t,e,n):(le(we,we.current&1),t=bn(t,e,n),t!==null?t.sibling:null);le(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Cg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,yg(t,e,n)}return bn(t,e,n)}var Eg,tu,xg,bg;Eg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tu=function(){};xg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,yr(cn.current);var i=null;switch(n){case"input":s=Ec(t,s),r=Ec(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=Nc(t,s),r=Nc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=da)}kc(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&he("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};bg=function(t,e,n,r){n!==r&&(e.flags|=4)};function oi(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dw(t,e,n){var r=e.pendingProps;switch(Ju(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return vt(e.type)&&ha(),Ze(e),null;case 3:return r=e.stateNode,xs(),pe(gt),pe(nt),ld(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(cu(Gt),Gt=null))),tu(t,e),Ze(e),null;case 5:ad(e);var s=yr(Fi.current);if(n=e.type,t!==null&&e.stateNode!=null)xg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return Ze(e),null}if(t=yr(cn.current),Eo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[on]=e,r[Di]=i,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(s=0;s<fi.length;s++)he(fi[s],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Oh(r,i),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},he("invalid",r);break;case"textarea":Dh(r,i),he("invalid",r)}kc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Co(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Co(r.textContent,a,t),s=["children",""+a]):bi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":po(r),Ph(r,i,!0);break;case"textarea":po(r),Lh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=da)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[on]=e,t[Di]=r,Eg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ac(n,r),n){case"dialog":he("cancel",t),he("close",t),s=r;break;case"iframe":case"object":case"embed":he("load",t),s=r;break;case"video":case"audio":for(s=0;s<fi.length;s++)he(fi[s],t);s=r;break;case"source":he("error",t),s=r;break;case"img":case"image":case"link":he("error",t),he("load",t),s=r;break;case"details":he("toggle",t),s=r;break;case"input":Oh(t,r),s=Ec(t,r),he("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),he("invalid",t);break;case"textarea":Dh(t,r),s=Nc(t,r),he("invalid",t);break;default:s=r}kc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?nm(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&em(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ni(t,l):typeof l=="number"&&Ni(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&he("scroll",t):l!=null&&ju(t,i,l,o))}switch(n){case"input":po(t),Ph(t,r,!1);break;case"textarea":po(t),Lh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?us(t,!!r.multiple,i,!1):r.defaultValue!=null&&us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=da)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)bg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=yr(Fi.current),yr(cn.current),Eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(i=r.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Co(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Co(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return Ze(e),null;case 13:if(pe(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&xt!==null&&e.mode&1&&!(e.flags&128))Wm(),Cs(),e.flags|=98560,i=!1;else if(i=Eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[on]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Gt!==null&&(cu(Gt),Gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?je===0&&(je=3):wd())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return xs(),tu(t,e),t===null&&Oi(e.stateNode.containerInfo),Ze(e),null;case 10:return rd(e.type._context),Ze(e),null;case 17:return vt(e.type)&&ha(),Ze(e),null;case 19:if(pe(we),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)oi(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_a(t),o!==null){for(e.flags|=128,oi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Ns&&(e.flags|=128,r=!0,oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=_a(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return Ze(e),null}else 2*Ae()-i.renderingStartTime>Ns&&n!==1073741824&&(e.flags|=128,r=!0,oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=we.current,le(we,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return _d(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function hw(t,e){switch(Ju(e),e.tag){case 1:return vt(e.type)&&ha(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),pe(gt),pe(nt),ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ad(e),null;case 13:if(pe(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(we),null;case 4:return xs(),null;case 10:return rd(e.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var No=!1,et=!1,fw=typeof WeakSet=="function"?WeakSet:Set,G=null;function ss(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function nu(t,e,n){try{n()}catch(r){xe(t,e,r)}}var Nf=!1;function pw(t,e){if(Vc=la,t=Im(),Xu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bc={focusedElem:t,selectionRange:n},la=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,f=e.stateNode,v=f.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ut(e.type,m),y);f.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(E){xe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return p=Nf,Nf=!1,p}function wi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nu(e,n,i)}s=s.next}while(s!==r)}}function Xa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ru(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ng(t){var e=t.alternate;e!==null&&(t.alternate=null,Ng(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[Di],delete e[Wc],delete e[Q1],delete e[X1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tg(t){return t.tag===5||t.tag===3||t.tag===4}function Tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function su(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=da));else if(r!==4&&(t=t.child,t!==null))for(su(t,e,n),t=t.sibling;t!==null;)su(t,e,n),t=t.sibling}function iu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(iu(t,e,n),t=t.sibling;t!==null;)iu(t,e,n),t=t.sibling}var qe=null,Wt=!1;function On(t,e,n){for(n=n.child;n!==null;)kg(t,e,n),n=n.sibling}function kg(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Wa,n)}catch{}switch(n.tag){case 5:et||ss(n,e);case 6:var r=qe,s=Wt;qe=null,On(t,e,n),qe=r,Wt=s,qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?ql(t.parentNode,n):t.nodeType===1&&ql(t,n),Ii(t)):ql(qe,n.stateNode));break;case 4:r=qe,s=Wt,qe=n.stateNode.containerInfo,Wt=!0,On(t,e,n),qe=r,Wt=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nu(n,e,o),s=s.next}while(s!==r)}On(t,e,n);break;case 1:if(!et&&(ss(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xe(n,e,a)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,On(t,e,n),et=r):On(t,e,n);break;default:On(t,e,n)}}function kf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fw),e.forEach(function(r){var s=Ew.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qe=a.stateNode,Wt=!1;break e;case 3:qe=a.stateNode.containerInfo,Wt=!0;break e;case 4:qe=a.stateNode.containerInfo,Wt=!0;break e}a=a.return}if(qe===null)throw Error(P(160));kg(i,o,s),qe=null,Wt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){xe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ag(e,t),e=e.sibling}function Ag(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),rn(t),r&4){try{wi(3,t,t.return),Xa(3,t)}catch(m){xe(t,t.return,m)}try{wi(5,t,t.return)}catch(m){xe(t,t.return,m)}}break;case 1:zt(e,t),rn(t),r&512&&n!==null&&ss(n,n.return);break;case 5:if(zt(e,t),rn(t),r&512&&n!==null&&ss(n,n.return),t.flags&32){var s=t.stateNode;try{Ni(s,"")}catch(m){xe(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Xp(s,i),Ac(a,o);var c=Ac(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?nm(s,d):u==="dangerouslySetInnerHTML"?em(s,d):u==="children"?Ni(s,d):ju(s,u,d,c)}switch(a){case"input":xc(s,i);break;case"textarea":Zp(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?us(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?us(s,!!i.multiple,i.defaultValue,!0):us(s,!!i.multiple,i.multiple?[]:"",!1))}s[Di]=i}catch(m){xe(t,t.return,m)}}break;case 6:if(zt(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){xe(t,t.return,m)}}break;case 3:if(zt(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ii(e.containerInfo)}catch(m){xe(t,t.return,m)}break;case 4:zt(e,t),rn(t);break;case 13:zt(e,t),rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vd=Ae())),r&4&&kf(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(et=(c=et)||u,zt(e,t),et=c):zt(e,t),rn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(G=t,u=t.child;u!==null;){for(d=G=u;G!==null;){switch(h=G,g=h.child,h.tag){case 0:case 11:case 14:case 15:wi(4,h,h.return);break;case 1:ss(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){xe(r,n,m)}}break;case 5:ss(h,h.return);break;case 22:if(h.memoizedState!==null){If(d);continue}}g!==null?(g.return=h,G=g):If(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tm("display",o))}catch(m){xe(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xe(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zt(e,t),rn(t),r&4&&kf(t);break;case 21:break;default:zt(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tg(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ni(s,""),r.flags&=-33);var i=Tf(t);iu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Tf(t);su(t,a,o);break;default:throw Error(P(161))}}catch(l){xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mw(t,e,n){G=t,Ig(t)}function Ig(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||No;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||et;a=No;var c=et;if(No=o,(et=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?Mf(s):l!==null?(l.return=o,G=l):Mf(s);for(;i!==null;)G=i,Ig(i),i=i.sibling;G=s,No=a,et=c}Af(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Af(t)}}function Af(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||Xa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ff(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ff(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ii(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}et||e.flags&512&&ru(e)}catch(h){xe(e,e.return,h)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function If(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Mf(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xa(4,e)}catch(l){xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){xe(e,s,l)}}var i=e.return;try{ru(e)}catch(l){xe(e,i,l)}break;case 5:var o=e.return;try{ru(e)}catch(l){xe(e,o,l)}}}catch(l){xe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var gw=Math.ceil,Ca=Tn.ReactCurrentDispatcher,md=Tn.ReactCurrentOwner,Lt=Tn.ReactCurrentBatchConfig,ne=0,Ue=null,Pe=null,Ke=0,Ct=0,is=ar(0),je=0,zi=null,Tr=0,Za=0,gd=0,Si=null,ft=null,vd=0,Ns=1/0,mn=null,Ea=!1,ou=null,Xn=null,To=!1,$n=null,xa=0,Ci=0,au=null,qo=-1,Ko=0;function ct(){return ne&6?Ae():qo!==-1?qo:qo=Ae()}function Zn(t){return t.mode&1?ne&2&&Ke!==0?Ke&-Ke:J1.transition!==null?(Ko===0&&(Ko=pm()),Ko):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Sm(t.type)),t):1}function Yt(t,e,n,r){if(50<Ci)throw Ci=0,au=null,Error(P(185));Ki(t,n,r),(!(ne&2)||t!==Ue)&&(t===Ue&&(!(ne&2)&&(Za|=n),je===4&&Wn(t,Ke)),yt(t,r),n===1&&ne===0&&!(e.mode&1)&&(Ns=Ae()+500,Ka&&lr()))}function yt(t,e){var n=t.callbackNode;J_(t,e);var r=aa(t,t===Ue?Ke:0);if(r===0)n!==null&&Vh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vh(n),e===1)t.tag===0?Z1(Rf.bind(null,t)):Bm(Rf.bind(null,t)),K1(function(){!(ne&6)&&lr()}),n=null;else{switch(mm(r)){case 1:n=Wu;break;case 4:n=hm;break;case 16:n=oa;break;case 536870912:n=fm;break;default:n=oa}n=jg(n,Mg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mg(t,e){if(qo=-1,Ko=0,ne&6)throw Error(P(327));var n=t.callbackNode;if(ms()&&t.callbackNode!==n)return null;var r=aa(t,t===Ue?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ba(t,r);else{e=r;var s=ne;ne|=2;var i=Og();(Ue!==t||Ke!==e)&&(mn=null,Ns=Ae()+500,wr(t,e));do try{_w();break}catch(a){Rg(t,a)}while(!0);nd(),Ca.current=i,ne=s,Pe!==null?e=0:(Ue=null,Ke=0,e=je)}if(e!==0){if(e===2&&(s=Pc(t),s!==0&&(r=s,e=lu(t,s))),e===1)throw n=zi,wr(t,0),Wn(t,r),yt(t,Ae()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!vw(s)&&(e=ba(t,r),e===2&&(i=Pc(t),i!==0&&(r=i,e=lu(t,i))),e===1))throw n=zi,wr(t,0),Wn(t,r),yt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:mr(t,ft,mn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=vd+500-Ae(),10<e)){if(aa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Uc(mr.bind(null,t,ft,mn),e);break}mr(t,ft,mn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Kt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gw(r/1960))-r,10<r){t.timeoutHandle=Uc(mr.bind(null,t,ft,mn),r);break}mr(t,ft,mn);break;case 5:mr(t,ft,mn);break;default:throw Error(P(329))}}}return yt(t,Ae()),t.callbackNode===n?Mg.bind(null,t):null}function lu(t,e){var n=Si;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=ba(t,e),t!==2&&(e=ft,ft=n,e!==null&&cu(e)),t}function cu(t){ft===null?ft=t:ft.push.apply(ft,t)}function vw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~gd,e&=~Za,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kt(e),r=1<<n;t[n]=-1,e&=~r}}function Rf(t){if(ne&6)throw Error(P(327));ms();var e=aa(t,0);if(!(e&1))return yt(t,Ae()),null;var n=ba(t,e);if(t.tag!==0&&n===2){var r=Pc(t);r!==0&&(e=r,n=lu(t,r))}if(n===1)throw n=zi,wr(t,0),Wn(t,e),yt(t,Ae()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,ft,mn),yt(t,Ae()),null}function yd(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(Ns=Ae()+500,Ka&&lr())}}function kr(t){$n!==null&&$n.tag===0&&!(ne&6)&&ms();var e=ne;ne|=1;var n=Lt.transition,r=ie;try{if(Lt.transition=null,ie=1,t)return t()}finally{ie=r,Lt.transition=n,ne=e,!(ne&6)&&lr()}}function _d(){Ct=is.current,pe(is)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q1(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Ju(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ha();break;case 3:xs(),pe(gt),pe(nt),ld();break;case 5:ad(r);break;case 4:xs();break;case 13:pe(we);break;case 19:pe(we);break;case 10:rd(r.type._context);break;case 22:case 23:_d()}n=n.return}if(Ue=t,Pe=t=Jn(t.current,null),Ke=Ct=e,je=0,zi=null,gd=Za=Tr=0,ft=Si=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vr=null}return t}function Rg(t,e){do{var n=Pe;try{if(nd(),Go.current=Sa,wa){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wa=!1}if(Nr=0,ze=Fe=Se=null,_i=!1,ji=0,md.current=null,n===null||n.return===null){je=1,zi=e,Pe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ke,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=_f(o);if(g!==null){g.flags&=-257,wf(g,o,a,i,e),g.mode&1&&yf(i,c,e),e=g,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){yf(i,c,e),wd();break e}l=Error(P(426))}}else if(ve&&a.mode&1){var y=_f(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),wf(y,o,a,i,e),ed(bs(l,a));break e}}i=l=bs(l,a),je!==4&&(je=2),Si===null?Si=[i]:Si.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=mg(i,l,e);hf(i,f);break e;case 1:a=l;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xn===null||!Xn.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=gg(i,a,e);hf(i,E);break e}}i=i.return}while(i!==null)}Dg(n)}catch(w){e=w,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function Og(){var t=Ca.current;return Ca.current=Sa,t===null?Sa:t}function wd(){(je===0||je===3||je===2)&&(je=4),Ue===null||!(Tr&268435455)&&!(Za&268435455)||Wn(Ue,Ke)}function ba(t,e){var n=ne;ne|=2;var r=Og();(Ue!==t||Ke!==e)&&(mn=null,wr(t,e));do try{yw();break}catch(s){Rg(t,s)}while(!0);if(nd(),ne=n,Ca.current=r,Pe!==null)throw Error(P(261));return Ue=null,Ke=0,je}function yw(){for(;Pe!==null;)Pg(Pe)}function _w(){for(;Pe!==null&&!G_();)Pg(Pe)}function Pg(t){var e=Fg(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?Dg(t):Pe=e,md.current=null}function Dg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hw(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Pe=null;return}}else if(n=dw(n,e,Ct),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);je===0&&(je=5)}function mr(t,e,n){var r=ie,s=Lt.transition;try{Lt.transition=null,ie=1,ww(t,e,n,r)}finally{Lt.transition=s,ie=r}return null}function ww(t,e,n,r){do ms();while($n!==null);if(ne&6)throw Error(P(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(e1(t,i),t===Ue&&(Pe=Ue=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||To||(To=!0,jg(oa,function(){return ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Lt.transition,Lt.transition=null;var o=ie;ie=1;var a=ne;ne|=4,md.current=null,pw(t,n),Ag(n,t),B1(Bc),la=!!Vc,Bc=Vc=null,t.current=n,mw(n),$_(),ne=a,ie=o,Lt.transition=i}else t.current=n;if(To&&(To=!1,$n=t,xa=s),i=t.pendingLanes,i===0&&(Xn=null),K_(n.stateNode),yt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ea)throw Ea=!1,t=ou,ou=null,t;return xa&1&&t.tag!==0&&ms(),i=t.pendingLanes,i&1?t===au?Ci++:(Ci=0,au=t):Ci=0,lr(),null}function ms(){if($n!==null){var t=mm(xa),e=Lt.transition,n=ie;try{if(Lt.transition=null,ie=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,xa=0,ne&6)throw Error(P(331));var s=ne;for(ne|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var u=G;switch(u.tag){case 0:case 11:case 15:wi(8,u,i)}var d=u.child;if(d!==null)d.return=u,G=d;else for(;G!==null;){u=G;var h=u.sibling,g=u.return;if(Ng(u),u===c){G=null;break}if(h!==null){h.return=g,G=h;break}G=g}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wi(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,G=f;break e}G=i.return}}var v=t.current;for(G=v;G!==null;){o=G;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,G=_;else e:for(o=v;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xa(9,a)}}catch(w){xe(a,a.return,w)}if(a===o){G=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,G=E;break e}G=a.return}}if(ne=s,lr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Wa,t)}catch{}r=!0}return r}finally{ie=n,Lt.transition=e}}return!1}function Of(t,e,n){e=bs(n,e),e=mg(t,e,1),t=Qn(t,e,1),e=ct(),t!==null&&(Ki(t,1,e),yt(t,e))}function xe(t,e,n){if(t.tag===3)Of(t,t,n);else for(;e!==null;){if(e.tag===3){Of(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=bs(n,t),t=gg(e,t,1),e=Qn(e,t,1),t=ct(),e!==null&&(Ki(e,1,t),yt(e,t));break}}e=e.return}}function Sw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Ue===t&&(Ke&n)===n&&(je===4||je===3&&(Ke&130023424)===Ke&&500>Ae()-vd?wr(t,0):gd|=n),yt(t,e)}function Lg(t,e){e===0&&(t.mode&1?(e=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):e=1);var n=ct();t=xn(t,e),t!==null&&(Ki(t,e,n),yt(t,n))}function Cw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lg(t,n)}function Ew(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),Lg(t,n)}var Fg;Fg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,uw(t,e,n);mt=!!(t.flags&131072)}else mt=!1,ve&&e.flags&1048576&&zm(e,ma,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ho(t,e),t=e.pendingProps;var s=Ss(e,nt.current);ps(e,n),s=ud(null,e,r,t,s,n);var i=dd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(r)?(i=!0,fa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,id(e),s.updater=Qa,e.stateNode=s,s._reactInternals=e,Yc(e,r,t,n),e=Zc(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&Zu(e),it(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ho(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=bw(r),t=Ut(r,t),s){case 0:e=Xc(null,e,r,t,n);break e;case 1:e=Ef(null,e,r,t,n);break e;case 11:e=Sf(null,e,r,t,n);break e;case 14:e=Cf(null,e,r,Ut(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Xc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Ef(t,e,r,s,n);case 3:e:{if(wg(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,s=i.element,qm(t,e),ya(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bs(Error(P(423)),e),e=xf(t,e,r,n,s);break e}else if(r!==s){s=bs(Error(P(424)),e),e=xf(t,e,r,n,s);break e}else for(xt=Yn(e.stateNode.containerInfo.firstChild),bt=e,ve=!0,Gt=null,n=$m(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),r===s){e=bn(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Km(e),t===null&&Hc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zc(r,s)?o=null:i!==null&&zc(r,i)&&(e.flags|=32),_g(t,e),it(t,e,o,n),e.child;case 6:return t===null&&Hc(e),null;case 13:return Sg(t,e,n);case 4:return od(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Es(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Sf(t,e,r,s,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,le(ga,r._currentValue),r._currentValue=o,i!==null)if(Xt(i.value,o)){if(i.children===s.children&&!gt.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),qc(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}it(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ps(e,n),s=Vt(s),r=r(s),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),Cf(t,e,r,s,n);case 15:return vg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Ho(t,e),e.tag=1,vt(r)?(t=!0,fa(e)):t=!1,ps(e,n),pg(e,r,s),Yc(e,r,s,n),Zc(null,e,r,!0,t,n);case 19:return Cg(t,e,n);case 22:return yg(t,e,n)}throw Error(P(156,e.tag))};function jg(t,e){return dm(t,e)}function xw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new xw(t,e,n,r)}function Sd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bw(t){if(typeof t=="function")return Sd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bu)return 11;if(t===zu)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Sd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yr:return Sr(n.children,s,i,e);case Vu:o=8,s|=8;break;case _c:return t=Ot(12,n,e,s|2),t.elementType=_c,t.lanes=i,t;case wc:return t=Ot(13,n,e,s),t.elementType=wc,t.lanes=i,t;case Sc:return t=Ot(19,n,e,s),t.elementType=Sc,t.lanes=i,t;case Kp:return Ja(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hp:o=10;break e;case qp:o=9;break e;case Bu:o=11;break e;case zu:o=14;break e;case jn:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Ot(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Sr(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function Ja(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=Kp,t.lanes=n,t.stateNode={isHidden:!1},t}function tc(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function nc(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cd(t,e,n,r,s,i,o,a,l){return t=new Nw(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(i),t}function Tw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vg(t){if(!t)return nr;t=t._reactInternals;e:{if(Pr(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(vt(n))return Vm(t,n,e)}return e}function Bg(t,e,n,r,s,i,o,a,l){return t=Cd(n,r,!0,t,s,i,o,a,l),t.context=Vg(null),n=t.current,r=ct(),s=Zn(n),i=wn(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,Ki(t,s,r),yt(t,r),t}function el(t,e,n,r){var s=e.current,i=ct(),o=Zn(s);return n=Vg(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,o),t!==null&&(Yt(t,s,o,i),Wo(t,s,o)),o}function Na(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ed(t,e){Pf(t,e),(t=t.alternate)&&Pf(t,e)}function kw(){return null}var zg=typeof reportError=="function"?reportError:function(t){console.error(t)};function xd(t){this._internalRoot=t}tl.prototype.render=xd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));el(t,e,null,null)};tl.prototype.unmount=xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kr(function(){el(null,t,null,null)}),e[En]=null}};function tl(t){this._internalRoot=t}tl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ym();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&wm(t)}};function bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Df(){}function Aw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Na(o);i.call(c)}}var o=Bg(e,r,t,0,null,!1,!1,"",Df);return t._reactRootContainer=o,t[En]=o.current,Oi(t.nodeType===8?t.parentNode:t),kr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Na(l);a.call(c)}}var l=Cd(t,0,!1,null,null,!1,!1,"",Df);return t._reactRootContainer=l,t[En]=l.current,Oi(t.nodeType===8?t.parentNode:t),kr(function(){el(e,l,n,r)}),l}function rl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Na(o);a.call(l)}}el(e,o,t,s)}else o=Aw(n,e,t,s,r);return Na(o)}gm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hi(e.pendingLanes);n!==0&&(Gu(e,n|1),yt(e,Ae()),!(ne&6)&&(Ns=Ae()+500,lr()))}break;case 13:kr(function(){var r=xn(t,1);if(r!==null){var s=ct();Yt(r,t,1,s)}}),Ed(t,1)}};$u=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=ct();Yt(e,t,134217728,n)}Ed(t,134217728)}};vm=function(t){if(t.tag===13){var e=Zn(t),n=xn(t,e);if(n!==null){var r=ct();Yt(n,t,e,r)}Ed(t,e)}};ym=function(){return ie};_m=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Mc=function(t,e,n){switch(e){case"input":if(xc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qa(r);if(!s)throw Error(P(90));Qp(r),xc(r,s)}}}break;case"textarea":Zp(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};im=yd;om=kr;var Iw={usingClientEntryPoint:!1,Events:[Qi,Jr,qa,rm,sm,yd]},ai={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mw={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cm(t),t===null?null:t.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{Wa=ko.inject(Mw),ln=ko}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iw;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bd(e))throw Error(P(200));return Tw(t,e,null,n)};kt.createRoot=function(t,e){if(!bd(t))throw Error(P(299));var n=!1,r="",s=zg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cd(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,Oi(t.nodeType===8?t.parentNode:t),new xd(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=cm(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return kr(t)};kt.hydrate=function(t,e,n){if(!nl(e))throw Error(P(200));return rl(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!bd(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=zg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bg(e,null,t,1,n??null,s,!1,i,o),t[En]=e.current,Oi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tl(e)};kt.render=function(t,e,n){if(!nl(e))throw Error(P(200));return rl(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!nl(t))throw Error(P(40));return t._reactRootContainer?(kr(function(){rl(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};kt.unstable_batchedUpdates=yd;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nl(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return rl(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function Ug(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ug)}catch(t){console.error(t)}}Ug(),Up.exports=kt;var sl=Up.exports;const Rw=Mu(sl);var Wg,Lf=sl;Wg=Lf.createRoot,Lf.hydrateRoot;const Gg=S.createContext(void 0),Ow=({children:t})=>{const[e,n]=S.useState("playground");return C.jsx(Gg.Provider,{value:{mode:e,setMode:n},children:t})},Pw={BASE_URL:"/piano-maestro",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Ff=t=>{let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,g))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Pw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},Dw=t=>t?Ff(t):Ff;var $g={exports:{}},Hg={},qg={exports:{}},Kg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=S;function Lw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fw=typeof Object.is=="function"?Object.is:Lw,jw=Ts.useState,Vw=Ts.useEffect,Bw=Ts.useLayoutEffect,zw=Ts.useDebugValue;function Uw(t,e){var n=e(),r=jw({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Bw(function(){s.value=n,s.getSnapshot=e,rc(s)&&i({inst:s})},[t,n,e]),Vw(function(){return rc(s)&&i({inst:s}),t(function(){rc(s)&&i({inst:s})})},[t]),zw(n),n}function rc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fw(t,n)}catch{return!0}}function Ww(t,e){return e()}var Gw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ww:Uw;Kg.useSyncExternalStore=Ts.useSyncExternalStore!==void 0?Ts.useSyncExternalStore:Gw;qg.exports=Kg;var $w=qg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il=S,Hw=$w;function qw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kw=typeof Object.is=="function"?Object.is:qw,Yw=Hw.useSyncExternalStore,Qw=il.useRef,Xw=il.useEffect,Zw=il.useMemo,Jw=il.useDebugValue;Hg.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Qw(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Zw(function(){function l(g){if(!c){if(c=!0,u=g,g=r(g),s!==void 0&&o.hasValue){var p=o.value;if(s(p,g))return d=p}return d=g}if(p=d,Kw(u,g))return p;var m=r(g);return s!==void 0&&s(p,m)?p:(u=g,d=m)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var a=Yw(t,i[0],i[1]);return Xw(function(){o.hasValue=!0,o.value=a},[a]),Jw(a),a};$g.exports=Hg;var eS=$g.exports;const tS=Mu(eS),Yg={BASE_URL:"/piano-maestro",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:nS}=Je,{useSyncExternalStoreWithSelector:rS}=tS;let jf=!1;const sS=t=>t;function iS(t,e=sS,n){(Yg?"production":void 0)!=="production"&&n&&!jf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jf=!0);const r=rS(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return nS(r),r}const oS=t=>{(Yg?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Dw(t):t,n=(r,s)=>iS(e,r,s);return Object.assign(n,e),n},aS=t=>oS,lS={BASE_URL:"/piano-maestro",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Qg(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Ui=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ui(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ui(r)(n)}}}},cS=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,f)=>({...f,...y}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,s);const u=Ui(i.serialize),d=()=>{const y=i.partialize({...r()});let f;const v=u({state:y,version:i.version}).then(_=>c.setItem(i.name,_)).catch(_=>{f=_});if(f)throw f;return v},h=s.setState;s.setState=(y,f)=>{h(y,f),d()};const g=t((...y)=>{n(...y),d()},r,s);let p;const m=()=>{var y;if(!c)return;o=!1,a.forEach(v=>v(r()));const f=((y=i.onRehydrateStorage)==null?void 0:y.call(i,r()))||void 0;return Ui(c.getItem.bind(c))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var _;return p=i.merge(v,(_=r())!=null?_:g),n(p,!0),d()}).then(()=>{f==null||f(p,void 0),o=!0,l.forEach(v=>v(p))}).catch(v=>{f==null||f(void 0,v)})};return s.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(c=y.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},m(),p||g},uS=(t,e)=>(n,r,s)=>{let i={storage:Qg(()=>localStorage),partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=()=>{const m=i.partialize({...r()});return c.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,y)=>{d(m,y),u()};const h=t((...m)=>{n(...m),u()},r,s);s.getInitialState=()=>h;let g;const p=()=>{var m,y;if(!c)return;o=!1,a.forEach(v=>{var _;return v((_=r())!=null?_:h)});const f=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(m=r())!=null?m:h))||void 0;return Ui(c.getItem.bind(c))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var _;const[E,w]=v;if(g=i.merge(w,(_=r())!=null?_:h),n(g,!0),E)return u()}).then(()=>{f==null||f(g,void 0),g=r(),o=!0,l.forEach(v=>v(g))}).catch(v=>{f==null||f(void 0,v)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},i.skipHydration||p(),g||h},dS=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((lS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),cS(t,e)):uS(t,e),hS=dS,ol=["C","C#","D","Eb","E","F","F#","G","G#","A","Bb","B"],Xg={C:0,"C#":1,D:2,Eb:3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,Bb:10,B:11},at=t=>{const e=ol[t%12],n=Math.floor(t/12)-1;return`${e}${n}`},fS=t=>ol[t%12],Vf=t=>{const e=t[0];return t.slice(1).map(n=>n-e)},Zg=(t,e)=>{if(t.length!==e.length)return!1;const n=[...t].sort((o,a)=>o-a),r=[...e].sort((o,a)=>o-a);if(n[0]%12!==r[0]%12)return!1;const s=Vf(n),i=Vf(r);for(let o=0;o<s.length;o++)if(s[o]!==i[o])return!1;return!0},Bf=(t,e)=>{const n=e-t+1;return t+Math.floor(Math.random()*n)},uu=(t,e,n)=>{let r=Bf(t,e);if(!n||t===e)return r;for(;r===n;)r=Bf(t,e);return r},pS=(t,e)=>{const n=60+Xg[t];return e.map(r=>n+r)},Nd={major:{label:"Major",intervals:[0,4,7]},minor:{label:"Minor",intervals:[0,3,7]},diminished:{label:"Diminished",intervals:[0,3,6]},augmented:{label:"Augmented",intervals:[0,4,8]},"major-7":{label:"Major 7",intervals:[0,4,7,11]},"minor-7":{label:"Minor 7",intervals:[0,3,7,10]},"dominant-7":{label:"7 (Dominant 7)",intervals:[0,4,7,10]},"suspended-2":{label:"Suspended 2",intervals:[0,2,7]},"suspended-4":{label:"Suspended 4",intervals:[0,5,7]}},Qo=ol.flatMap(t=>Object.entries(Nd).map(([e,{label:n,intervals:r}])=>({name:`${t} ${n}`,notes:pS(t,r),type:e}))),sc=({currentChord:t,enabledChords:e})=>{let n;if(e&&e.length===0)return Qo[0];do n=Qo[Math.floor(Math.random()*Qo.length)];while(t&&n.name===t.name||e&&!e.includes(n.type));return n},Td={ionian:{label:"Ionian (Major)",intervals:[0,2,4,5,7,9,11,12]},dorian:{label:"Dorian",intervals:[0,2,3,5,7,9,10,12]},phrygian:{label:"Phrygian",intervals:[0,1,3,5,7,8,10,12]},lydian:{label:"Lydian",intervals:[0,2,4,6,7,9,11,12]},mixolydian:{label:"Mixolydian",intervals:[0,2,4,5,7,9,10,12]},aeolian:{label:"Aeolian (Minor)",intervals:[0,2,3,5,7,8,10,12]},locrian:{label:"Locrian",intervals:[0,1,3,5,6,8,10,12]},pentatonic:{label:"Pentatonic",intervals:[0,2,4,7,9]},blues:{label:"Blues",intervals:[0,3,5,6,7,10,12]},"whole-note":{label:"Whole Tone",intervals:[0,2,4,6,8,10,12]},chromatic:{label:"Chromatic",intervals:Array.from({length:13},(t,e)=>e)},arabian:{label:"Arabian",intervals:[0,2,3,5,7,8,11,12]},"arabian-pentatonic":{label:"Arabian Pentatonic",intervals:[0,1,4,5,7]}},mS=(t,e)=>{const n=60+Xg[t]-12;return e.map(r=>n+r)},ic=ol.flatMap(t=>Object.entries(Td).map(([e,{label:n,intervals:r}])=>({name:`${t} ${n}`,notes:mS(t,r),mode:e}))),oc=({currentScale:t,enabledScales:e}={})=>{let n;if(e&&e.length===0)return ic[0];do n=ic[Math.floor(Math.random()*ic.length)];while(t&&n.name===t.name||e&&!e.includes(n.mode));return n},ks={"minor-2nd":{label:"Minor 2nd",semitones:1},"major-2nd":{label:"Major 2nd",semitones:2},"minor-3rd":{label:"Minor 3rd",semitones:3},"major-3rd":{label:"Major 3rd",semitones:4},"perfect-4th":{label:"Perfect 4th",semitones:5},tritone:{label:"Tritone",semitones:6},"perfect-5th":{label:"Perfect 5th",semitones:7},"minor-6th":{label:"Minor 6th",semitones:8},"major-6th":{label:"Major 6th",semitones:9},"minor-7th":{label:"Minor 7th",semitones:10},"major-7th":{label:"Major 7th",semitones:11},octave:{label:"Octave",semitones:12}},gS=aS()(hS(t=>({lowKey:36,highKey:84,enabledChordTypes:new Set(Object.keys(Nd)),enabledScales:new Set(Object.keys(Td)),enabledIntervals:new Set(Object.keys(ks)),intervalDirection:"both",setLowKey:e=>t({lowKey:e}),setHighKey:e=>t({highKey:e}),toggleChordType:e=>t(n=>{const r=new Set(n.enabledChordTypes);return r.has(e)?r.delete(e):r.add(e),{enabledChordTypes:r}}),toggleScale:e=>t(n=>{const r=new Set(n.enabledScales);return r.has(e)?r.delete(e):r.add(e),{enabledScales:r}}),toggleInterval:e=>t(n=>{const r=new Set(n.enabledIntervals);return r.has(e)?r.delete(e):r.add(e),{enabledIntervals:r}}),setIntervalDirection:e=>t({intervalDirection:e})}),{name:"piano-maestro-settings",storage:Qg(()=>localStorage),partialize:t=>({lowKey:t.lowKey,highKey:t.highKey,enabledChordTypes:Array.from(t.enabledChordTypes),enabledScales:Array.from(t.enabledScales),enabledIntervals:Array.from(t.enabledIntervals),intervalDirection:t.intervalDirection}),merge:(t,e)=>{const n=t;return{...e,...n,enabledChordTypes:new Set(n.enabledChordTypes||[]),enabledScales:new Set(n.enabledScales||[]),enabledIntervals:new Set(n.enabledIntervals||[])}}}));class Ht{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,n,r={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Ht.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const s=new zf(e,this,n,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,n,r={}){r.remaining=1,this.addListener(e,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?this.eventMap[Ht.ANY_EVENT]&&this.eventMap[Ht.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof zf?this.eventMap[e].filter(s=>s===n).length>0:typeof n=="function"?this.eventMap[e].filter(s=>s.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],s=this.eventMap[Ht.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...n];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(r.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),r}removeListener(e,n,r={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>n&&i.callback!==n||r.remaining&&r.remaining!==i.remaining||r.context&&r.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((r,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),r()},{remaining:1});n.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class zf{constructor(e,n,r,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Ht.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=r,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class M{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),M.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),M.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),M.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),M.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class os{constructor(e,n={}){this.duration=D.defaults.note.duration,this.attack=D.defaults.note.attack,this.release=D.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=j.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=j.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=j.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=j.getNoteDetails(e);if(D.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(D.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(D.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(D.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(D.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(D.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(D.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return j.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=j.from7bitToFloat(e)}get rawRelease(){return j.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=j.from7bitToFloat(e)}get number(){return j.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return D.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+e*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class j{static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");const s={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let i=(r.octave+1+n)*12;if(i+=s[r.name],r.accidental&&(r.accidental.startsWith("b")?i-=r.accidental.length:i+=r.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),s=parseInt(n[3]);let i=n[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:r+(i||"")+s,name:r,octave:s}}static sanitizeChannels(e){let n;if(D.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return Array.isArray(e)?n=e:n=[e],n.indexOf("all")>-1&&(n=M.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let n=!1;const r=parseFloat(e);return isNaN(r)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?r>=0&&(n=D.time+r):r>=0&&(n=r),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if(typeof e=="string"||e instanceof String)try{r=this.toNoteNumber(e.trim(),n)}catch{return!1}return r}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+n;return r[e%12]+s.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof os)return e;let r=this.guessNoteNumber(e,n.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new os(r,n)}static buildNoteArray(e,n={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{r.push(this.buildNote(s,n))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,n=0){D.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const r=((e<<7)+n)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(e){D.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(e*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(e,n=0,r=0){if(D.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(e+n*12+r,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(r=>e[r]===n)}static getCcNameByNumber(e){if(!(D.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return M.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let n=M.CONTROL_CHANGE_MESSAGES.find(r=>r.name===e);return n?n.number:M.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in M.CHANNEL_MODE_MESSAGES)if(M.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===M.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class vS extends Ht{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,r={}){if(D.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=j.fromFloatTo7Bit(n));const s=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),j.buildNoteArray(e).forEach(i=>{this.send([(M.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),n],{time:j.toTimestamp(r.time)})}),this}sendControlChange(e,n,r={}){if(typeof e=="string"&&(e=j.getCcNumberByName(e)),Array.isArray(n)||(n=[n]),D.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(s=>{const i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),n.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((s,i)=>{this.send([(M.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,n[i]],{time:j.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2?this:(this.sendControlChange(38,e[1],n),this)}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=M.REGISTERED_PARAMETERS[e]),D.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(M.REGISTERED_PARAMETERS).forEach(s=>{M.REGISTERED_PARAMETERS[s][0]===e[0]&&M.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=M.REGISTERED_PARAMETERS[e]),D.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(M.REGISTERED_PARAMETERS).forEach(s=>{M.REGISTERED_PARAMETERS[s][0]===e[0]&&M.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){this.sendNoteOn(e,n);const r=Array.isArray(e)?e:[e];for(let s of r)if(parseInt(s.duration)>0){const i={time:(j.toTimestamp(n.time)||D.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(n.duration)>0){const i={time:(j.toTimestamp(n.time)||D.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,n={}){if(D.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawRelease!=null?r=n.rawRelease:isNaN(n.release)||(r=Math.round(n.release*127));const s=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return j.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(i=>{this.send([(M.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:j.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(D.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawAttack!=null?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(n.attack*127));const s=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return j.buildNoteArray(e,{rawAttack:r}).forEach(i=>{this.send([(M.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:j.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,r={}){if(typeof e=="string"&&(e=M.CHANNEL_MODE_MESSAGES[e]),D.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(M.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:j.toTimestamp(r.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(D.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(e=j.fromFloatTo7Bit(e)),this.send([(M.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:j.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,D.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[i,o],n),this}sendModulationRange(e,n,r={}){if(D.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],r),this}sendNrpnValue(e,n,r={}){if(n=[].concat(n),D.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,n={}){if(D.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,s=0;if(n.rawValue&&Array.isArray(e))r=e[0],s=e[1];else if(n.rawValue&&!Array.isArray(e))r=e;else{const i=j.fromFloatToMsbLsb((e+1)/2);r=i.msb,s=i.lsb}return this.send([(M.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,r],{time:j.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,r={}){if(D.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],r),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,D.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(M.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:j.toTimestamp(n.time)}),this}sendRpnValue(e,n,r={}){if(Array.isArray(e)||(e=M.REGISTERED_PARAMETERS[e]),D.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,n={}){if(D.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(D.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class du extends Ht{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new vS(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:D.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},r=0){if(e instanceof Jg&&(e=j.isNode?e.data:e.rawData),e instanceof Uint8Array&&j.isNode&&(e=Array.from(e)),D.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,j.toTimestamp(n.time)),this}sendSysex(e,n=[],r={}){if(e=[].concat(e),n instanceof Uint8Array){const s=new Uint8Array(1+e.length+n.length+1);s[0]=M.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(n,1+e.length),s[s.length-1]=M.SYSTEM_MESSAGES.sysexend,this.send(s,{time:r.time})}else{const s=e.concat(n,M.SYSTEM_MESSAGES.sysexend);this.send([M.SYSTEM_MESSAGES.sysex].concat(s),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():D.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(D.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([M.SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){e=Math.floor(e)||0;var r=e>>7&127,s=e&127;return this.send([M.SYSTEM_MESSAGES.songposition,r,s],{time:n.time}),this}sendSongSelect(e=0,n={}){if(D.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([M.SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([M.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([M.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([M.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([M.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([M.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([M.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([M.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return D.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,r={}){return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,n,r)}),this}sendControlChange(e,n,r={},s={}){if(D.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendControlChange(e,n,r)}),this}sendPitchBendRange(e=0,n=0,r={}){return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,n,r)}),this}setPitchBendRange(e=0,n=0,r="all",s={}){return D.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,s)}sendRpnValue(e,n,r={}){return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendRpnValue(e,n,r)}),this}setRegisteredParameter(e,n=[],r="all",s={}){return D.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,s)}sendChannelAftertouch(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendProgramChange(e,n)}),this}sendModulationRange(e,n,r={}){return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendModulationRange(e,n,r)}),this}setModulationRange(e=0,n=0,r="all",s={}){return D.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,s)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},r={}){return D.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",r={}){return D.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",r={}){return D.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,n=0,r={},s={}){if(D.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendChannelMode(e,n,r)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(D.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=n,e.channels=r,e.channels==="all"&&(e.channels=M.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,r={}){return r.channels==null&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,n,r)}),this}setNonRegisteredParameter(e,n=[],r="all",s={}){return D.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,s)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",r={}){return D.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",r={}){return D.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=M.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},r={}){if(D.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].playNote(e,n)}),this}sendNoteOn(e,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=M.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Uf{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(M.SYSTEM_MESSAGES),...Object.keys(M.CHANNEL_MESSAGES)],this.channels=M.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),D.validation&&(e.forEach(r=>{if(!(r instanceof du))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(r=>{if(!M.SYSTEM_MESSAGES.hasOwnProperty(r)&&!M.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(r=>{if(!M.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{D.validation&&!(n instanceof du)||n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class yS extends Ht{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const r=e.message.dataBytes[0],s=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&s===0)this.notesState[r]=!1,n.type="noteoff",n.note=new os(j.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset),{rawAttack:0,rawRelease:s}),n.value=j.from7bitToFloat(s),n.rawValue=s,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[r]=!0,n.note=new os(j.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset),{rawAttack:s}),n.value=j.from7bitToFloat(s),n.rawValue=s,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new os(j.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset)),n.value=j.from7bitToFloat(s),n.rawValue=s,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if(n.type==="controlchange"){n.controller={number:r,name:M.CONTROL_CHANGE_MESSAGES[r].name,description:M.CONTROL_CHANGE_MESSAGES[r].description,position:M.CONTROL_CHANGE_MESSAGES[r].position},n.subtype=n.controller.name||"controller"+r,n.value=j.from7bitToFloat(s),n.rawValue=s;const i=Object.assign({},n);i.type=`${n.type}-controller${r}`,delete i.subtype,this.emit(i.type,i);const o=Object.assign({},n);o.type=`${n.type}-`+M.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=r,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=j.from7bitToFloat(r),n.rawValue=r):n.type==="pitchbend"?(n.value=((s<<7)+r-8192)/8192,n.rawValue=(s<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],r=e.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[e.message]:r!==127&&(this._rpnBuffer=[e.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,n,r,s){e=e==="nrpn"?"nrpn":"rpn";const i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:n,parameterLsb:r,value:j.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(M.REGISTERED_PARAMETERS).find(l=>M.REGISTERED_PARAMETERS[l][0]===n&&M.REGISTERED_PARAMETERS[l][1]===r):i.parameter=(n<<7)+r;const o=M.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);const a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return D.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),j.getChannelModeByNumber(e)}getCcNameByNumber(e){if(D.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return j.getCcNameByNumber(e)}getNoteState(e){e instanceof os&&(e=e.identifier);const n=j.guessNoteNumber(e,D.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Jg{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=j.getPropertyByValue(M.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=j.getPropertyByValue(M.SYSTEM_MESSAGES,this.command)),this.statusByte===M.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class _S extends Ht{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new yS(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:D.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new Jg(e.data),r={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(s=>s.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){D.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,r={}){if(D.validation&&typeof r=="function"){let s=n!=null?[].concat(n):void 0;n=r,r={channels:s}}if(M.CHANNEL_EVENTS.includes(e)){r.channels===void 0&&(r.channels=M.MIDI_CHANNEL_NUMBERS);let s=[];return j.sanitizeChannels(r.channels).forEach(i=>{s.push(this.channels[i].addListener(e,n,r))}),s}else return super.addListener(e,n,r)}addOneTimeListener(e,n,r={}){return r.remaining=1,this.addListener(e,n,r)}on(e,n,r,s){return this.addListener(e,n,r,s)}hasListener(e,n,r={}){if(D.validation&&typeof r=="function"){let s=[].concat(n);n=r,r={channels:s}}return M.CHANNEL_EVENTS.includes(e)?(r.channels===void 0&&(r.channels=M.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(r.channels).every(s=>this.channels[s].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,r={}){if(D.validation&&typeof r=="function"){let s=[].concat(n);n=r,r={channels:s}}if(r.channels===void 0&&(r.channels=M.MIDI_CHANNEL_NUMBERS),e==null)return j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();M.CHANNEL_EVENTS.includes(e)?j.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].removeListener(e,n,r)}):super.removeListener(e,n,r)}addForwarder(e,n={}){let r;return e instanceof Uf?r=e:r=new Uf(e,n),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return D.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class wS extends Ht{constructor(){super(),this.defaults={note:{attack:j.from7bitToFloat(64),release:j.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},n=!1){if(j.isNode){try{window.navigator}catch{let a=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,a)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:n}),n&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===e.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===e.toString())return this.inputs[r]}getInputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(e))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(e))return this.inputs[r]}getOutputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(e))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(e))return this.outputs[r]}getOutputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===e.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===e.toString())return this.outputs[r]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),j.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?j.getNoteDetails(j.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),j.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),j.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),j.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),j.buildNoteArray(e,n)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),j.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(n=>e.push(n.destroy())),this.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let n={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?n.port=this.getOutputById(e.port.id):e.port.type==="input"&&(n.port=this.getInputById(e.port.id)),this.emit(e.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?n.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(n.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const r=this._inputs[n];Array.from(this.interface.inputs.values()).find(i=>i===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(n,1))}let e=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(r=>r._midiInput===n)){let r=this._disconnectedInputs.find(s=>s._midiInput===n);r||(r=new _S(n)),this._inputs.push(r),e.push(r.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const r=this._outputs[n];Array.from(this.interface.outputs.values()).find(i=>i===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(n,1))}let e=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(r=>r._midiOutput===n)){let r=this._disconnectedOutputs.find(s=>s._midiOutput===n);r||(r=new du(n)),this._outputs.push(r),e.push(r.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),j.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),j.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.11"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),M.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),M.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),M.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),M.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),M.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const D=new wS;D.constructor=null;const al=S.createContext(null),SS=({children:t})=>{const[e,n]=S.useState([]),[r,s]=S.useState(!1);return S.useEffect(()=>((async()=>{try{await D.enable(),console.log("WebMidi enabled!");const o=()=>{n(D.inputs),s(D.inputs.length>0)};o(),D.addListener("connected",o),D.addListener("disconnected",o)}catch(o){console.error("WebMidi could not be enabled.",o),s(!1)}})(),()=>{D.disable()}),[]),C.jsx(al.Provider,{value:{inputs:e,isMIDIDeviceConnected:r},children:t})},Dr=()=>{const t=S.useContext(al),[e,n]=S.useState([]),[r,s]=S.useState(!0);return S.useEffect(()=>{if(!t)return;const i=a=>{n(l=>{const c=[...l,a.note.number];return s(!1),c})},o=a=>{n(l=>{const c=l.filter(u=>u!==a.note.number);return c.length===0&&s(!0),c})};return t.inputs.forEach(a=>{a.addListener("noteon",i),a.addListener("noteoff",o)}),()=>{t.inputs.forEach(a=>{a.removeListener("noteon",i),a.removeListener("noteoff",o)})}},[t]),{pressedNotes:e,allKeysReleased:r,isMIDIDeviceConnected:(t==null?void 0:t.isMIDIDeviceConnected)??!1}},CS=()=>{const t=S.useContext(al);return{onMIDIMessage:S.useCallback(n=>{if(!t)return()=>{};const r=s=>{n(s)};return t.inputs.forEach(s=>{s.addListener("noteon",r),s.addListener("noteoff",r)}),()=>{t.inputs.forEach(s=>{s.removeListener("noteon",r),s.removeListener("noteoff",r)})}},[t]),isMIDIDeviceConnected:(t==null?void 0:t.isMIDIDeviceConnected)??!1}},ev=t=>{const e=S.useContext(al);S.useEffect(()=>{if(!e)return;const n=r=>{t(r.note.number)};return e.inputs.forEach(r=>{r.addListener("noteon",n)}),()=>{e.inputs.forEach(r=>{r.removeListener("noteon",n)})}},[t,e])},tv=S.createContext(void 0),ES=({children:t})=>{const{lowKey:e,highKey:n,setLowKey:r,setHighKey:s,enabledChordTypes:i,toggleChordType:o,enabledScales:a,toggleScale:l,enabledIntervals:c,toggleInterval:u,intervalDirection:d,setIntervalDirection:h}=gS(),[g,p]=S.useState(!1),[m,y]=S.useState(!1),{pressedNotes:f}=Dr(),v=S.useCallback(b=>{b!==e&&r(b)},[e,r]),_=S.useCallback(b=>{b!==n&&s(b)},[n,s]);S.useEffect(()=>{if(f.length===0)return;const b=f[0];g?(b>n?(v(n),_(b)):v(b),p(!1)):m&&(b<e?(_(e),v(b)):_(b),y(!1))},[f,g,m,e,n,v,_]);const E=()=>{p(!0),y(!1)},w=()=>{y(!0),p(!1)},N=()=>{p(!1),y(!1)};return C.jsx(tv.Provider,{value:{lowKey:e,highKey:n,setLowKey:v,setHighKey:_,isSettingLowKey:g,isSettingHighKey:m,startSetLowKey:E,startSetHighKey:w,cancelSetKey:N,enabledChordTypes:i,toggleChordType:o,enabledScales:a,toggleScale:l,enabledIntervals:c,toggleInterval:u,intervalDirection:d,setIntervalDirection:h},children:t})},nv="15.0.4",Wf=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Gf=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),hu=(t,e)=>({startTime:e,type:"setValue",value:t}),rv=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),sv=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),as=t=>t.type==="exponentialRampToValue",Ta=t=>t.type==="linearRampToValue",Bn=t=>as(t)||Ta(t),kd=t=>t.type==="setValue",gn=t=>t.type==="setValueCurve",ka=(t,e,n,r)=>{const s=t[e];return s===void 0?r:Bn(s)||kd(s)?s.value:gn(s)?s.values[s.values.length-1]:sv(n,ka(t,e-1,s.startTime,r),s)},$f=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:Bn(n)?[n.endTime,n.value]:kd(n)?[n.startTime,n.value]:gn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,ka(t,e-1,n.startTime,s)],fu=t=>t.type==="cancelAndHold",pu=t=>t.type==="cancelScheduledValues",Pn=t=>fu(t)||pu(t)?t.cancelTime:as(t)||Ta(t)?t.endTime:t.startTime,Hf=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,qf=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),xS=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},bS=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return xS(r,s)},Ao=t=>t.type==="setTarget";class NS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Pn(e);if(fu(e)||pu(e)){const r=this._automationEvents.findIndex(i=>pu(e)&&gn(i)?i.startTime+i.duration>=n:Pn(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),fu(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&Bn(s)){if(i!==void 0&&Ao(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:gn(i)?i.startTime+i.duration:Pn(i),a=i===void 0?this._defaultValue:gn(i)?i.values[i.values.length-1]:i.value,l=as(s)?Hf(n,o,a,s):qf(n,o,a,s),c=as(s)?Wf(l,n,this._currenTime):Gf(l,n,this._currenTime);this._automationEvents.push(c)}if(i!==void 0&&Ao(i)&&this._automationEvents.push(hu(this.getValue(n),n)),i!==void 0&&gn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,u=i.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const h=c*d%1;u[d]=i.values[d-1]*(1-h)+i.values[d]*h}this._automationEvents[this._automationEvents.length-1]=rv(u,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Pn(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&gn(s)&&Pn(s)+s.duration>n)return!1;const i=as(e)?Wf(e.value,e.endTime,this._currenTime):Ta(e)?Gf(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(gn(e)&&n+e.duration>Pn(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Pn(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Ao(s)&&r.unshift(hu(ka(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Pn(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Ao(i)&&(r===void 0||!Bn(r)||r.insertTime>e))return sv(e,ka(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&kd(i)&&(r===void 0||!Bn(r)))return i.value;if(i!==void 0&&gn(i)&&(r===void 0||!Bn(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?bS(e,i):i.values[i.values.length-1];if(i!==void 0&&Bn(i)&&(r===void 0||!Bn(r)))return i.value;if(r!==void 0&&as(r)){const[o,a]=$f(this._automationEvents,s,i,r,this._defaultValue);return Hf(e,o,a,r)}if(r!==void 0&&Ta(r)){const[o,a]=$f(this._automationEvents,s,i,r,this._defaultValue);return qf(e,o,a,r)}return this._defaultValue}}const TS=t=>({cancelTime:t,type:"cancelAndHold"}),kS=t=>({cancelTime:t,type:"cancelScheduledValues"}),AS=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),IS=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),MS=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),RS=()=>new DOMException("","AbortError"),OS=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},PS=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},DS=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},As=new WeakSet,iv=new WeakMap,Ad=new WeakMap,ov=new WeakMap,Id=new WeakMap,ll=new WeakMap,av=new WeakMap,mu=new WeakMap,gu=new WeakMap,vu=new WeakMap,lv={construct(){return lv}},LS=t=>{try{const e=new Proxy(t,lv);new e}catch{return!1}return!0},Kf=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Yf=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(Kf);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Kf)}return[n.join(";"),r]},Qf=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Xf=t=>{if(!LS(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},FS=(t,e,n,r,s,i,o,a,l,c,u,d,h)=>{let g=0;return(p,m,y={credentials:"omit"})=>{const f=u.get(p);if(f!==void 0&&f.has(m))return Promise.resolve();const v=c.get(p);if(v!==void 0){const w=v.get(m);if(w!==void 0)return w}const _=i(p),E=_.audioWorklet===void 0?s(m).then(([w,N])=>{const[b,x]=Yf(w,N),A=`${b};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${x}
})})(window,'_AWGS')`;return n(A)}).then(()=>{const w=h._AWGS.pop();if(w===void 0)throw new SyntaxError;r(_.currentTime,_.sampleRate,()=>w(class{},void 0,(N,b)=>{if(N.trim()==="")throw e();const x=gu.get(_);if(x!==void 0){if(x.has(N))throw e();Xf(b),Qf(b.parameterDescriptors),x.set(N,b)}else Xf(b),Qf(b.parameterDescriptors),gu.set(_,new Map([[N,b]]))},_.sampleRate,void 0,void 0))}):Promise.all([s(m),Promise.resolve(t(d,d))]).then(([[w,N],b])=>{const x=g+1;g=x;const[A,T]=Yf(w,N),B=`${A};((AudioWorkletProcessor,registerProcessor)=>{${T}
})(${b?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${b?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${b?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${x}',class extends AudioWorkletProcessor{process(){return !1}})`,$=new Blob([B],{type:"application/javascript; charset=utf-8"}),F=URL.createObjectURL($);return _.audioWorklet.addModule(F,y).then(()=>{if(a(_))return _;const U=o(_);return U.audioWorklet.addModule(F,y).then(()=>U)}).then(U=>{if(l===null)throw new SyntaxError;try{new l(U,`__sac${x}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(F))});return v===void 0?c.set(p,new Map([[m,E]])):v.set(m,E),E.then(()=>{const w=u.get(p);w===void 0?u.set(p,new Set([m])):w.add(m)}).finally(()=>{const w=c.get(p);w!==void 0&&w.delete(m)}),E}},Zt=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},cl=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},cv=(t,e,n,r)=>{const s=Zt(t,e),i=cl(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},Zi=t=>Zt(av,t),Is=t=>{if(As.has(t))throw new Error("The AudioNode is already stored.");As.add(t),Zi(t).forEach(e=>e(!0))},uv=t=>"port"in t,Ji=t=>{if(!As.has(t))throw new Error("The AudioNode is not stored.");As.delete(t),Zi(t).forEach(e=>e(!1))},yu=(t,e)=>{!uv(t)&&e.every(n=>n.size===0)&&Ji(t)},jS=(t,e,n,r,s,i,o,a,l,c,u,d,h)=>{const g=new WeakMap;return(p,m,y,f,v)=>{const{activeInputs:_,passiveInputs:E}=i(m),{outputs:w}=i(p),N=a(p),b=x=>{const A=l(m),T=l(p);if(x){const I=cv(E,p,y,f);t(_,p,I,!1),!v&&!d(p)&&n(T,A,y,f),h(m)&&Is(m)}else{const I=r(_,p,y,f);e(E,f,I,!1),!v&&!d(p)&&s(T,A,y,f);const k=o(m);if(k===0)u(m)&&yu(m,_);else{const V=g.get(m);V!==void 0&&clearTimeout(V),g.set(m,setTimeout(()=>{u(m)&&yu(m,_)},k*1e3))}}};return c(w,[m,y,f],x=>x[0]===m&&x[1]===y&&x[2]===f,!0)?(N.add(b),u(p)?t(_,p,[y,f,b],!0):e(E,f,[p,y,b],!0),!0):!1}},VS=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],l=>l[0]===s&&l[1]===n,o)},BS=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},zS=t=>(e,n)=>{t(e).add(n)},US={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},WS=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),u={...US,...l},d=r(c,u),h=i(c)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},rt=(t,e)=>t.context===e,GS=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!rt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Aa=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},dn=()=>new DOMException("","IndexSizeError"),Md=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?dn():r}})(t.getChannelData)},$S={numberOfChannels:1},HS=(t,e,n,r,s,i,o,a)=>{let l=null;return class dv{constructor(u){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:g}={...$S,...u};l===null&&(l=new s(1,1,44100));const p=r!==null&&e(i,i)?new r({length:d,numberOfChannels:h,sampleRate:g}):l.createBuffer(h,d,g);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),Md(p)):e(Aa,()=>Aa(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===dv.prototype||t.has(u)}}},pt=-34028234663852886e22,ot=-pt,Sn=t=>As.has(t),qS={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},KS=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,u){const d=i(c),h={...qS,...u},g=s(d,h),p=o(d),m=p?e():null;super(c,!1,g,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=g,this._onended=null,this._playbackRate=n(this,p,g.playbackRate,ot,pt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){Is(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),Sn(this)&&Ji(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},YS=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=n(c);const h=rt(d,u);if(!h){const g={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,g),o!==null&&d.start(...o),a!==null&&d.stop(a)}return i.set(u,d),h?await t(u,c.playbackRate,d.playbackRate):await r(u,c.playbackRate,d.playbackRate),await s(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},QS=t=>"playbackRate"in t,XS=t=>"frequency"in t&&"gain"in t,ZS=t=>"offset"in t,JS=t=>!("frequency"in t)&&"gain"in t,eC=t=>"detune"in t&&"frequency"in t&&!("gain"in t),tC=t=>"pan"in t,lt=t=>Zt(iv,t),eo=t=>Zt(ov,t),_u=(t,e)=>{const{activeInputs:n}=lt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||_u(i,[...e,t])}));const r=QS(t)?[t.playbackRate]:uv(t)?Array.from(t.parameters.values()):XS(t)?[t.Q,t.detune,t.frequency,t.gain]:ZS(t)?[t.offset]:JS(t)?[t.gain]:eC(t)?[t.detune,t.frequency]:tC(t)?[t.pan]:[];for(const s of r){const i=eo(s);i!==void 0&&i.activeInputs.forEach(([o])=>_u(o,e))}Sn(t)&&Ji(t)},hv=t=>{_u(t.destination,[])},nC=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),rC=(t,e,n,r,s,i,o,a,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!nC(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:g}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/g:h==="interactive"||h===void 0?256/g:h==="playback"?1024/g:Math.max(2,Math.min(128,Math.round(h*g/128)))*128/g,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),hv(this)}))}createMediaElementSource(u){return new s(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},sC=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,u){const d=i(c),h=o(d),g=s(d,u,h),p=h?e(a):null;super(c,!1,g,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=g}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},iC=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},oC=(t,e,n,r,s,i,o,a)=>(l,c)=>{const u=c.listener,d=()=>{const w=new Float32Array(1),N=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),b=o(c);let x=!1,A=[0,0,-1,0,1,0],T=[0,0,0];const I=()=>{if(x)return;x=!0;const $=r(c,256,9,0);$.onaudioprocess=({inputBuffer:F})=>{const U=[i(F,w,0),i(F,w,1),i(F,w,2),i(F,w,3),i(F,w,4),i(F,w,5)];U.some((O,L)=>O!==A[L])&&(u.setOrientation(...U),A=U);const R=[i(F,w,6),i(F,w,7),i(F,w,8)];R.some((O,L)=>O!==T[L])&&(u.setPosition(...R),T=R)},N.connect($)},k=$=>F=>{F!==A[$]&&(A[$]=F,u.setOrientation(...A))},V=$=>F=>{F!==T[$]&&(T[$]=F,u.setPosition(...T))},B=($,F,U)=>{const R=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:F});R.connect(N,0,$),R.start(),Object.defineProperty(R.offset,"defaultValue",{get(){return F}});const O=t({context:l},b,R.offset,ot,pt);return a(O,"value",L=>()=>L.call(O),L=>z=>{try{L.call(O,z)}catch(q){if(q.code!==9)throw q}I(),b&&U(z)}),O.cancelAndHoldAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.linearRampToValueAtTime),O.setTargetAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.setTargetAtTime),O.setValueAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.setValueAtTime),O.setValueCurveAtTime=(L=>b?()=>{throw s()}:(...z)=>{const q=L.apply(O,z);return I(),q})(O.setValueCurveAtTime),O};return{forwardX:B(0,0,k(0)),forwardY:B(1,0,k(1)),forwardZ:B(2,-1,k(2)),positionX:B(6,0,V(0)),positionY:B(7,0,V(1)),positionZ:B(8,0,V(2)),upX:B(3,0,k(3)),upY:B(4,1,k(4)),upZ:B(5,0,k(5))}},{forwardX:h,forwardY:g,forwardZ:p,positionX:m,positionY:y,positionZ:f,upX:v,upY:_,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return g},get forwardZ(){return p},get positionX(){return m},get positionY(){return y},get positionZ(){return f},get upX(){return v},get upY(){return _},get upZ(){return E}}},Ia=t=>"context"in t,to=t=>Ia(t[0]),Lr=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Zf=(t,e,[n,r],s)=>{Lr(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},Jf=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):Lr(i,[n,r],o=>o[0]===n,s)},zs=t=>"inputs"in t,Ma=(t,e,n,r)=>{if(zs(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},fv=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},aC=(t,e,n)=>cl(t,r=>r[0]===e&&r[1]===n),pv=(t,e)=>{if(!Zi(t).delete(e))throw new Error("Missing the expected event listener.")},mv=(t,e,n)=>{const r=Zt(t,e),s=cl(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},Ra=(t,e,n,r)=>{zs(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},me=t=>Zt(Ad,t),Wi=t=>Zt(Id,t),Ar=t=>mu.has(t),Xo=t=>!As.has(t),ep=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),ac=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},Oa=t=>"context"in t,lC=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=Oa(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(l=>l.input!==i||l.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==s&&(l.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{Oa(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},cC=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=eo(e),{outputs:o}=lt(t),a=Zi(t),l=c=>{const u=me(t),d=Wi(e);if(c){const h=mv(i,t,n);Zf(s,t,h,!1),!r&&!Ar(t)&&u.connect(d,n)}else{const h=aC(s,t,n);Jf(i,h,!1),!r&&!Ar(t)&&u.disconnect(d,n)}};return Lr(o,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),Sn(t)?Zf(s,t,[n,l],!0):Jf(i,[t,n,l],!0),!0):!1},uC=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=lt(e),o=fv(s[r],t,n);return o===null?[cv(i,t,n,r)[2],!1]:[o[2],!0]},dC=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=eo(e),i=fv(r,t,n);return i===null?[mv(s,t,n)[1],!1]:[i[2],!0]},Rd=(t,e,n,r,s)=>{const[i,o]=uC(t,n,r,s);if(i!==null&&(pv(t,i),o&&!e&&!Ar(t)&&Ra(me(t),me(n),r,s)),Sn(n)){const{activeInputs:a}=lt(n);yu(n,a)}},Od=(t,e,n,r)=>{const[s,i]=dC(t,n,r);s!==null&&(pv(t,s),i&&!e&&!Ar(t)&&me(t).disconnect(Wi(n),r))},hC=(t,e)=>{const n=lt(t),r=[];for(const s of n.outputs)to(s)?Rd(t,e,...s):Od(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},fC=(t,e,n)=>{const r=lt(t),s=[];for(const i of r.outputs)i[1]===n&&(to(i)?Rd(t,e,...i):Od(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},pC=(t,e,n,r,s)=>{const i=lt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(to(o)?Rd(t,e,...o):Od(t,e,...o),i.outputs.delete(o),o[0]))},mC=(t,e,n,r,s,i,o,a,l,c,u,d,h,g,p,m)=>class extends c{constructor(f,v,_,E){super(_),this._context=f,this._nativeAudioNode=_;const w=u(f);d(w)&&n(ep,()=>ep(w,m))!==!0&&lC(_),Ad.set(this,_),av.set(this,new Set),f.state!=="closed"&&v&&Is(this),t(this,E,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(f){this._nativeAudioNode.channelCount=f}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(f){this._nativeAudioNode.channelCountMode=f}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(f){this._nativeAudioNode.channelInterpretation=f}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(f,v=0,_=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw s();const E=u(this._context),w=p(E);if(h(f)||g(f))throw i();if(Ia(f)){const x=me(f);try{const T=Ma(this._nativeAudioNode,x,v,_),I=Xo(this);(w||I)&&this._nativeAudioNode.disconnect(...T),this.context.state!=="closed"&&!I&&Xo(f)&&Is(f)}catch(T){throw T.code===12?i():T}if(e(this,f,v,_,w)){const T=l([this],f);ac(T,r(w))}return f}const N=Wi(f);if(N.name==="playbackRate"&&N.maxValue===1024)throw o();try{this._nativeAudioNode.connect(N,v),(w||Xo(this))&&this._nativeAudioNode.disconnect(N,v)}catch(x){throw x.code===12?i():x}if(cC(this,f,v,w)){const x=l([this],f);ac(x,r(w))}}disconnect(f,v,_){let E;const w=u(this._context),N=p(w);if(f===void 0)E=hC(this,N);else if(typeof f=="number"){if(f<0||f>=this.numberOfOutputs)throw s();E=fC(this,N,f)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Ia(f)&&_!==void 0&&(_<0||_>=f.numberOfInputs))throw s();if(E=pC(this,N,f,v,_),E.length===0)throw i()}for(const b of E){const x=l([this],b);ac(x,a)}}},gC=(t,e,n,r,s,i,o,a,l,c,u,d,h)=>(g,p,m,y=null,f=null)=>{const v=m.value,_=new NS(v),E=p?r(_):null,w={get defaultValue(){return v},get maxValue(){return y===null?m.maxValue:y},get minValue(){return f===null?m.minValue:f},get value(){return m.value},set value(N){m.value=N,w.setValueAtTime(N,g.context.currentTime)},cancelAndHoldAtTime(N){if(typeof m.cancelAndHoldAtTime=="function")E===null&&_.flush(g.context.currentTime),_.add(s(N)),m.cancelAndHoldAtTime(N);else{const b=Array.from(_).pop();E===null&&_.flush(g.context.currentTime),_.add(s(N));const x=Array.from(_).pop();m.cancelScheduledValues(N),b!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?m.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?m.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&m.setValueCurveAtTime(x.values,x.startTime,x.duration))}return w},cancelScheduledValues(N){return E===null&&_.flush(g.context.currentTime),_.add(i(N)),m.cancelScheduledValues(N),w},exponentialRampToValueAtTime(N,b){if(N===0)throw new RangeError;if(!Number.isFinite(b)||b<0)throw new RangeError;const x=g.context.currentTime;return E===null&&_.flush(x),Array.from(_).length===0&&(_.add(c(v,x)),m.setValueAtTime(v,x)),_.add(o(N,b)),m.exponentialRampToValueAtTime(N,b),w},linearRampToValueAtTime(N,b){const x=g.context.currentTime;return E===null&&_.flush(x),Array.from(_).length===0&&(_.add(c(v,x)),m.setValueAtTime(v,x)),_.add(a(N,b)),m.linearRampToValueAtTime(N,b),w},setTargetAtTime(N,b,x){return E===null&&_.flush(g.context.currentTime),_.add(l(N,b,x)),m.setTargetAtTime(N,b,x),w},setValueAtTime(N,b){return E===null&&_.flush(g.context.currentTime),_.add(c(N,b)),m.setValueAtTime(N,b),w},setValueCurveAtTime(N,b,x){const A=N instanceof Float32Array?N:new Float32Array(N);if(d!==null&&d.name==="webkitAudioContext"){const T=b+x,I=g.context.sampleRate,k=Math.ceil(b*I),V=Math.floor(T*I),B=V-k,$=new Float32Array(B);for(let U=0;U<B;U+=1){const R=(A.length-1)/x*((k+U)/I-b),O=Math.floor(R),L=Math.ceil(R);$[U]=O===L?A[O]:(1-(R-O))*A[O]+(1-(L-R))*A[L]}E===null&&_.flush(g.context.currentTime),_.add(u($,b,x)),m.setValueCurveAtTime($,b,x);const F=V/I;F<T&&h(w,$[$.length-1],F),h(w,A[A.length-1],T)}else E===null&&_.flush(g.context.currentTime),_.add(u(A,b,x)),m.setValueCurveAtTime(A,b,x);return w}};return n.set(w,m),e.set(w,g),t(w,E),w},vC=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class gv{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const yC={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},_C=(t,e,n,r,s,i,o,a,l,c,u,d,h,g)=>class extends e{constructor(m,y,f){var v;const _=a(m),E=l(_),w=u({...yC,...f});h(w);const N=gu.get(_),b=N==null?void 0:N.get(y),x=E||_.state!=="closed"?_:(v=o(_))!==null&&v!==void 0?v:_,A=s(x,E?null:m.baseLatency,c,y,b,w),T=E?r(y,w,b):null;super(m,!0,A,T);const I=[];A.parameters.forEach((V,B)=>{const $=n(this,E,V);I.push([B,$])}),this._nativeAudioWorkletNode=A,this._onprocessorerror=null,this._parameters=new gv(I),E&&t(_,this);const{activeInputs:k}=i(this);d(A,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const y=typeof m=="function"?g(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=y;const f=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=f!==null&&f===y?m:f}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pa(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const vv=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Da=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},wC=(t,e)=>{const n=Zt(vu,t),r=me(e);return Zt(n,r)},SC=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=s.reduce((y,f)=>y+f,0),u=c===0?null:n.createBuffer(c,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=lt(t),h=await wC(n,t),g=Da(r.numberOfInputs,r.channelCount),p=Da(r.numberOfOutputs,s),m=Array.from(t.parameters.keys()).reduce((y,f)=>({...y,[f]:new Float32Array(128)}),{});for(let y=0;y<a;y+=128){if(r.numberOfInputs>0&&e!==null)for(let f=0;f<r.numberOfInputs;f+=1)for(let v=0;v<r.channelCount;v+=1)Pa(e,g[f],v,v,y);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:f},v)=>{Pa(e,m,f,l+v,y)});for(let f=0;f<r.numberOfInputs;f+=1)for(let v=0;v<s[f];v+=1)p[f][v].byteLength===0&&(p[f][v]=new Float32Array(128));try{const f=g.map((_,E)=>d.activeInputs[E].size===0?[]:_),v=o(y/n.sampleRate,n.sampleRate,()=>h.process(f,p,m));if(u!==null)for(let _=0,E=0;_<r.numberOfOutputs;_+=1){for(let w=0;w<s[_];w+=1)vv(u,p[_],w,E+w,y);E+=s[_]}if(!v)break}catch(f){t.dispatchEvent(new ErrorEvent("processorerror",{colno:f.colno,filename:f.filename,lineno:f.lineno,message:f.message}));break}}return u},CC=(t,e,n,r,s,i,o,a,l,c,u,d,h,g,p,m)=>(y,f,v)=>{const _=new WeakMap;let E=null;const w=async(N,b)=>{let x=u(N),A=null;const T=rt(x,b),I=Array.isArray(f.outputChannelCount)?f.outputChannelCount:Array.from(f.outputChannelCount);if(d===null){const k=I.reduce((F,U)=>F+U,0),V=s(b,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),B=[];for(let F=0;F<N.numberOfOutputs;F+=1)B.push(r(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[F]}));const $=o(b,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1});$.connect=e.bind(null,B),$.disconnect=l.bind(null,B),A=[V,B,$]}else T||(x=new d(b,y));if(_.set(b,A===null?x:A[2]),A!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=N.channelCount*N.numberOfInputs,R=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,O=U+R;E=SC(N,O===0?null:await(async()=>{const z=new h(O,Math.ceil(N.context.length/128)*128,b.sampleRate),q=[],Be=[];for(let re=0;re<f.numberOfInputs;re+=1)q.push(o(z,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1})),Be.push(s(z,{channelCount:f.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:f.channelCount}));const ke=await Promise.all(Array.from(N.parameters.values()).map(async re=>{const Me=i(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:re.value});return await g(z,re,Me.offset),Me})),X=r(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+R)});for(let re=0;re<f.numberOfInputs;re+=1){q[re].connect(Be[re]);for(let Me=0;Me<f.channelCount;Me+=1)Be[re].connect(X,Me,re*f.channelCount+Me)}for(const[re,Me]of ke.entries())Me.connect(X,0,U+re),Me.start(0);return X.connect(z.destination),await Promise.all(q.map(re=>p(N,z,re))),m(z)})(),b,f,I,v,c)}const k=await E,V=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[B,$,F]=A;k!==null&&(V.buffer=k,V.start(0)),V.connect(B);for(let U=0,R=0;U<N.numberOfOutputs;U+=1){const O=$[U];for(let L=0;L<I[U];L+=1)B.connect(O,R+L,L);R+=I[U]}return F}if(T)for(const[k,V]of N.parameters.entries())await t(b,V,x.parameters.get(k));else for(const[k,V]of N.parameters.entries())await g(b,V,x.parameters.get(k));return await p(N,b,x),x};return{render(N,b){a(b,N);const x=_.get(b);return x!==void 0?Promise.resolve(x):w(N,b)}}},EC=(t,e,n,r,s,i,o,a,l,c,u,d,h,g,p,m,y,f,v,_)=>class extends p{constructor(w,N){super(w,N),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(b,x)=>t(this,b,x)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(w,N,b){return new n({length:N,numberOfChannels:w,sampleRate:b})}createBufferSource(){return new r(this)}createChannelMerger(w=6){return new i(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new o(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(w,N){return new g(this,{feedback:N,feedforward:w})}createOscillator(){return new m(this)}createPanner(){return new y(this)}createPeriodicWave(w,N,b={disableNormalization:!1}){return new f(this,{...b,imag:N,real:w})}createStereoPanner(){return new v(this)}createWaveShaper(){return new _(this)}decodeAudioData(w,N,b){return c(this._nativeContext,w).then(x=>(typeof N=="function"&&N(x),x),x=>{throw typeof b=="function"&&b(x),x})}},xC={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},bC=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,u){const d=i(c),h={...xC,...u},g=s(d,h),p=o(d),m=p?n():null;super(c,!1,g,m),this._Q=e(this,p,g.Q,ot,pt),this._detune=e(this,p,g.detune,1200*Math.log2(ot),-1200*Math.log2(ot)),this._frequency=e(this,p,g.frequency,c.sampleRate/2,0),this._gain=e(this,p,g.gain,40*Math.log10(ot),pt),this._nativeBiquadFilterNode=g,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(h){throw h.code===11?r():h}if(c.length!==u.length||u.length!==d.length)throw r()}},NC=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=rt(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return i.set(l,c),u?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},TC=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},kC={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},AC=(t,e,n,r,s)=>class extends t{constructor(o,a){const l=r(o),c={...kC,...a},u=n(l,c),d=s(l)?e():null;super(o,!1,u,d)}},IC=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!rt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},MC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},RC=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),u=i({...MC,...l}),d=n(c,u),h=s(c)?e():null;super(a,!1,d,h)}},OC=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!rt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},PC=t=>(e,n,r)=>t(n,e,r),DC=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return Oa(n)?i.connect(n,0,s):i.connect(n,0)},LC=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},FC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},jC=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const u=s(l),d={...FC,...c},h=r(u,d),g=i(u),p=g?n():null;super(l,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,g,h.offset,ot,pt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Is(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Sn(this)&&Ji(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},VC=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=n(c);const h=rt(d,u);if(!h){const g={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,g),o!==null&&d.start(o),a!==null&&d.stop(a)}return i.set(u,d),h?await t(u,c.offset,d.offset):await r(u,c.offset,d.offset),await s(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},BC=t=>e=>(t[0]=e,t[0]),zC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},UC=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),u={...zC,...l},d=n(c,u),g=s(c)?e():null;super(a,!1,d,g),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},WC=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!rt(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,c)}return r.set(o,a),zs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},GC=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},$C=()=>new DOMException("","DataCloneError"),tp=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},HC=(t,e,n,r,s,i,o,a,l,c,u)=>(d,h)=>{const g=o(d)?d:i(d);if(s.has(h)){const p=n();return Promise.reject(p)}try{s.add(h)}catch{}return e(l,()=>l(g))?g.decodeAudioData(h).then(p=>(tp(h).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,m)=>{const y=async()=>{try{await tp(h)}catch{}},f=v=>{m(v),y()};try{g.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(c(v),Md(v)),t.add(v),y().then(()=>p(v))},v=>{f(v===null?r():v)})}catch(v){f(v)}})},qC=(t,e,n,r,s,i,o,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=i(l.context),h=a(d);if(u===c){if(e.delete(l),!h&&o(l)){const g=r(l),{outputs:p}=n(l);for(const m of p)if(to(m)){const y=r(m[0]);t(g,y,m[1],m[2])}else{const y=s(m[0]);g.connect(y,m[1])}}}else e.set(l,u-c)},KC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},YC=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const u=s(l),d={...KC,...c},h=r(u,d),g=i(u),p=g?n(d.maxDelayTime):null;super(l,!1,h,p),this._delayTime=e(this,g,h.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},QC=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(l,c)=>{let u=n(l);const d=rt(u,c);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(c,h)}return o.set(c,u),d?await t(c,l.delayTime,u.delayTime):await r(c,l.delayTime,u.delayTime),await s(l,c,u),u};return{render(l,c){const u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},XC=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),ZC=t=>(e,n)=>{t(e).delete(n)},JC=t=>"delayTime"in t,eE=(t,e,n)=>function r(s,i){const o=Ia(i)?i:n(t,i);if(JC(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...s,o],l[0])).reduce((l,c)=>l.concat(c),[])},Io=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},tE=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Io(t,e,n).disconnect():Oa(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?Io(t,e,r).disconnect(n,0):Io(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):Io(t,e,r).disconnect(n,0),nE={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},rE=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,u){const d=i(c),h={...nE,...u},g=r(d,h),p=o(d),m=p?n():null;super(c,!1,g,m),this._attack=e(this,p,g.attack),this._knee=e(this,p,g.knee),this._nativeDynamicsCompressorNode=g,this._ratio=e(this,p,g.ratio),this._release=e(this,p,g.release),this._threshold=e(this,p,g.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},sE=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=rt(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return i.set(l,c),u?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},iE=()=>new DOMException("","EncodingError"),oE=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(u,d,h,g,p)=>{if(d===a||d===t.location.href&&h===1&&g===1)return c(),r(p),!1;if(l!==null)return l(u,d,h,g,p)},i.onerror=()=>{c(),r(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",s.appendChild(i)}}),aE=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},lE=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},cE=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},uE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},dE=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),u={...uE,...l},d=r(c,u),h=i(c),g=h?n():null;super(a,!1,d,g),this._gain=e(this,h,d.gain,ot,pt)}get gain(){return this._gain}},hE=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=rt(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return i.set(l,c),u?await t(l,a.gain,c.gain):await r(l,a.gain,c.gain),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},fE=(t,e)=>n=>e(t,n),pE=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},mE=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},gE=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},vE=t=>e=>t.get(e),We=()=>new DOMException("","InvalidStateError"),yE=t=>e=>{const n=t.get(e);if(n===void 0)throw We();return n},_E=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},wE=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},ul=()=>new DOMException("","InvalidAccessError"),SE=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw ul();return e.call(t,n,r,s)})(t.getFrequencyResponse)},CE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},EE=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),u=s(c),d={...CE,...l},h=e(c,u?null:a.baseLatency,d),g=u?n(d.feedback,d.feedforward):null;super(a,!1,h,g),SE(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},yv=(t,e,n,r,s,i,o,a,l,c,u)=>{const d=c.length;let h=a;for(let g=0;g<d;g+=1){let p=n[0]*c[g];for(let m=1;m<s;m+=1){const y=h-m&l-1;p+=n[m]*i[y],p-=t[m]*o[y]}for(let m=s;m<r;m+=1)p+=n[m]*i[h-m&l-1];for(let m=s;m<e;m+=1)p-=t[m]*o[h-m&l-1];i[h]=c[g],o[h]=p,h=h+1&l-1,u[g]=p}return h},xE=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,l=Math.min(o,a);if(s[0]!==1){for(let p=0;p<o;p+=1)i[p]/=s[0];for(let p=1;p<a;p+=1)s[p]/=s[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),g=t.numberOfChannels;for(let p=0;p<g;p+=1){const m=t.getChannelData(p),y=h.getChannelData(p);u.fill(0),d.fill(0),yv(s,o,i,a,l,u,d,0,c,m,y)}return h},bE=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(u,d)=>{let h=null,g=e(u);const p=rt(g,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(g=d.createIIRFilter(o,i)),a.set(d,h===null?g:h),h!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const y=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await r(u,y,y.destination);const f=await s(y);return xE(f,d,i,o)})()}const m=await l;return h.buffer=m,h.start(0),h}return await r(u,d,g),g};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},NE=(t,e,n,r,s,i)=>o=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!o&&i(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(to(h)){const g=r(h[0]);e(u,g,h[1],h[2])}else{const g=s(h[0]);u.disconnect(g,h[1])}}t.set(a,l)}else t.set(a,c+l)},TE=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},kE=(t,e)=>n=>t.has(n)||e(n),AE=(t,e)=>n=>t.has(n)||e(n),IE=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},ME=t=>e=>t!==null&&e instanceof t,RE=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,OE=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,PE=(t,e)=>n=>t(n)||e(n),DE=t=>e=>t!==null&&e instanceof t,LE=t=>t!==null&&t.isSecureContext,FE=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},jE={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},VE=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l={...jE,...o},c=e(a,l);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},BE=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},zE=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},UE=(t,e,n,r,s,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,ll.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Gi=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},WE=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,l=0,c=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,l,c),t(i,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),u&&r(),a;o.call(n,a,l),t(i,[a,l],d=>d[0]===a&&d[1]===l,!0),u&&r()})(n.connect),n.disconnect=(o=>(a,l,c)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const h of i)h[1]===a&&i.delete(h)}else{e(a)?o.call(n,a,l,c):o.call(n,a,l);for(const h of i)h[0]===a&&(l===void 0||h[1]===l)&&(c===void 0||h[2]===c)&&i.delete(h)}const d=i.size===0;u&&d&&s()})(n.disconnect),n},ge=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Ve=(t,e)=>{ge(t,e,"channelCount"),ge(t,e,"channelCountMode"),ge(t,e,"channelInterpretation")},np=t=>typeof t.getFloatTimeDomainData=="function",GE=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},$E=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(Ve(s,r),!(r.maxDecibels>r.minDecibels))throw e();return ge(s,r,"fftSize"),ge(s,r,"maxDecibels"),ge(s,r,"minDecibels"),ge(s,r,"smoothingTimeConstant"),t(np,()=>np(s))||GE(s),s},HE=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,be=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},qE=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw We();e.call(t,r,s,i),n=!0}})(t.start)},Pd=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Dd=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},KE=(t,e,n,r,s,i,o,a,l,c,u)=>(d,h)=>{const g=d.createBufferSource();return Ve(g,h),be(g,h,"playbackRate"),ge(g,h,"buffer"),ge(g,h,"loop"),ge(g,h,"loopEnd"),ge(g,h,"loopStart"),e(n,()=>n(d))||qE(g),e(r,()=>r(d))||l(g),e(s,()=>s(d))||c(g,d),e(i,()=>i(d))||Pd(g),e(o,()=>o(d))||u(g,d),e(a,()=>a(d))||Dd(g),t(d,g),g},YE=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,QE=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(c){if(l>i.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},XE=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,ZE=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},JE=(t,e,n,r,s)=>(i,o,a,l,c,u)=>{if(a!==null)try{const d=new a(i,l,u),h=new Map;let g=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>g,set:p=>{typeof g=="function"&&d.removeEventListener("processorerror",g),g=typeof p=="function"?p:null,typeof g=="function"&&d.addEventListener("processorerror",g)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(y!==null){const f=h.get(m[1]);f!==void 0?m[1]=f:(m[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),y(v)):y(new ErrorEvent(m[0],{...v}))},h.set(y,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=h.get(m[1]);y!==void 0&&(h.delete(m[1]),m[1]=y)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(i.destination),s(d,()=>p.disconnect(),()=>p.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(c===void 0)throw r();return ZE(u),e(i,o,c,u)},_v=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),ex=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),tx=async(t,e)=>{const n=await ex(e);return new t(n)},nx=(t,e,n,r)=>{let s=vu.get(t);s===void 0&&(s=new WeakMap,vu.set(t,s));const i=tx(n,r);return s.set(e,i),i},rx=(t,e,n,r,s,i,o,a,l,c,u,d,h)=>(g,p,m,y)=>{if(y.numberOfInputs===0&&y.numberOfOutputs===0)throw l();const f=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(f.some(W=>W<1))throw l();if(f.length!==y.numberOfOutputs)throw e();if(y.channelCountMode!=="explicit")throw l();const v=y.channelCount*y.numberOfInputs,_=f.reduce((W,K)=>W+K,0),E=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(v+E>6||_>6)throw l();const w=new MessageChannel,N=[],b=[];for(let W=0;W<y.numberOfInputs;W+=1)N.push(o(g,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),b.push(s(g,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const x=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:W,maxValue:K,minValue:Le,name:ye}of m.parameterDescriptors){const se=i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:y.parameterData[ye]!==void 0?y.parameterData[ye]:W===void 0?0:W});Object.defineProperties(se.offset,{defaultValue:{get:()=>W===void 0?0:W},maxValue:{get:()=>K===void 0?ot:K},minValue:{get:()=>Le===void 0?pt:Le}}),x.push(se)}const A=r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),T=_v(p,g.sampleRate),I=a(g,T,v+E,Math.max(1,_)),k=s(g,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),V=[];for(let W=0;W<y.numberOfOutputs;W+=1)V.push(r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:f[W]}));for(let W=0;W<y.numberOfInputs;W+=1){N[W].connect(b[W]);for(let K=0;K<y.channelCount;K+=1)b[W].connect(A,K,W*y.channelCount+K)}const B=new gv(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:W},K)=>{const Le=x[K];return Le.connect(A,0,v+K),Le.start(0),[W,Le.offset]}));A.connect(I);let $=y.channelInterpretation,F=null;const U=y.numberOfOutputs===0?[I]:V,R={get bufferSize(){return T},get channelCount(){return y.channelCount},set channelCount(W){throw n()},get channelCountMode(){return y.channelCountMode},set channelCountMode(W){throw n()},get channelInterpretation(){return $},set channelInterpretation(W){for(const K of N)K.channelInterpretation=W;$=W},get context(){return I.context},get inputs(){return N},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return F},set onprocessorerror(W){typeof F=="function"&&R.removeEventListener("processorerror",F),F=typeof W=="function"?W:null,typeof F=="function"&&R.addEventListener("processorerror",F)},get parameters(){return B},get port(){return w.port2},addEventListener(...W){return I.addEventListener(W[0],W[1],W[2])},connect:t.bind(null,U),disconnect:c.bind(null,U),dispatchEvent(...W){return I.dispatchEvent(W[0])},removeEventListener(...W){return I.removeEventListener(W[0],W[1],W[2])}},O=new Map;w.port1.addEventListener=(W=>(...K)=>{if(K[0]==="message"){const Le=typeof K[1]=="function"?K[1]:typeof K[1]=="object"&&K[1]!==null&&typeof K[1].handleEvent=="function"?K[1].handleEvent:null;if(Le!==null){const ye=O.get(K[1]);ye!==void 0?K[1]=ye:(K[1]=se=>{u(g.currentTime,g.sampleRate,()=>Le(se))},O.set(Le,K[1]))}}return W.call(w.port1,K[0],K[1],K[2])})(w.port1.addEventListener),w.port1.removeEventListener=(W=>(...K)=>{if(K[0]==="message"){const Le=O.get(K[1]);Le!==void 0&&(O.delete(K[1]),K[1]=Le)}return W.call(w.port1,K[0],K[1],K[2])})(w.port1.removeEventListener);let L=null;Object.defineProperty(w.port1,"onmessage",{get:()=>L,set:W=>{typeof L=="function"&&w.port1.removeEventListener("message",L),L=typeof W=="function"?W:null,typeof L=="function"&&(w.port1.addEventListener("message",L),w.port1.start())}}),m.prototype.port=w.port1;let z=null;nx(g,R,m,y).then(W=>z=W);const Be=Da(y.numberOfInputs,y.channelCount),ke=Da(y.numberOfOutputs,f),X=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((W,{name:K})=>({...W,[K]:new Float32Array(128)}),{});let re=!0;const Me=()=>{y.numberOfOutputs>0&&I.disconnect(k);for(let W=0,K=0;W<y.numberOfOutputs;W+=1){const Le=V[W];for(let ye=0;ye<f[W];ye+=1)k.disconnect(Le,K+ye,ye);K+=f[W]}},H=new Map;I.onaudioprocess=({inputBuffer:W,outputBuffer:K})=>{if(z!==null){const Le=d(R);for(let ye=0;ye<T;ye+=128){for(let se=0;se<y.numberOfInputs;se+=1)for(let Ee=0;Ee<y.channelCount;Ee+=1)Pa(W,Be[se],Ee,Ee,ye);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:se},Ee)=>{Pa(W,X,se,v+Ee,ye)});for(let se=0;se<y.numberOfInputs;se+=1)for(let Ee=0;Ee<f[se];Ee+=1)ke[se][Ee].byteLength===0&&(ke[se][Ee]=new Float32Array(128));try{const se=Be.map((It,Rn)=>{if(Le[Rn].size>0)return H.set(Rn,T/128),It;const Il=H.get(Rn);return Il===void 0?[]:(It.every(r_=>r_.every(s_=>s_===0))&&(Il===1?H.delete(Rn):H.set(Rn,Il-1)),It)});re=u(g.currentTime+ye/g.sampleRate,g.sampleRate,()=>z.process(se,ke,X));for(let It=0,Rn=0;It<y.numberOfOutputs;It+=1){for(let Js=0;Js<f[It];Js+=1)vv(K,ke[It],Js,Rn+Js,ye);Rn+=f[It]}}catch(se){re=!1,R.dispatchEvent(new ErrorEvent("processorerror",{colno:se.colno,filename:se.filename,lineno:se.lineno,message:se.message}))}if(!re){for(let se=0;se<y.numberOfInputs;se+=1){N[se].disconnect(b[se]);for(let Ee=0;Ee<y.channelCount;Ee+=1)b[ye].disconnect(A,Ee,se*y.channelCount+Ee)}if(m.parameterDescriptors!==void 0){const se=m.parameterDescriptors.length;for(let Ee=0;Ee<se;Ee+=1){const It=x[Ee];It.disconnect(A,0,v+Ee),It.stop()}}A.disconnect(I),I.onaudioprocess=null,hr?Me():Ur();break}}}};let hr=!1;const fr=o(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),zr=()=>I.connect(fr).connect(g.destination),Ur=()=>{I.disconnect(fr),fr.disconnect()},t_=()=>{if(re){Ur(),y.numberOfOutputs>0&&I.connect(k);for(let W=0,K=0;W<y.numberOfOutputs;W+=1){const Le=V[W];for(let ye=0;ye<f[W];ye+=1)k.connect(Le,K+ye,ye);K+=f[W]}}hr=!0},n_=()=>{re&&(zr(),Me()),hr=!1};return zr(),h(R,t_,n_)},wv=(t,e)=>{const n=t.createBiquadFilter();return Ve(n,e),be(n,e,"Q"),be(n,e,"detune"),be(n,e,"frequency"),be(n,e,"gain"),ge(n,e,"type"),n},sx=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),Ve(s,r),s},ix=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw We()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw We()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw We()}})},no=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Ve(n,e),ix(n),n},ox=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Ve(a,o),be(a,o,"offset"),e(r,()=>r(i))||Pd(a),e(s,()=>s(i))||Dd(a),t(i,a),a},Us=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),ax=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),l=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(s,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(p){c.channelCount=p},get channelCountMode(){return c.channelCountMode},set channelCountMode(p){c.channelCountMode=p},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(p){c.channelInterpretation=p},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(p){l.onended=p},addEventListener(...p){return l.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return l.dispatchEvent(p[0])},removeEventListener(...p){return l.removeEventListener(p[0],p[1],p[2])},start(p=0){l.start.call(l,p)},stop(p=0){l.stop.call(l,p)}},h=()=>l.connect(c),g=()=>l.disconnect(c);return t(s,l),r(Us(d,c),h,g)},lx=(t,e)=>(n,r)=>{const s=n.createConvolver();if(Ve(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),ge(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},Sv=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Ve(n,e),be(n,e,"delayTime"),n},cx=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Ve(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return be(r,n,"attack"),be(r,n,"knee"),be(r,n,"ratio"),be(r,n,"release"),be(r,n,"threshold"),r},St=(t,e)=>{const n=t.createGain();return Ve(n,e),be(n,e,"gain"),n},ux=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Ve(s,r),s};function dx(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function hx(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function rp(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=hx(n,e),n[0]+=t[r];return n}const fx=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=_v(i,s.sampleRate),h=c instanceof Float64Array?c:new Float64Array(c),g=u instanceof Float64Array?u:new Float64Array(u),p=h.length,m=g.length,y=Math.min(p,m);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(m===0||m>20)throw r();if(g[0]===0)throw e();if(h[0]!==1){for(let x=0;x<m;x+=1)g[x]/=h[0];for(let x=1;x<p;x+=1)h[x]/=h[0]}const f=n(s,d,o,o);f.channelCount=o,f.channelCountMode=a,f.channelInterpretation=l;const v=32,_=[],E=[],w=[];for(let x=0;x<o;x+=1){_.push(0);const A=new Float32Array(v),T=new Float32Array(v);A.fill(0),T.fill(0),E.push(A),w.push(T)}f.onaudioprocess=x=>{const A=x.inputBuffer,T=x.outputBuffer,I=A.numberOfChannels;for(let k=0;k<I;k+=1){const V=A.getChannelData(k),B=T.getChannelData(k);_[k]=yv(h,p,g,m,y,E[k],w[k],_[k],v,V,B)}};const N=s.sampleRate/2;return Us({get bufferSize(){return d},get channelCount(){return f.channelCount},set channelCount(x){f.channelCount=x},get channelCountMode(){return f.channelCountMode},set channelCountMode(x){f.channelCountMode=x},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(x){f.channelInterpretation=x},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},addEventListener(...x){return f.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return f.dispatchEvent(x[0])},getFrequencyResponse(x,A,T){if(x.length!==A.length||A.length!==T.length)throw t();const I=x.length;for(let k=0;k<I;k+=1){const V=-Math.PI*(x[k]/N),B=[Math.cos(V),Math.sin(V)],$=rp(g,B),F=rp(h,B),U=dx($,F);A[k]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),T[k]=Math.atan2(U[1],U[0])}},removeEventListener(...x){return f.removeEventListener(x[0],x[1],x[2])}},f)},px=(t,e)=>t.createMediaElementSource(e.mediaElement),mx=(t,e)=>{const n=t.createMediaStreamDestination();return Ve(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},gx=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},vx=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},yx=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,_x=(t,e,n,r,s,i)=>(o,a)=>{const l=o.createOscillator();return Ve(l,a),be(l,a,"detune"),be(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):ge(l,a,"type"),e(n,()=>n(o))||Pd(l),e(r,()=>r(o))||i(l,o),e(s,()=>s(o))||Dd(l),t(o,l),l},wx=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Ve(r,n),be(r,n,"orientationX"),be(r,n,"orientationY"),be(r,n,"orientationZ"),be(r,n,"positionX"),be(r,n,"positionY"),be(r,n,"positionZ"),ge(r,n,"coneInnerAngle"),ge(r,n,"coneOuterAngle"),ge(r,n,"coneOuterGain"),ge(r,n,"distanceModel"),ge(r,n,"maxDistance"),ge(r,n,"panningModel"),ge(r,n,"refDistance"),ge(r,n,"rolloffFactor"),r)},Sx=(t,e,n,r,s,i,o,a,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:g,distanceModel:p,maxDistance:m,orientationX:y,orientationY:f,orientationZ:v,panningModel:_,positionX:E,positionY:w,positionZ:N,refDistance:b,rolloffFactor:x,...A})=>{const T=u.createPanner();if(A.channelCount>2||A.channelCountMode==="max")throw o();Ve(T,A);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=n(u,{...I,channelInterpretation:"speakers",numberOfInputs:6}),V=r(u,{...A,gain:1}),B=r(u,{...I,gain:1}),$=r(u,{...I,gain:0}),F=r(u,{...I,gain:0}),U=r(u,{...I,gain:0}),R=r(u,{...I,gain:0}),O=r(u,{...I,gain:0}),L=s(u,256,6,1),z=i(u,{...I,curve:new Float32Array([1,1]),oversample:"none"});let q=[y,f,v],Be=[E,w,N];const ke=new Float32Array(1);L.onaudioprocess=({inputBuffer:H})=>{const hr=[l(H,ke,0),l(H,ke,1),l(H,ke,2)];hr.some((zr,Ur)=>zr!==q[Ur])&&(T.setOrientation(...hr),q=hr);const fr=[l(H,ke,3),l(H,ke,4),l(H,ke,5)];fr.some((zr,Ur)=>zr!==Be[Ur])&&(T.setPosition(...fr),Be=fr)},Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(H){if(H>2)throw o();V.channelCount=H,T.channelCount=H},get channelCountMode(){return T.channelCountMode},set channelCountMode(H){if(H==="max")throw o();V.channelCountMode=H,T.channelCountMode=H},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(H){V.channelInterpretation=H,T.channelInterpretation=H},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(H){T.coneInnerAngle=H},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(H){T.coneOuterAngle=H},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(H){if(H<0||H>1)throw e();T.coneOuterGain=H},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(H){T.distanceModel=H},get inputs(){return[V]},get maxDistance(){return T.maxDistance},set maxDistance(H){if(H<0)throw new RangeError;T.maxDistance=H},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return $.gain},get orientationZ(){return F.gain},get panningModel(){return T.panningModel},set panningModel(H){T.panningModel=H},get positionX(){return U.gain},get positionY(){return R.gain},get positionZ(){return O.gain},get refDistance(){return T.refDistance},set refDistance(H){if(H<0)throw new RangeError;T.refDistance=H},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(H){if(H<0)throw new RangeError;T.rolloffFactor=H},addEventListener(...H){return V.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return V.dispatchEvent(H[0])},removeEventListener(...H){return V.removeEventListener(H[0],H[1],H[2])}};d!==X.coneInnerAngle&&(X.coneInnerAngle=d),h!==X.coneOuterAngle&&(X.coneOuterAngle=h),g!==X.coneOuterGain&&(X.coneOuterGain=g),p!==X.distanceModel&&(X.distanceModel=p),m!==X.maxDistance&&(X.maxDistance=m),y!==X.orientationX.value&&(X.orientationX.value=y),f!==X.orientationY.value&&(X.orientationY.value=f),v!==X.orientationZ.value&&(X.orientationZ.value=v),_!==X.panningModel&&(X.panningModel=_),E!==X.positionX.value&&(X.positionX.value=E),w!==X.positionY.value&&(X.positionY.value=w),N!==X.positionZ.value&&(X.positionZ.value=N),b!==X.refDistance&&(X.refDistance=b),x!==X.rolloffFactor&&(X.rolloffFactor=x),(q[0]!==1||q[1]!==0||q[2]!==0)&&T.setOrientation(...q),(Be[0]!==0||Be[1]!==0||Be[2]!==0)&&T.setPosition(...Be);const re=()=>{V.connect(T),t(V,z,0,0),z.connect(B).connect(k,0,0),z.connect($).connect(k,0,1),z.connect(F).connect(k,0,2),z.connect(U).connect(k,0,3),z.connect(R).connect(k,0,4),z.connect(O).connect(k,0,5),k.connect(L).connect(u.destination)},Me=()=>{V.disconnect(T),a(V,z,0,0),z.disconnect(B),B.disconnect(k),z.disconnect($),$.disconnect(k),z.disconnect(F),F.disconnect(k),z.disconnect(U),U.disconnect(k),z.disconnect(R),R.disconnect(k),z.disconnect(O),O.disconnect(k),k.disconnect(L),L.disconnect(u.destination)};return c(Us(X,T),re,Me)},Cx=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},ro=(t,e,n,r)=>t.createScriptProcessor(e,n,r),Ex=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return Ve(i,r),be(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},xx=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(p,m,y,f)=>{const v=new Float32Array(16385),_=new Float32Array(16385);for(let A=0;A<16385;A+=1){const T=A/16384*l;v[A]=Math.cos(T),_[A]=Math.sin(T)}const E=n(p,{...c,gain:0}),w=r(p,{...u,curve:v}),N=r(p,{...u,curve:a}),b=n(p,{...c,gain:0}),x=r(p,{...u,curve:_});return{connectGraph(){m.connect(E),m.connect(N.inputs===void 0?N:N.inputs[0]),m.connect(b),N.connect(y),y.connect(w.inputs===void 0?w:w.inputs[0]),y.connect(x.inputs===void 0?x:x.inputs[0]),w.connect(E.gain),x.connect(b.gain),E.connect(f,0,0),b.connect(f,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(N.inputs===void 0?N:N.inputs[0]),m.disconnect(b),N.disconnect(y),y.disconnect(w.inputs===void 0?w:w.inputs[0]),y.disconnect(x.inputs===void 0?x:x.inputs[0]),w.disconnect(E.gain),x.disconnect(b.gain),E.disconnect(f,0,0),b.disconnect(f,0,1)}}},h=(p,m,y,f)=>{const v=new Float32Array(16385),_=new Float32Array(16385),E=new Float32Array(16385),w=new Float32Array(16385),N=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>N){const R=(U-N)/(16384-N)*l;v[U]=Math.cos(R),_[U]=Math.sin(R),E[U]=0,w[U]=1}else{const R=U/(16384-N)*l;v[U]=1,_[U]=0,E[U]=Math.cos(R),w[U]=Math.sin(R)}const b=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=n(p,{...c,gain:0}),A=r(p,{...u,curve:v}),T=n(p,{...c,gain:0}),I=r(p,{...u,curve:_}),k=r(p,{...u,curve:a}),V=n(p,{...c,gain:0}),B=r(p,{...u,curve:E}),$=n(p,{...c,gain:0}),F=r(p,{...u,curve:w});return{connectGraph(){m.connect(b),m.connect(k.inputs===void 0?k:k.inputs[0]),b.connect(x,0),b.connect(T,0),b.connect(V,1),b.connect($,1),k.connect(y),y.connect(A.inputs===void 0?A:A.inputs[0]),y.connect(I.inputs===void 0?I:I.inputs[0]),y.connect(B.inputs===void 0?B:B.inputs[0]),y.connect(F.inputs===void 0?F:F.inputs[0]),A.connect(x.gain),I.connect(T.gain),B.connect(V.gain),F.connect($.gain),x.connect(f,0,0),V.connect(f,0,0),T.connect(f,0,1),$.connect(f,0,1)},disconnectGraph(){m.disconnect(b),m.disconnect(k.inputs===void 0?k:k.inputs[0]),b.disconnect(x,0),b.disconnect(T,0),b.disconnect(V,1),b.disconnect($,1),k.disconnect(y),y.disconnect(A.inputs===void 0?A:A.inputs[0]),y.disconnect(I.inputs===void 0?I:I.inputs[0]),y.disconnect(B.inputs===void 0?B:B.inputs[0]),y.disconnect(F.inputs===void 0?F:F.inputs[0]),A.disconnect(x.gain),I.disconnect(T.gain),B.disconnect(V.gain),F.disconnect($.gain),x.disconnect(f,0,0),V.disconnect(f,0,0),T.disconnect(f,0,1),$.disconnect(f,0,1)}}},g=(p,m,y,f,v)=>{if(m===1)return d(p,y,f,v);if(m===2)return h(p,y,f,v);throw s()};return(p,{channelCount:m,channelCountMode:y,pan:f,...v})=>{if(y==="max")throw s();const _=t(p,{...v,channelCount:1,channelCountMode:y,numberOfInputs:2}),E=n(p,{...v,channelCount:m,channelCountMode:y,gain:1}),w=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:f});let{connectGraph:N,disconnectGraph:b}=g(p,m,E,w,_);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const x={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(k){E.channelCount!==k&&(A&&b(),{connectGraph:N,disconnectGraph:b}=g(p,k,E,w,_),A&&N()),E.channelCount=k},get channelCountMode(){return E.channelCountMode},set channelCountMode(k){if(k==="clamped-max"||k==="max")throw s();E.channelCountMode=k},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(k){E.channelInterpretation=k},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return w.gain},addEventListener(...k){return E.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return E.dispatchEvent(k[0])},removeEventListener(...k){return E.removeEventListener(k[0],k[1],k[2])}};let A=!1;const T=()=>{N(),A=!0},I=()=>{b(),A=!1};return i(Us(x,_),T,I)}},bx=(t,e,n,r,s,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);Ve(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();ge(c,{curve:u},"curve"),ge(c,l,"oversample");let d=null,h=!1;return o(c,"curve",m=>()=>m.call(c),m=>y=>(m.call(c,y),h&&(r(y)&&d===null?d=t(a,c):!r(y)&&d!==null&&(d(),d=null)),y)),s(c,()=>{h=!0,r(c.curve)&&(d=t(a,c))},()=>{h=!1,d!==null&&(d(),d=null)})},Nx=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...l})=>{const c=i.createWaveShaper(),u=i.createWaveShaper();Ve(c,l),Ve(u,l);const d=n(i,{...l,gain:1}),h=n(i,{...l,gain:-1}),g=n(i,{...l,gain:1}),p=n(i,{...l,gain:-1});let m=null,y=!1,f=null;const v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(w){d.channelCount=w,h.channelCount=w,c.channelCount=w,g.channelCount=w,u.channelCount=w,p.channelCount=w},get channelCountMode(){return c.channelCountMode},set channelCountMode(w){d.channelCountMode=w,h.channelCountMode=w,c.channelCountMode=w,g.channelCountMode=w,u.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,h.channelInterpretation=w,c.channelInterpretation=w,g.channelInterpretation=w,u.channelInterpretation=w,p.channelInterpretation=w},get context(){return c.context},get curve(){return f},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)c.curve=w,u.curve=w;else{const N=w.length,b=new Float32Array(N+2-N%2),x=new Float32Array(N+2-N%2);b[0]=w[0],x[0]=-w[N-1];const A=Math.ceil((N+1)/2),T=(N+1)/2-1;for(let I=1;I<A;I+=1){const k=I/A*T,V=Math.floor(k),B=Math.ceil(k);b[I]=V===B?w[V]:(1-(k-V))*w[V]+(1-(B-k))*w[B],x[I]=V===B?-w[N-1-V]:-((1-(k-V))*w[N-1-V])-(1-(B-k))*w[N-1-B]}b[A]=N%2===1?w[A-1]:(w[A-2]+w[A-1])/2,c.curve=b,u.curve=x}f=w,y&&(r(f)&&m===null?m=t(i,d):m!==null&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(w){c.oversample=w,u.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};o!==null&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a);const _=()=>{d.connect(c).connect(g),d.connect(h).connect(u).connect(p).connect(g),y=!0,r(f)&&(m=t(i,d))},E=()=>{d.disconnect(c),c.disconnect(g),d.disconnect(h),h.disconnect(u),u.disconnect(p),p.disconnect(g),y=!1,m!==null&&(m(),m=null)};return s(Us(v,g),_,E)},ht=()=>new DOMException("","NotSupportedError"),Tx={numberOfChannels:1},kx=(t,e,n,r,s)=>class extends t{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:h}={...Tx,...c},g=r(d,u,h);e(Gi,()=>Gi(g))||g.addEventListener("statechange",(()=>{let p=0;const m=y=>{this._state==="running"&&(p>0?(g.removeEventListener("statechange",m),y.stopImmediatePropagation(),this._waitForThePromiseToSettle(y)):p+=1)};return m})()),super(g,d),this._length=u,this._nativeOfflineAudioContext=g,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,hv(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Ax={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ix=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const u=s(l),d={...Ax,...c},h=n(u,d),g=i(u),p=g?r():null,m=l.sampleRate/2;super(l,!1,h,p),this._detune=e(this,g,h.detune,153600,-153600),this._frequency=e(this,g,h.frequency,m,-m),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Is(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Sn(this)&&Ji(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},Mx=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const c=async(u,d)=>{let h=n(u);const g=rt(h,d);if(!g){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:o===null?void 0:o,type:h.type};h=e(d,p),a!==null&&h.start(a),l!==null&&h.stop(l)}return i.set(d,h),g?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await s(u,d,h),h};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,d){const h=i.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},Rx={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ox=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const u=s(l),d={...Rx,...c},h=n(u,d),g=i(u),p=g?r():null;super(l,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,g,h.orientationX,ot,pt),this._orientationY=e(this,g,h.orientationY,ot,pt),this._orientationZ=e(this,g,h.orientationZ,ot,pt),this._positionX=e(this,g,h.positionX,ot,pt),this._positionY=e(this,g,h.positionY,ot,pt),this._positionZ=e(this,g,h.positionZ,ot,pt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},Px=(t,e,n,r,s,i,o,a,l,c)=>()=>{const u=new WeakMap;let d=null;const h=async(g,p)=>{let m=null,y=i(g);const f={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},v={...f,coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor},_=rt(y,p);if("bufferSize"in y)m=r(p,{...f,gain:1});else if(!_){const E={...v,orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value};y=s(p,E)}if(u.set(p,m===null?y:m),m!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new o(6,g.context.length,p.sampleRate),k=e(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(I.destination),d=(async()=>{const V=await Promise.all([g.orientationX,g.orientationY,g.orientationZ,g.positionX,g.positionY,g.positionZ].map(async(B,$)=>{const F=n(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$===0?1:0});return await a(I,B,F.offset),F}));for(let B=0;B<6;B+=1)V[B].connect(k,0,B),V[B].start(0);return c(I)})()}const E=await d,w=r(p,{...f,gain:1});await l(g,p,w);const N=[];for(let I=0;I<E.numberOfChannels;I+=1)N.push(E.getChannelData(I));let b=[N[0][0],N[1][0],N[2][0]],x=[N[3][0],N[4][0],N[5][0]],A=r(p,{...f,gain:1}),T=s(p,{...v,orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]});w.connect(A).connect(T.inputs[0]),T.connect(m);for(let I=128;I<E.length;I+=128){const k=[N[0][I],N[1][I],N[2][I]],V=[N[3][I],N[4][I],N[5][I]];if(k.some((B,$)=>B!==b[$])||V.some((B,$)=>B!==x[$])){b=k,x=V;const B=I/p.sampleRate;A.gain.setValueAtTime(0,B),A=r(p,{...f,gain:0}),T=s(p,{...v,orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]}),A.gain.setValueAtTime(1,B),w.connect(A).connect(T.inputs[0]),T.connect(m)}}return m}return _?(await t(p,g.orientationX,y.orientationX),await t(p,g.orientationY,y.orientationY),await t(p,g.orientationZ,y.orientationZ),await t(p,g.positionX,y.positionX),await t(p,g.positionY,y.positionY),await t(p,g.positionZ,y.positionZ)):(await a(p,g.orientationX,y.orientationX),await a(p,g.orientationY,y.orientationY),await a(p,g.orientationZ,y.orientationZ),await a(p,g.positionX,y.positionX),await a(p,g.positionY,y.positionY),await a(p,g.positionZ,y.positionZ)),zs(y)?await l(g,p,y.inputs[0]):await l(g,p,y),y};return{render(g,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):h(g,p)}}},Dx={disableNormalization:!1},Lx=(t,e,n,r)=>class Cv{constructor(i,o){const a=e(i),l=r({...Dx,...o}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Cv.prototype||n.has(i)}},Fx=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),jx=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const h=await e(c).render(c,s),g=r.context.destination;!n(c)&&(r!==g||!n(r))&&h.connect(i,u,l)})).reduce((a,l)=>[...a,...l],[]))},Vx=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const u=await t(a).render(a,s);n(a)||u.connect(i,l)}))},Bx=(t,e,n,r)=>s=>t(Gi,()=>Gi(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),zx=t=>(e,n)=>{t.set(e,n)},Ux=t=>(e,n)=>t.set(e,n),Wx=(t,e,n,r,s,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(u=>n(u).render(u,c)))).then(()=>s(c)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Md(u)):e(i,()=>i(u))||a(u),t.add(u),u)),Gx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},$x=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),u={...Gx,...l},d=n(c,u),h=i(c),g=h?r():null;super(a,!1,d,g),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},Hx=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=rt(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return i.set(l,c),u?await t(l,a.pan,c.pan):await r(l,a.pan,c.pan),zs(c)?await s(a,l,c.inputs[0]):await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},qx=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},Kx=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},Yx=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},Qx=()=>new DOMException("","UnknownError"),Xx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Zx=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const u=s(l),d={...Xx,...c},h=n(u,d),p=i(u)?r():null;super(l,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},Jx=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!rt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,c)}return r.set(o,a),zs(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},eb=()=>typeof window>"u"?null:window,tb=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)r[d]=c[d+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)c[d+o]=r[d]}},nb=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},rb=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},sb=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)s.connect(r,0,l)},()=>s.disconnect(r))},Ev=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),xv=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},so=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},ib=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),ob=t=>({...t,channelCount:t.numberOfOutputs}),ab=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},bv=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;bv(t,e,n+1e-7)}},lb=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},cb=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},ub=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ld=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Nv=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Fd=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},db=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},hb=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},Tv=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Us(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},Ws=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},fb=OS(Lr),pb=VS(Lr),mb=XC(cl),kv=new WeakMap,gb=mE(kv),Jt=TC(new Map,new WeakMap),un=eb(),Av=$E(Jt,dn),jd=pE(lt),Qe=jx(lt,jd,Ar),vb=GS(Av,me,Qe),ue=yE(ll),kn=yx(un),ae=DE(kn),Iv=new WeakMap,Mv=aE(Ws),io=YE(un),Vd=ME(io),Bd=RE(un),Rv=OE(un),$i=XE(un),Ie=mC(PS(iv),jS(fb,pb,Ma,mb,Ra,lt,gb,Zi,me,Lr,Sn,Ar,Xo),Jt,NE(mu,Ra,lt,me,Wi,Sn),dn,ul,ht,qC(Ma,mu,lt,me,Wi,ue,Sn,ae),eE(Iv,lt,Zt),Mv,ue,Vd,Bd,Rv,ae,$i),yb=WS(Ie,vb,dn,Av,ue,ae),zd=new WeakSet,sp=HE(un),Ov=BC(new Uint32Array(1)),Ud=tb(Ov,dn),Wd=nb(Ov),Pv=HS(zd,Jt,ht,sp,kn,qx(sp),Ud,Wd),dl=BS(St),Dv=Vx(jd,eo,Ar),hn=PC(Dv),Gs=KE(dl,Jt,lb,cb,ub,Ld,Nv,Fd,hb,rb(so),Tv),fn=Fx(gE(eo),Dv),_b=YS(hn,Gs,me,fn,Qe),en=gC(DS(ov),Iv,Id,vC,TS,kS,AS,IS,MS,hu,rv,io,bv),wb=KS(Ie,_b,en,We,Gs,ue,ae,Ws),Sb=sC(Ie,iC,dn,We,QE(St,so),ue,ae,Qe),Cb=NC(hn,wv,me,fn,Qe),Fr=Ux(kv),Eb=bC(Ie,en,Cb,ul,wv,ue,ae,Fr),cr=WE(Lr,Bd),xb=sb(We,cr),ur=sx(io,xb),bb=IC(ur,me,Qe),Nb=AC(Ie,bb,ur,ue,ae),Tb=OC(no,me,Qe),kb=RC(Ie,Tb,no,ue,ae,ob),Ab=ax(dl,Gs,St,cr),$s=ox(dl,Jt,Ab,Ld,Fd),Ib=VC(hn,$s,me,fn,Qe),Mb=jC(Ie,en,Ib,$s,ue,ae,Ws),Lv=lx(ht,so),Rb=WC(Lv,me,Qe),Ob=UC(Ie,Rb,Lv,ue,ae,Fr),Pb=QC(hn,Sv,me,fn,Qe),Db=YC(Ie,en,Pb,Sv,ue,ae,Fr),Fv=cx(ht),Lb=sE(hn,Fv,me,fn,Qe),Fb=rE(Ie,en,Lb,Fv,ht,ue,ae,Fr),jb=hE(hn,St,me,fn,Qe),Vb=dE(Ie,en,jb,St,ue,ae),Bb=fx(ul,We,ro,ht),hl=Bx(Jt,St,ro,Yx(St,kn)),zb=bE(Gs,me,kn,Qe,hl),Ub=ux(Bb),Wb=EE(Ie,Ub,zb,ue,ae,Fr),Gb=oC(en,ur,$s,ro,ht,Ev,ae,so),jv=new WeakMap,$b=UE(Sb,Gb,Mv,ae,jv,Ws),Vv=_x(dl,Jt,Ld,Nv,Fd,Tv),Hb=Mx(hn,Vv,me,fn,Qe),qb=Ix(Ie,en,Vv,Hb,ue,ae,Ws),Bv=LC(Gs),Kb=Nx(Bv,We,St,xv,cr),fl=bx(Bv,We,Kb,xv,cr,io,so),Yb=Sx(Ma,We,ur,St,ro,fl,ht,Ra,Ev,cr),zv=wx(Yb),Qb=Px(hn,ur,$s,St,zv,me,kn,fn,Qe,hl),Xb=Ox(Ie,en,zv,Qb,ue,ae,Fr),Zb=Cx(dn),Jb=Lx(Zb,ue,new WeakSet,ab),eN=xx(ur,no,St,fl,ht,cr),Uv=Ex(eN,ht),tN=Hx(hn,Uv,me,fn,Qe),nN=$x(Ie,en,Uv,tN,ue,ae),rN=Jx(fl,me,Qe),sN=Zx(Ie,We,fl,rN,ue,ae,Fr),Wv=LE(un),Gd=lE(un),Gv=new WeakMap,iN=_E(Gv,kn),oN=Wv?FS(Jt,ht,oE(un),Gd,cE(RS),ue,iN,ae,$i,new WeakMap,new WeakMap,Kx($i,kn),un):void 0,aN=PE(Vd,ae),lN=HC(zd,Jt,$C,iE,new WeakSet,ue,aN,Aa,Gi,Ud,Wd),$v=EC(oN,yb,Pv,wb,Eb,Nb,kb,Mb,Ob,lN,Db,Fb,Vb,Wb,$b,qb,Xb,Jb,nN,sN),cN=FE(Ie,px,ue,ae),uN=VE(Ie,mx,ue,ae),dN=BE(Ie,gx,ue,ae),hN=vx(We,ae),fN=zE(Ie,hN,ue),pN=rC($v,We,ht,Qx,cN,uN,dN,fN,io),$d=wE(jv),mN=zS($d),Hv=DC(dn),gN=ZC($d),qv=tE(dn),Kv=new WeakMap,vN=fE(Kv,Zt),yN=rx(Hv,dn,We,ur,no,$s,St,ro,ht,qv,Gd,vN,cr),_N=JE(We,yN,St,ht,cr),wN=CC(hn,Hv,Gs,ur,no,$s,St,gN,qv,Gd,me,$i,kn,fn,Qe,hl),SN=vE(Gv),CN=zx(Kv),ip=Wv?_C(mN,Ie,en,wN,_N,lt,SN,ue,ae,$i,ib,CN,db,Ws):void 0,EN=GC(ht,kn),xN=Wx(zd,Jt,jd,$d,hl,Aa,Ud,Wd),bN=kx($v,Jt,We,EN,xN),NN=TE(ll,Vd),TN=kE(Ad,Bd),kN=AE(Id,Rv),AN=IE(ll,ae);function Ft(t){return t===void 0}function te(t){return t!==void 0}function IN(t){return typeof t=="function"}function Ir(t){return typeof t=="number"}function Cr(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function MN(t){return typeof t=="boolean"}function Qt(t){return Array.isArray(t)}function Nn(t){return typeof t=="string"}function Mo(t){return Nn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Z(t,e){if(!t)throw new Error(e)}function rr(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Yv(t){!t.isOffline&&t.state!=="running"&&Hd('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Qv=!1,op=!1;function ap(t){Qv=t}function RN(t){Ft(t)&&Qv&&!op&&(op=!0,Hd("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Xv=console;function ON(...t){Xv.log(...t)}function Hd(...t){Xv.warn(...t)}function PN(t){return new pN(t)}function DN(t,e,n){return new bN(t,e,n)}const Et=typeof self=="object"?self:null,LN=Et&&(Et.hasOwnProperty("AudioContext")||Et.hasOwnProperty("webkitAudioContext"));function FN(t,e,n){return Z(te(ip),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(Et==null?void 0:Et.BaseAudioContext)?Et==null?void 0:Et.AudioWorkletNode:ip)(t,e,n)}var an=function(){return an=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},an.apply(this,arguments)};function Zv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tn(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function De(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function jN(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}class VN{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Mr(t){return kN(t)}function er(t){return TN(t)}function Zo(t){return AN(t)}function qr(t){return NN(t)}function BN(t){return t instanceof Pv}function zN(t,e){return t==="value"||Mr(e)||er(e)||BN(e)}function gs(t,...e){if(!e.length)return t;const n=e.shift();if(Cr(t)&&Cr(n))for(const r in n)zN(r,n[r])?t[r]=n[r]:Cr(n[r])?(t[r]||Object.assign(t,{[r]:{}}),gs(t[r],n[r])):Object.assign(t,{[r]:n[r]});return gs(t,...e)}function UN(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function Q(t,e,n=[],r){const s={},i=Array.from(e);if(Cr(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(gs(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&Cr(i[0]))gs(s,i[0]);else for(let o=0;o<n.length;o++)te(i[o])&&(s[n[o]]=i[o]);return gs(t,s)}function WN(t){return t.constructor.getDefaults()}function vs(t,e){return Ft(t)?e:t}function lp(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class An{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Et&&this.toString()===Et.TONE_DEBUG_CLASS)&&ON(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}An.version=nv;const qd=1e-6;function Ms(t,e){return t>e+qd}function wu(t,e){return Ms(t,e)||$t(t,e)}function La(t,e){return t+qd<e}function $t(t,e){return Math.abs(t-e)<qd}function GN(t,e,n){return Math.max(Math.min(t,n),e)}class jt extends An{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Q(jt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Z(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Z(wu(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if($t(this._timeline[n].time,e)){for(let r=n;r>=0&&$t(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&wu(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if($t(a[n],e)){for(let c=o;c<this._timeline.length;c++){const u=this._timeline[c];if($t(u[n],e))o=c;else break}return o}else{if(La(a[n],e)&&Ms(l[n],e))return o;Ms(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&$t(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&$t(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Jv=[];function pl(t){Jv.push(t)}function $N(t){Jv.forEach(e=>e(t))}const ey=[];function ml(t){ey.push(t)}function HN(t){ey.forEach(e=>e(t))}class oo extends An{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{Ft(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(Ft(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(Ft(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(oo.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class ty extends oo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ao extends ty{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new jt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=Q(ao.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=PN({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new VN(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||($N(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Z(qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Z(qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Z(qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Z(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Z(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Z(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Z(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return FN(this.rawContext,e,n)}addAudioWorkletModule(e){return De(this,void 0,void 0,function*(){Z(te(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return De(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return qr(this._context)?this._context.resume():Promise.resolve()}close(){return De(this,void 0,void 0,function*(){qr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&HN(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class qN extends ty{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return De(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ne(t,e){Qt(e)?e.forEach(n=>Ne(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function ny(t,e){Qt(e)?e.forEach(n=>ny(t,n)):Object.defineProperty(t,e,{writable:!0})}const oe=()=>{};class fe extends An{constructor(){super(),this.name="ToneAudioBuffer",this.onload=oe;const e=Q(fe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Nn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:oe,onload:oe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Pt().sampleRate}set(e){return e instanceof fe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return De(this,void 0,void 0,function*(){const n=fe.load(e).then(r=>{this.set(r),this.onload(this)});fe.downloads.push(n);try{yield n}finally{const r=fe.downloads.indexOf(n);fe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Qt(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=Pt(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Ir(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Ir(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){Z(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);Z(r<s,"The start time must be less than the end time");const i=s-r,o=Pt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new fe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new fe().fromArray(e)}static fromUrl(e){return De(this,void 0,void 0,function*(){return yield new fe().load(e)})}static load(e){return De(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const l=n[1].split("|");let c=l[0];for(const u of l)if(fe.supportsType(u)){c=u;break}e=e.replace(n[0],c)}const r=fe.baseUrl===""||fe.baseUrl.endsWith("/")?fe.baseUrl:fe.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Pt().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return De(this,void 0,void 0,function*(){for(yield Promise.resolve();fe.downloads.length;)yield fe.downloads[0]})}}fe.baseUrl="";fe.downloads=[];class Kd extends ao{constructor(){super({clockSource:"offline",context:Zo(arguments[0])?arguments[0]:DN(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Zo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Zo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return De(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return De(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new fe(n)})}close(){return Promise.resolve()}}const ry=new qN;let _r=ry;function Pt(){return _r===ry&&LN&&KN(new ao),_r}function KN(t,e=!1){e&&_r.dispose(),qr(t)?_r=new ao(t):Zo(t)?_r=new Kd(t):_r=t}function YN(){return _r.resume()}if(Et&&!Et.TONE_SILENCE_LOGGING){const e=` * Tone.js v${nv} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function QN(t){return Math.pow(10,t/20)}function XN(t){return 20*(Math.log(t)/Math.LN10)}function sy(t){return Math.pow(2,t/12)}let gl=440;function ZN(){return gl}function JN(t){gl=t}function Su(t){return Math.round(iy(t))}function iy(t){return 69+12*Math.log2(t/gl)}function eT(t){return gl*Math.pow(2,(t-69)/12)}class Yd extends An{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Yd&&this.fromType(this._val),Ft(this._val))return this._noArg();if(Nn(this._val)&&Ft(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Cr(this._val)){let e=0;for(const n in this._val)if(te(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(te(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Nn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class qt extends Yd{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new qt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new qt(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new qt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Su(this.toFrequency())}_now(){return this.context.now()}}class Dt extends qt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ZN()}static set A4(e){JN(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Dt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=tT[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Dt.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Dt(this.context,this.valueOf()*sy(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Su(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Dt.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),nT[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return eT(e)}static ftom(e){return Su(e)}}const tT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ei extends qt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class _t extends An{constructor(){super();const e=Q(_t.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Pt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return RN(e),new qt(this.context,e).toSeconds()}toFrequency(e){return new Dt(this.context,e).toFrequency()}toTicks(e){return new Ei(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{Ft(e[r])&&delete n[r]}),n}get(){const e=WN(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];te(r)&&te(r.value)&&te(r.setValueAtTime)?e[n]=r.value:r instanceof _t?e[n]=r._getPartialProperties(e[n]):Qt(r)||Ir(r)||Nn(r)||MN(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&te(this[n])&&(this[n]&&te(this[n].value)&&te(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof _t?this[n].set(e[n]):this[n]=e[n])}),this}}class Qd extends jt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return rr(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class _e extends _t{constructor(){const e=Q(_e.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Z(te(e.param)&&(Mr(e.param)||e.param instanceof _e),"param must be an AudioParam");!Mr(e.param);)e.param=e.param._param;this._swappable=te(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new jt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,te(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_t.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return te(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return te(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return te(this.maxValue)&&te(this.minValue)&&rr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?QN(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?XN(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return Z(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return Z(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=$t(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return Z(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);Z(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),Z(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Z(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));Z(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&$t(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){Z(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class J extends _t{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return te(this.input)?Mr(this.input)||this.input instanceof _e?1:this.input.numberOfInputs:0}get numberOfOutputs(){return te(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return te(e)&&(e instanceof J||er(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Z(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Hs(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Hd("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return rT(this,e,n,r),this}chain(...e){return Cu(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),te(this.input)&&(this.input instanceof J?this.input.dispose():er(this.input)&&this.input.disconnect()),te(this.output)&&(this.output instanceof J?this.output.dispose():er(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Cu(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof J?n.connect(r):er(n)&&Hs(n,r),r),e)}function Hs(t,e,n=0,r=0){for(Z(te(t),"Cannot connect from undefined node"),Z(te(e),"Cannot connect to undefined node"),(e instanceof J||er(e))&&Z(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Z(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof J||e instanceof _e;)te(e.input)&&(e=e.input);for(;t instanceof J;)te(t.output)&&(t=t.output);Mr(e)?t.connect(e,n):t.connect(e,n,r)}function rT(t,e,n=0,r=0){if(te(e))for(;e instanceof J;)e=e.input;for(;!er(t);)te(t.output)&&(t=t.output);Mr(e)?t.disconnect(e,n):er(e)?t.disconnect(e,n,r):t.disconnect()}class tt extends J{constructor(){const e=Q(tt.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new _e({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ne(this,"gain")}static getDefaults(){return Object.assign(J.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Rs extends J{constructor(e){super(e),this.onended=oe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new tt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(J.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:oe})}_startGain(e,n=1){Z(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Z(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==oe&&(this.onended(this),this.onended=oe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Z(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=oe,this}}class Xd extends Rs{constructor(){const e=Q(Xd.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Hs(this._source,this._gainNode),this.offset=new _e({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Rs.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ge extends J{constructor(){const e=Q(Ge.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Xd({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(J.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return Zd(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Zd(t,e,n,r){(e instanceof _e||Mr(e)||e instanceof Ge&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ge&&(e.overridden=!0)),Hs(t,e,n,r)}class Jd extends _e{constructor(){const e=Q(Jd.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new jt(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_e.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+n,c=this._exponentialApproach(i.time,i.value,s,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const l=o*a+s.time,c=this._exponentialInterpolate(s.time,s.value,n,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ft(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),l=(-s+a)/o,c=(-s-a)/o;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class eh extends Ge{constructor(){const e=Q(eh.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Jd({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ge.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class th extends _t{constructor(){const e=Q(th.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Qd,this._tickOffset=new jt,this._ticksAtTime=new jt,this._secondsAtTime=new jt,this.frequency=new eh({context:this.context,units:e.units,value:e.frequency}),Ne(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},_t.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),te(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,c=>{let u=o.time;const d=this._tickOffset.get(c.time);d&&d.time>=o.time&&(a=d.ticks,u=d.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==i.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let c=i.time;const u=this._tickOffset.get(l.time);u&&u.time>=i.time&&(o=u.seconds,c=u.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!==r.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),c=a-l;let u=Math.ceil(c)-c;u=$t(u,1)?0:u;let d=this.frequency.getTimeOfTick(a+u);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(h){i=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class vl extends _t{constructor(){const e=Q(vl.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=oe,this._lastUpdate=0,this._state=new Qd("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new th({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ne(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(_t.getDefaults(),{callback:oe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Yv(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}oo.mixin(vl);class jr extends J{constructor(){const e=Q(jr.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new tt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ne(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class nh extends J{constructor(){const e=Q(nh.getDefaults(),arguments);super(e),this.name="Destination",this.input=new jr({context:this.context}),this.output=new tt({context:this.context}),this.volume=this.input.volume,Cu(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Cu(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}pl(t=>{t.destination=new nh({context:t})});ml(t=>{t.destination.dispose()});class sT extends J{constructor(){super(...arguments),this.name="Listener",this.positionX=new _e({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new _e({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new _e({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new _e({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new _e({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new _e({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new _e({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new _e({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new _e({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(J.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}pl(t=>{t.listener=new sT({context:t})});ml(t=>{t.listener.dispose()});class rh extends An{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Q(rh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:oe,onload:oe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Z(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=oe,s=oe){return Nn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new fe(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new fe(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ls extends Ei{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class iT extends _t{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new jt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}pl(t=>{t.draw=new iT({context:t})});ml(t=>{t.draw.dispose()});class oT extends An{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Z(te(e.time),"Events must have a time property"),Z(te(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new aT(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class aT{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class lT extends An{constructor(e){super(),this.name="TimelineValue",this._timeline=new jt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Os extends J{constructor(){super(Q(Os.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return Zd(this,e,n,r),this}}class lo extends Os{constructor(){const e=Q(lo.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Qt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):IN(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ge.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));Z(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class sh extends Os{constructor(){const e=Q(sh.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new lo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Os.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class sr{constructor(e,n){this.id=sr._eventId++,this._remainderTime=0;const r=Object.assign(sr.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:oe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}sr._eventId=0;class ih extends sr{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(ih.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},sr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return La(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ls(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){La(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ls(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Ms(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class yl extends _t{constructor(){const e=Q(yl.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new lT(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new jt,this._repeatedEvents=new oT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new vl({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ne(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(_t.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new ls(this.context,this._swingTicks*2/3).toSeconds()*s}ap(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),ap(!1)}schedule(e,n){const r=new sr(this,{callback:e,time:new Ei(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new ih(this,{callback:e,duration:new qt(this.context,s).toTicks(),interval:new qt(this.context,n).toTicks(),time:new Ei(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new sr(this,{callback:e,once:!0,time:new Ei(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new ls(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return te(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Qt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new qt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new qt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ls(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new ls(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,c=new tt(l),u=new sh(-1),d=new tt(l);s.chain(c,u,d),s=d,i=1/i,o=[c,u,d]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const a=new tt(n);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ny(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}oo.mixin(yl);pl(t=>{t.transport=new yl({context:t})});ml(t=>{t.transport.dispose()});class Tt extends J{constructor(e){super(e),this.input=void 0,this._state=new Qd("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=oe,this._syncedStop=oe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new jr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ne(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,onstop:oe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=Ft(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")Z(Ms(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(vs(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Yv(this.context),this._start(s,n,r);return this}stop(e){let n=Ft(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||te(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Ms(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=oe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class _l extends Rs{constructor(){const e=Q(_l.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Hs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new _e({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new fe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Rs.getDefaults(),{url:new fe,loop:!1,loopEnd:0,loopStart:0,onload:oe,onerror:oe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){Z(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=vs(n,this.loopStart):n=vs(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;wu(o,a)&&(o=(o-l)%c+l),$t(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,La(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),te(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Vr(t,e){return De(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new Kd(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class oh extends Rs{constructor(){const e=Q(oh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Hs(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new _e({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new _e({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ne(this,["frequency","detune"])}static getDefaults(){return Object.assign(Rs.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oe extends Tt{constructor(){const e=Q(Oe.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),Ne(this,"frequency"),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),Ne(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Tt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new oh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oe._periodicWaveCache.find(n=>n.phase===this._phase&&UN(n.partials,this._partials));{const e=Oe._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(te(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oe._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),Oe._periodicWaveCache.length>100&&Oe._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){rr(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let l=1;l<s;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=a?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[l]=-u*Math.sin(n*l),o[l]=u*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return GN(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oe._periodicWaveCache=[];class cT extends Os{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new lo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ps extends Ge{constructor(){const e=Q(Ps.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new tt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ge.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class wl extends Tt{constructor(){const e=Q(wl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new cT({context:this.context}),this._modulationNode=new tt({context:this.context}),this._carrier=new Oe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ps({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ne(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oe.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Sl extends Tt{constructor(){const e=Q(Sl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new tt({context:this.context,gain:0}),this._carrier=new Oe({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Oe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ps({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ps({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ne(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oe.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class co extends Tt{constructor(){const e=Q(co.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new tt({context:this.context,gain:0}),this._thresh=new lo({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new Ge({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Oe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ne(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Tt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Cl extends Tt{constructor(){const e=Q(Cl.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ne(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oe.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(rr(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new Oe({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):oe});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class El extends Tt{constructor(){const e=Q(El.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ps({context:this.context,value:2}),this._pulse=new co({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ne(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Tt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const cp={am:wl,fat:Cl,fm:Sl,oscillator:Oe,pulse:co,pwm:El};class Fa extends Tt{constructor(){const e=Q(Fa.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Ge({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ge({context:this.context,units:"cents",value:e.detune}),Ne(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Oe.getDefaults(),Sl.getDefaults(),wl.getDefaults(),Cl.getDefaults(),co.getDefaults(),El.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=cp[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof cp[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ir(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ir(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Nn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return De(this,arguments,void 0,function*(e=1024){return Vr(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function oy(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){rr(i,t,e),n.set(this,i)}})}}function In(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){rr(this.toSeconds(i),t,e),n.set(this,i)}})}}class xl extends Tt{constructor(){const e=Q(xl.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new fe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Tt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:oe,onerror:oe,playbackRate:1,reverse:!1})}load(e){return De(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=oe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=vs(n,this._loopStart):n=vs(n,0);const s=this.toSeconds(n),i=r;r=vs(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new _l({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Ft(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&rr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&rr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}tn([In(0)],xl.prototype,"fadeIn",void 0);tn([In(0)],xl.prototype,"fadeOut",void 0);class dr extends J{constructor(){const e=Q(dr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Ge({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(J.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Nn(e))return e;{let r;for(r in Ro)if(Ro[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Nn(r)&&Reflect.has(Ro,r)){const s=Ro[r];Cr(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(Qt(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+s;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Z(Qt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return Zd(this,e,n,r),this}asArray(){return De(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new Kd(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}tn([In(0)],dr.prototype,"attack",void 0);tn([In(0)],dr.prototype,"decay",void 0);tn([oy(0,1)],dr.prototype,"sustain",void 0);tn([In(0)],dr.prototype,"release",void 0);const Ro=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const h=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=h/10+n*.83}s[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const h=Math.pow(n,3)*4+.2,g=Math.cos(h*Math.PI*2*n);c[e]=Math.abs(g*(1-n))}function u(h){const g=new Array(h.length);for(let p=0;p<h.length;p++)g[p]=1-h[p];return g}function d(h){return h.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:u(s)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();class Ds extends J{constructor(){const e=Q(Ds.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new jr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ne(this,"volume")}static getDefaults(){return Object.assign(J.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ls extends Ds{constructor(){const e=Q(Ls.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Ds.getDefaults(),{detune:0,onsilence:oe,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Dt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}tn([In(0)],Ls.prototype,"portamento",void 0);class ah extends dr{constructor(){super(Q(ah.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new tt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ja extends Ls{constructor(){const e=Q(ja.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Fa(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ah(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ne(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ls.getDefaults(),{envelope:Object.assign(lp(dr.getDefaults(),Object.keys(J.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(lp(Fa.getDefaults(),[...Object.keys(Tt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class bl extends ja{constructor(){const e=Q(bl.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ne(this,["oscillator","envelope"])}static getDefaults(){return gs(Ls.getDefaults(),ja.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Dt?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}tn([oy(0)],bl.prototype,"octaves",void 0);tn([In(0)],bl.prototype,"pitchDecay",void 0);const ay=new Set;function lh(t){ay.add(t)}function ly(t,e){const n=`registerProcessor("${t}", ${e})`;ay.add(n)}const uT=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;lh(uT);const dT=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;lh(dT);const hT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;lh(hT);const fT="feedback-comb-filter",pT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ly(fT,pT);class uo extends Ds{constructor(){const e=Q(uo.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(Z(Mo(r)||Ir(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),Mo(r)){const i=new Dt(this.context,r).toMidi();n[i]=e.urls[r]}else Ir(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new rh({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Ds.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:oe,onerror:oe,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=iy(new Dt(this.context,s).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),c=o-l,u=this._buffers.get(c),d=sy(l+a),h=new _l({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,u.duration/d,r),Qt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const g=this._activeSources.get(o),p=g.indexOf(h);p!==-1&&g.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Dt(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),Qt(n)?(Z(Qt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(Z(Mo(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Mo(e)){const s=new Dt(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}tn([In(0)],uo.prototype,"attack",void 0);tn([In(0)],uo.prototype,"release",void 0);class ch extends J{constructor(){const e=Q(ch.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new _e({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ne(this,"pan")}static getDefaults(){return Object.assign(J.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const mT="bit-crusher",gT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ly(mT,gT);class Re extends J{constructor(){const e=Q(Re.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new tt({context:this.context}),Re._allSolos.has(this.context)||Re._allSolos.set(this.context,new Set),Re._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(J.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Re._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Re._soloed.has(this.context)||Re._soloed.set(this.context,new Set),Re._soloed.get(this.context).add(this)}_removeSolo(){Re._soloed.has(this.context)&&Re._soloed.get(this.context).delete(this)}_isSoloed(){return Re._soloed.has(this.context)&&Re._soloed.get(this.context).has(this)}_noSolos(){return!Re._soloed.has(this.context)||Re._soloed.has(this.context)&&Re._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Re._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Re._allSolos=new Map;Re._soloed=new Map;class uh extends J{constructor(){const e=Q(uh.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new ch({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new jr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ne(this,["pan","volume"])}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class cs extends J{constructor(){const e=Q(cs.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Re({solo:e.solo,context:this.context}),this._panVol=this.output=new uh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ne(this,["pan","volume"])}static getDefaults(){return Object.assign(J.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return cs.buses.has(e)||cs.buses.set(e,new tt({context:this.context})),cs.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new tt({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}cs.buses=new Map;Pt().transport;Pt().destination;Pt().destination;Pt().listener;Pt().draw;Pt();const vT=()=>{const t=S.useRef(null),e=S.useRef(null),n=S.useRef(new Set),r=S.useRef(!1),[s,i]=S.useState(100),{onMIDIMessage:o,isMIDIDeviceConnected:a}=CS();S.useEffect(()=>{r.current||(e.current=new jr(0).toDestination(),t.current=new uo({C3:"https://tonejs.github.io/audio/salamander/C3.mp3","D#3":"https://tonejs.github.io/audio/salamander/Ds3.mp3","F#3":"https://tonejs.github.io/audio/salamander/Fs3.mp3",A3:"https://tonejs.github.io/audio/salamander/A3.mp3",C4:"https://tonejs.github.io/audio/salamander/C4.mp3","D#4":"https://tonejs.github.io/audio/salamander/Ds4.mp3","F#4":"https://tonejs.github.io/audio/salamander/Fs4.mp3",A4:"https://tonejs.github.io/audio/salamander/A4.mp3"},()=>{console.log("Sampler loaded!")}).connect(e.current),t.current.set({release:2}),r.current=!0);const d=async()=>{Pt().state!=="running"&&await YN()};return window.addEventListener("click",d,{once:!0}),()=>{window.removeEventListener("click",d),t.current&&(t.current.dispose(),t.current=null,r.current=!1),e.current&&(e.current.dispose(),e.current=null)}},[]);const l=S.useCallback(d=>{if(i(d),e.current){const h=d===0?-1/0:20*Math.log10(d/100);e.current.volume.value=h}},[]),c=S.useCallback(d=>{var m,y;if(!t.current||!r.current)return;const{note:h,type:g}=d,p=at(h.number);g==="noteon"&&h.attack>0?n.current.has(p)||((m=t.current)==null||m.triggerAttack(p,void 0,h.attack),n.current.add(p)):(g==="noteoff"||g==="noteon"&&h.attack===0)&&n.current.has(p)&&((y=t.current)==null||y.triggerRelease(p),n.current.delete(p))},[]),u=S.useCallback(async d=>{!t.current||!r.current||n.current.has(d)||t.current.triggerAttackRelease(d,"8n",void 0,.7)},[t]);return S.useEffect(()=>{const d=o(c);return()=>{d()}},[o,c]),{isMIDIDeviceConnected:a,volume:s,changeVolume:l,playNote:u}},cy=S.createContext(void 0),yT=({children:t})=>{const{isMIDIDeviceConnected:e,playNote:n,volume:r,changeVolume:s}=vT(),i={isMIDIDeviceConnected:e,volume:r,changeVolume:s,playNote:n};return C.jsx(cy.Provider,{value:i,children:t})},uy=()=>{const t=S.useContext(Gg);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t};function dy(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var _T=["color"],hy=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=dy(t,_T);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),S.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wT=["color"],ST=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=dy(t,wT);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),S.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CT(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function fy(...t){return e=>t.forEach(n=>CT(n,e))}function $e(...t){return S.useCallback(fy(...t),t)}function ET(t,e){const n=S.createContext(e);function r(i){const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return C.jsx(n.Provider,{value:l,children:o})}function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return r.displayName=t+"Provider",[r,s]}function Br(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:g,...p}=d,m=(h==null?void 0:h[t][l])||a,y=S.useMemo(()=>p,Object.values(p));return C.jsx(m.Provider,{value:y,children:g})}function u(d,h){const g=(h==null?void 0:h[t][l])||a,p=S.useContext(g);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,xT(s,...e)]}function xT(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Fs=S.forwardRef((t,e)=>{const{children:n,...r}=t,s=S.Children.toArray(n),i=s.find(NT);if(i){const o=i.props.children,a=s.map(l=>l===i?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return C.jsx(Eu,{...r,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return C.jsx(Eu,{...r,ref:e,children:n})});Fs.displayName="Slot";var Eu=S.forwardRef((t,e)=>{const{children:n,...r}=t;if(S.isValidElement(n)){const s=kT(n);return S.cloneElement(n,{...TT(r,n.props),ref:e?fy(e,s):s})}return S.Children.count(n)>1?S.Children.only(null):null});Eu.displayName="SlotClone";var bT=({children:t})=>C.jsx(C.Fragment,{children:t});function NT(t){return S.isValidElement(t)&&t.type===bT}function TT(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function kT(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var AT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Te=AT.reduce((t,e)=>{const n=S.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Fs:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function IT(t,e){t&&sl.flushSync(()=>t.dispatchEvent(e))}function py(t){const e=t+"CollectionProvider",[n,r]=Br(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:m}=g,y=Je.useRef(null),f=Je.useRef(new Map).current;return C.jsx(s,{scope:p,itemMap:f,collectionRef:y,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=Je.forwardRef((g,p)=>{const{scope:m,children:y}=g,f=i(a,m),v=$e(p,f.collectionRef);return C.jsx(Fs,{ref:v,children:y})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Je.forwardRef((g,p)=>{const{scope:m,children:y,...f}=g,v=Je.useRef(null),_=$e(p,v),E=i(c,m);return Je.useEffect(()=>(E.itemMap.set(v,{ref:v,...f}),()=>void E.itemMap.delete(v))),C.jsx(Fs,{[u]:"",ref:_,children:y})});d.displayName=c;function h(g){const p=i(t+"CollectionConsumer",g);return Je.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const f=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,w)=>f.indexOf(E.ref.current)-f.indexOf(w.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}var Hi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},MT=S_.useId||(()=>{}),RT=0;function Jo(t){const[e,n]=S.useState(MT());return Hi(()=>{n(r=>r??String(RT++))},[t]),e?`radix-${e}`:""}function ir(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function qs({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=OT({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ir(n),l=S.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function OT({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,s=S.useRef(r),i=ir(e);return S.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var PT=S.createContext(void 0);function dh(t){const e=S.useContext(PT);return t||e||"ltr"}var lc="rovingFocusGroup.onEntryFocus",DT={bubbles:!1,cancelable:!0},Nl="RovingFocusGroup",[xu,my,LT]=py(Nl),[FT,gy]=Br(Nl,[LT]),[jT,VT]=FT(Nl),vy=S.forwardRef((t,e)=>C.jsx(xu.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(xu.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(BT,{...t,ref:e})})}));vy.displayName=Nl;var BT=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=S.useRef(null),g=$e(e,h),p=dh(i),[m=null,y]=qs({prop:o,defaultProp:a,onChange:l}),[f,v]=S.useState(!1),_=ir(c),E=my(n),w=S.useRef(!1),[N,b]=S.useState(0);return S.useEffect(()=>{const x=h.current;if(x)return x.addEventListener(lc,_),()=>x.removeEventListener(lc,_)},[_]),C.jsx(jT,{scope:n,orientation:r,dir:p,loop:s,currentTabStopId:m,onItemFocus:S.useCallback(x=>y(x),[y]),onItemShiftTab:S.useCallback(()=>v(!0),[]),onFocusableItemAdd:S.useCallback(()=>b(x=>x+1),[]),onFocusableItemRemove:S.useCallback(()=>b(x=>x-1),[]),children:C.jsx(Te.div,{tabIndex:f||N===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{w.current=!0}),onFocus:ce(t.onFocus,x=>{const A=!w.current;if(x.target===x.currentTarget&&A&&!f){const T=new CustomEvent(lc,DT);if(x.currentTarget.dispatchEvent(T),!T.defaultPrevented){const I=E().filter(F=>F.focusable),k=I.find(F=>F.active),V=I.find(F=>F.id===m),$=[k,V,...I].filter(Boolean).map(F=>F.ref.current);wy($,u)}}w.current=!1}),onBlur:ce(t.onBlur,()=>v(!1))})})}),yy="RovingFocusGroupItem",_y=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=Jo(),l=i||a,c=VT(yy,n),u=c.currentTabStopId===l,d=my(n),{onFocusableItemAdd:h,onFocusableItemRemove:g}=c;return S.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),C.jsx(xu.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:C.jsx(Te.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ce(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ce(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ce(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=WT(p,c.orientation,c.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let f=d().filter(v=>v.focusable).map(v=>v.ref.current);if(m==="last")f.reverse();else if(m==="prev"||m==="next"){m==="prev"&&f.reverse();const v=f.indexOf(p.currentTarget);f=c.loop?GT(f,v+1):f.slice(v+1)}setTimeout(()=>wy(f))}})})})});_y.displayName=yy;var zT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UT(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function WT(t,e,n){const r=UT(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zT[r]}function wy(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function GT(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $T=vy,HT=_y;function hh(t){const[e,n]=S.useState(void 0);return Hi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function fh(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function qT(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Ks=t=>{const{present:e,children:n}=t,r=KT(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=$e(r.ref,YT(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};Ks.displayName="Presence";function KT(t){const[e,n]=S.useState(),r=S.useRef({}),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qT(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Oo(r.current);i.current=a==="mounted"?c:"none"},[a]),Hi(()=>{const c=r.current,u=s.current;if(u!==t){const h=i.current,g=Oo(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Hi(()=>{if(e){const c=d=>{const g=Oo(r.current).includes(d.animationName);d.target===e&&g&&sl.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(i.current=Oo(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Oo(t){return(t==null?void 0:t.animationName)||"none"}function YT(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ph="Radio",[QT,Sy]=Br(ph),[XT,ZT]=QT(ph),Cy=S.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:l,...c}=t,[u,d]=S.useState(null),h=$e(e,m=>d(m)),g=S.useRef(!1),p=u?!!u.closest("form"):!0;return C.jsxs(XT,{scope:n,checked:s,disabled:o,children:[C.jsx(Te.button,{type:"button",role:"radio","aria-checked":s,"data-state":by(s),"data-disabled":o?"":void 0,disabled:o,value:a,...c,ref:h,onClick:ce(t.onClick,m=>{s||l==null||l(),p&&(g.current=m.isPropagationStopped(),g.current||m.stopPropagation())})}),p&&C.jsx(JT,{control:u,bubbles:!g.current,name:r,value:a,checked:s,required:i,disabled:o,style:{transform:"translateX(-100%)"}})]})});Cy.displayName=ph;var Ey="RadioIndicator",xy=S.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=ZT(Ey,n);return C.jsx(Ks,{present:r||i.checked,children:C.jsx(Te.span,{"data-state":by(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});xy.displayName=Ey;var JT=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=S.useRef(null),o=fh(n),a=hh(e);return S.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(h)}},[o,n,r]),C.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function by(t){return t?"checked":"unchecked"}var ek=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mh="RadioGroup",[tk,jM]=Br(mh,[gy,Sy]),Ny=gy(),Ty=Sy(),[nk,rk]=tk(mh),ky=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...h}=t,g=Ny(n),p=dh(c),[m,y]=qs({prop:i,defaultProp:s,onChange:d});return C.jsx(nk,{scope:n,name:r,required:o,disabled:a,value:m,onValueChange:y,children:C.jsx($T,{asChild:!0,...g,orientation:l,dir:p,loop:u,children:C.jsx(Te.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:p,...h,ref:e})})})});ky.displayName=mh;var Ay="RadioGroupItem",Iy=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=rk(Ay,n),o=i.disabled||r,a=Ny(n),l=Ty(n),c=S.useRef(null),u=$e(e,c),d=i.value===s.value,h=S.useRef(!1);return S.useEffect(()=>{const g=m=>{ek.includes(m.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",p)}},[]),C.jsx(HT,{asChild:!0,...a,focusable:!o,active:d,children:C.jsx(Cy,{disabled:o,required:i.required,checked:d,...l,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:ce(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:ce(s.onFocus,()=>{var g;h.current&&((g=c.current)==null||g.click())})})})});Iy.displayName=Ay;var sk="RadioGroupIndicator",My=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=Ty(n);return C.jsx(xy,{...s,...r,ref:e})});My.displayName=sk;var Ry=ky,Oy=Iy,ik=My;function Py(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Py(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ok(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Py(t))&&(r&&(r+=" "),r+=e);return r}const gh="-",ak=t=>{const e=ck(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(gh);return a[0]===""&&a.length!==1&&a.shift(),Dy(a,e)||lk(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Dy=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Dy(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(gh);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},up=/^\[(.+)\]$/,lk=t=>{if(up.test(t)){const e=up.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ck=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dk(Object.entries(t.classGroups),n).forEach(([i,o])=>{bu(o,r,i,e)}),r},bu=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:dp(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(uk(s)){bu(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{bu(o,dp(e,i),n,r)})})},dp=(t,e)=>{let n=t;return e.split(gh).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uk=t=>t.isThemeGetter,dk=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,hk=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ly="!",fk=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let f=a[y];if(c===0){if(f===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(f==="/"){d=y;continue}}f==="["?c++:f==="]"&&c--}const h=l.length===0?a:a.substring(u),g=h.startsWith(Ly),p=g?h.substring(1):h,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},pk=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mk=t=>({cache:hk(t.cacheSize),parseClassName:fk(t),...ak(t)}),gk=/\s+/,vk=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(gk);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:g}=n(c);let p=!!g,m=r(p?h.substring(0,g):h);if(!m){if(!p){a=c+(a.length>0?" "+a:a);continue}if(m=r(h),!m){a=c+(a.length>0?" "+a:a);continue}p=!1}const y=pk(u).join(":"),f=d?y+Ly:y,v=f+m;if(i.includes(v))continue;i.push(v);const _=s(m,p);for(let E=0;E<_.length;++E){const w=_[E];i.push(f+w)}a=c+(a.length>0?" "+a:a)}return a};function yk(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Fy(e))&&(r&&(r+=" "),r+=n);return r}const Fy=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Fy(t[r]))&&(n&&(n+=" "),n+=e);return n};function _k(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=mk(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=vk(l,n);return s(l,u),u}return function(){return i(yk.apply(null,arguments))}}const de=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},jy=/^\[(?:([a-z-]+):)?(.+)\]$/i,wk=/^\d+\/\d+$/,Sk=new Set(["px","full","screen"]),Ck=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ek=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Nk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pn=t=>ys(t)||Sk.has(t)||wk.test(t),Dn=t=>Ys(t,"length",Pk),ys=t=>!!t&&!Number.isNaN(Number(t)),cc=t=>Ys(t,"number",ys),li=t=>!!t&&Number.isInteger(Number(t)),Tk=t=>t.endsWith("%")&&ys(t.slice(0,-1)),Y=t=>jy.test(t),Ln=t=>Ck.test(t),kk=new Set(["length","size","percentage"]),Ak=t=>Ys(t,kk,Vy),Ik=t=>Ys(t,"position",Vy),Mk=new Set(["image","url"]),Rk=t=>Ys(t,Mk,Lk),Ok=t=>Ys(t,"",Dk),ci=()=>!0,Ys=(t,e,n)=>{const r=jy.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Pk=t=>Ek.test(t)&&!xk.test(t),Vy=()=>!1,Dk=t=>bk.test(t),Lk=t=>Nk.test(t),Fk=()=>{const t=de("colors"),e=de("spacing"),n=de("blur"),r=de("brightness"),s=de("borderColor"),i=de("borderRadius"),o=de("borderSpacing"),a=de("borderWidth"),l=de("contrast"),c=de("grayscale"),u=de("hueRotate"),d=de("invert"),h=de("gap"),g=de("gradientColorStops"),p=de("gradientColorStopPositions"),m=de("inset"),y=de("margin"),f=de("opacity"),v=de("padding"),_=de("saturate"),E=de("scale"),w=de("sepia"),N=de("skew"),b=de("space"),x=de("translate"),A=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Y,e],k=()=>[Y,e],V=()=>["",pn,Dn],B=()=>["auto",ys,Y],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Y],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[ys,Y];return{cacheSize:500,separator:":",theme:{colors:[ci],spacing:[pn,Dn],blur:["none","",Ln,Y],brightness:z(),borderColor:[t],borderRadius:["none","","full",Ln,Y],borderSpacing:k(),borderWidth:V(),contrast:z(),grayscale:O(),hueRotate:z(),invert:O(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[Tk,Dn],inset:I(),margin:I(),opacity:z(),padding:k(),saturate:z(),scale:z(),sepia:O(),skew:z(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Y]}],container:["container"],columns:[{columns:[Ln]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Y]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",li,Y]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Y]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",li,Y]}],"grid-cols":[{"grid-cols":[ci]}],"col-start-end":[{col:["auto",{span:["full",li,Y]},Y]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[ci]}],"row-start-end":[{row:["auto",{span:[li,Y]},Y]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Y]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Y]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Y,e]}],"min-w":[{"min-w":[Y,e,"min","max","fit"]}],"max-w":[{"max-w":[Y,e,"none","full","min","max","fit","prose",{screen:[Ln]},Ln]}],h:[{h:[Y,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Y,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Y,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Y,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ln,Dn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cc]}],"font-family":[{font:[ci]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Y]}],"line-clamp":[{"line-clamp":["none",ys,cc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pn,Y]}],"list-image":[{"list-image":["none",Y]}],"list-style-type":[{list:["none","disc","decimal",Y]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pn,Dn]}],"underline-offset":[{"underline-offset":["auto",pn,Y]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Ik]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ak]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rk]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[pn,Y]}],"outline-w":[{outline:[pn,Dn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[pn,Dn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ln,Ok]}],"shadow-color":[{shadow:[ci]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ln,Y]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Y]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Y]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Y]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[li,Y]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Y]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[pn,Dn,cc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jk=_k(Fk);function He(...t){return jk(ok(t))}const By=(t,e)=>{const n=[],r=[],s=["C#","Eb","F#","G#","Bb"];for(let i=t;i<=e;i++){const o=at(i);s.includes(o.slice(0,-1))?r.push({note:o,midiNumber:i}):n.push({note:o,midiNumber:i})}return{whiteKeys:n,blackKeys:r}},vh=S.forwardRef(({className:t,...e},n)=>C.jsx(Ry,{className:He("grid gap-2",t),...e,ref:n}));vh.displayName=Ry.displayName;const xi=S.forwardRef(({className:t,...e},n)=>C.jsx(Oy,{ref:n,className:He("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:C.jsx(ik,{className:"flex items-center justify-center",children:C.jsx(hy,{className:"h-3.5 w-3.5 fill-primary"})})}));xi.displayName=Oy.displayName;var Vk="Label",yh=S.forwardRef((t,e)=>C.jsx(Te.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yh.displayName=Vk;var zy=yh;function Uy(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Uy(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Bk(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Uy(t))&&(r&&(r+=" "),r+=e);return r}const hp=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,fp=Bk,_h=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return fp(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const h=hp(u)||hp(d);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...g}=u;return Object.entries(g).every(p=>{let[m,y]=p;return Array.isArray(y)?y.includes({...i,...a}[m]):{...i,...a}[m]===y})?[...c,d,h]:c},[]);return fp(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},zk=_h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),zn=S.forwardRef(({className:t,...e},n)=>C.jsx(zy,{ref:n,className:He(zk(),t),...e}));zn.displayName=zy.displayName;const pp={playground:"hover:bg-purple-100 text-purple-700 border-purple-300",note:"hover:bg-green-100 text-green-700 border-green-300",chord:"hover:bg-blue-100 text-blue-700 border-blue-300",scale:"hover:bg-red-100 text-red-700 border-red-300",progression:"hover:bg-yellow-100 text-yellow-700 border-yellow-300","ear-training":"hover:bg-orange-100 text-orange-700 border-orange-300","interval-training":"hover:bg-indigo-100 text-indigo-700 border-indigo-300"},Uk=()=>{const{mode:t,setMode:e}=uy();return C.jsxs("div",{className:"flex w-[250px] flex-col gap-6 rounded-lg bg-white p-6 shadow-md",children:[C.jsx("h2",{className:"mb-4 text-center text-2xl font-bold text-gray-800",children:"Practice Mode"}),C.jsx(vh,{value:t,onValueChange:n=>e(n),className:"flex flex-col gap-2",children:Object.keys(pp).map(n=>C.jsxs(zn,{htmlFor:n,className:He("flex cursor-pointer items-center justify-center rounded-lg border-2 p-3 text-lg font-medium transition-colors duration-200",pp[n],t===n?"border-current bg-white shadow-md":"bg-gray-50 hover:shadow-sm"),children:[C.jsx(xi,{value:n,id:n,className:"sr-only"}),n.charAt(0).toUpperCase()+n.slice(1).replace("-"," ")," "]},n))})]})},Qs=()=>{const{pressedNotes:t,isMIDIDeviceConnected:e}=Dr();return C.jsx("div",{className:"mt-4 w-full text-center",children:e?C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-sm text-green-600",children:"MIDI device connected! Start playing."}),C.jsxs("h3",{className:"mt-2 text-lg font-semibold text-gray-800",children:["Currently Pressed Notes:"," ",t.slice().sort((n,r)=>n-r).map(at).join(", ")]})]}):C.jsx("p",{className:"text-sm text-red-600",children:"No MIDI device detected. Please connect a MIDI device."})})},Wk=()=>C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-purple-600",children:"MIDI Playground"}),C.jsx("p",{className:"mb-4 text-center text-lg text-gray-700",children:"Play freely on your MIDI keyboard!"}),C.jsx(Qs,{})]}),Gk=({note:t})=>t?C.jsx("div",{className:"mb-6 w-full rounded-lg bg-gray-100 p-4 text-center shadow-inner",children:C.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Press this key:"," ",C.jsx("span",{className:"text-green-500",children:at(t)})]})}):null,Xs=({message:t,className:e})=>t?C.jsx("h3",{className:He("mt-4 text-xl font-bold",t==="Correct!"?"text-green-600":"text-red-600",e),children:t}):null,$k=_h("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),wt=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Fs:"button";return C.jsx(o,{className:He($k({variant:e,size:n,className:t})),ref:i,...s})});wt.displayName="Button";const Mn=()=>{const t=S.useContext(tv);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Hk=()=>{const{lowKey:t,highKey:e}=Mn(),[n,r]=S.useState(uu(t,e)),[s,i]=S.useState(""),[o,a]=S.useState(!1),{pressedNotes:l,allKeysReleased:c}=Dr(),u=(h,g)=>{if(o&&g){d();return}o||h.length===1&&(h.includes(n)?(i("Correct!"),a(!0)):i("Try Again!"))},d=()=>{r(h=>uu(t,e,h)),i(""),a(!1)};return S.useEffect(()=>{u(l,c)},[l,c]),{currentNote:n,feedback:s,skipNote:d}},qk=()=>{const{currentNote:t,feedback:e,skipNote:n}=Hk();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-green-600",children:"Note Practice Mode"}),C.jsx(Gk,{note:t}),C.jsx(Qs,{}),C.jsx(Xs,{message:e}),C.jsx(wt,{className:"mt-4",onClick:n,children:"Skip Note"})]})},Wy=({chord:t})=>t?C.jsxs("div",{className:"mb-6 w-full rounded-lg bg-gray-100 p-4 text-center shadow-inner",children:[C.jsxs("h2",{className:"mb-4 text-xl font-bold text-gray-800",children:["Play this chord: ",C.jsx("span",{className:"text-blue-500",children:t.name})]}),C.jsxs("p",{className:"text-lg text-gray-600",children:["Notes:"," ",C.jsx("span",{className:"font-semibold",children:t.notes.map(fS).join(", ")})]})]}):null,Kk=()=>{const{enabledChordTypes:t}=Mn(),[e,n]=S.useState(sc({enabledChords:[...t]})),[r,s]=S.useState(""),[i,o]=S.useState(!1),{pressedNotes:a,allKeysReleased:l}=Dr(),c=(d,h)=>{if(i&&h){n(g=>sc({currentChord:g,enabledChords:[...t]})),s(""),o(!1);return}i||d.length===e.notes.length&&(Zg(d,e.notes)?(s("Correct!"),o(!0)):s("Try Again!"))},u=()=>{n(d=>sc({currentChord:d,enabledChords:[...t]})),s(""),o(!1)};return S.useEffect(()=>{c(a,l)},[a,l]),{currentChord:e,feedback:r,skipChord:u}},Yk=()=>{const{currentChord:t,feedback:e,skipChord:n}=Kk();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-blue-600",children:"Chord Practice Mode"}),C.jsx(Wy,{chord:t}),C.jsx(Qs,{}),C.jsx(Xs,{message:e}),C.jsx(wt,{className:"mt-4",onClick:n,children:"Skip Chord"})]})},Qk=()=>{const{enabledScales:t}=Mn(),[e,n]=S.useState(oc({enabledScales:[...t]})),[r,s]=S.useState(!1),[i,o]=S.useState(0),[a,l]=S.useState(-1),[c,u]=S.useState(""),[d,h]=S.useState(!1),{allKeysReleased:g}=Dr(),p=[...e.notes,...e.notes.slice(0,-1).reverse()],m=p[i],y=p[i+1],f=S.useCallback(N=>{o(0),l(-1),u(N||""),h(!1)},[]),v=S.useCallback(()=>{o(1),l(0),u("Restarted Scale!"),h(!1)},[]),_=S.useCallback(()=>{o(N=>{const b=N+1;return N<e.notes.length?l(N):l(p.length-N-1),u("Correct!"),b===p.length?(h(!0),N):b})},[e.notes.length,p.length]);S.useEffect(()=>{d&&g&&(f(),r||n(N=>oc({currentScale:N,enabledScales:[...t]})))},[d,g,f,t,r]);const E=S.useCallback(N=>{if(!d){if(N===m)return _();if(N===e.notes[0])return v();f("Try again!")}},[d,m,_,v,f,e.notes]),w=S.useCallback(()=>{f(),n(N=>oc({currentScale:N,enabledScales:[...t]}))},[f,t]);return ev(E),{currentNote:m,highlightedIndex:a,nextNote:y,feedback:c,scale:e,skipScale:w,isScaleComplete:d,repeat:r,setRepeat:s}};var Gy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mp=Je.createContext&&Je.createContext(Gy),Xk=["attr","size","title"];function Zk(t,e){if(t==null)return{};var n=Jk(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jk(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Va.apply(this,arguments)}function gp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gp(Object(n),!0).forEach(function(r){eA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eA(t,e,n){return e=tA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tA(t){var e=nA(t,"string");return typeof e=="symbol"?e:e+""}function nA(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $y(t){return t&&t.map((e,n)=>Je.createElement(e.tag,Ba({key:n},e.attr),$y(e.child)))}function Tl(t){return e=>Je.createElement(rA,Va({attr:Ba({},t.attr)},e),$y(t.child))}function rA(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=Zk(t,Xk),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Je.createElement("svg",Va({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ba(Ba({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Je.createElement("title",null,i),t.children)};return mp!==void 0?Je.createElement(mp.Consumer,null,n=>e(n)):e(Gy)}function sA(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm80 248c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80z"},child:[]}]})(t)}const iA=({scale:t,currentNote:e,highlightedIndex:n,isScaleComplete:r})=>C.jsxs("div",{className:"mb-6 w-full rounded-lg bg-gray-100 p-4 text-center shadow-inner",children:[C.jsxs("h2",{className:"mb-4 text-xl font-bold text-gray-800",children:["Scale: ",C.jsx("span",{className:"text-red-500",children:t.name})]}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-800",children:e&&!r?C.jsxs(C.Fragment,{children:["Press this key:"," ",C.jsx("span",{className:"text-red-500",children:at(e)})]}):C.jsx("span",{className:"text-red-500",children:"Scale complete!"})}),C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{className:"grid grid-rows-[1fr_auto] items-center justify-center gap-x-2",style:{gridTemplateColumns:`repeat(${t.notes.length}, 1fr)`},children:t.notes.map((s,i)=>C.jsxs("div",{className:"row-span-2 row-start-1 grid grid-rows-subgrid",children:[C.jsx("div",{className:"flex h-2 items-center justify-center",children:C.jsx(sA,{className:He("invisible h-2 w-2",i===n&&"visible")})}),C.jsx("span",{className:"row-start-2 text-sm font-semibold text-gray-600",children:at(s)},s)]},i))})})]})]});var oA="Toggle",Hy=S.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:s,...i}=t,[o=!1,a]=qs({prop:n,onChange:s,defaultProp:r});return C.jsx(Te.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:e,onClick:ce(t.onClick,()=>{t.disabled||a(!o)})})});Hy.displayName=oA;var qy=Hy;const aA=_h("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Ky=S.forwardRef(({className:t,variant:e,size:n,...r},s)=>C.jsx(qy,{ref:s,className:He(aA({variant:e,size:n,className:t})),...r}));Ky.displayName=qy.displayName;function lA(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"},child:[]}]})(t)}function cA(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 224c0 17.7 14.3 32 32 32s32-14.3 32-32c0-53 43-96 96-96H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9S320 19.1 320 32V64H160C71.6 64 0 135.6 0 224zm512 64c0-17.7-14.3-32-32-32s-32 14.3-32 32c0 53-43 96-96 96H192V352c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V448H352c88.4 0 160-71.6 160-160z"},child:[]}]})(t)}function uA(t){return Tl({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M533.6 32.5C598.5 85.2 640 165.8 640 256s-41.5 170.7-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"},child:[]}]})(t)}const dA=()=>{const{currentNote:t,highlightedIndex:e,feedback:n,scale:r,skipScale:s,isScaleComplete:i,repeat:o,setRepeat:a}=Qk();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-red-600",children:"Scale Practice Mode"}),C.jsx(iA,{scale:r,currentNote:t,highlightedIndex:e,isScaleComplete:i}),C.jsx(Qs,{}),C.jsx(Xs,{message:n}),C.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[C.jsx(Ky,{variant:"outline",pressed:o,onPressedChange:a,children:C.jsx(cA,{})}),C.jsx(wt,{onClick:s,children:"Skip Scale"})]})]})},st=t=>{const e=Qo.find(n=>n.name===t);if(!e)throw new Error(`Chord ${t} not found in the defined chords`);return e},vp=[{name:"I-IV-V-I in C Major",chords:[st("C Major"),st("F Major"),st("G Major"),st("C Major")]},{name:"I-V-vi-IV in G Major",chords:[st("G Major"),st("D Major"),st("E Minor"),st("C Major")]},{name:"ii-V-I in C Major",chords:[st("D Minor"),st("G Minor"),st("C Major")]},{name:"I-vi-IV-V in A Major",chords:[st("A Major"),st("F# Minor"),st("D Major"),st("E Major")]}],yp=()=>{const t=Math.floor(Math.random()*vp.length);return vp[t]},uc=t=>{let e=yp();if(!t)return e;for(;e.name===t.name;)e=yp();return e},hA=()=>{const{pressedNotes:t,allKeysReleased:e}=Dr(),[n,r]=S.useState(uc()),[s,i]=S.useState(0),[o,a]=S.useState(""),[l,c]=S.useState(!1),[u,d]=S.useState(!1),h=n.chords[s],g=n.chords[s+1]||null,p=S.useCallback(()=>{s<n.chords.length-1?i(f=>f+1):(r(f=>uc(f)),i(0)),a(""),c(!1),d(!1)},[s,n.chords.length]),m=S.useCallback(f=>{if(l&&e&&u){p();return}if(l){e&&d(!0);return}f.length===h.notes.length&&(Zg(f,h.notes)?(a("Correct!"),c(!0),d(!1)):a("Try Again!"))},[e,u,h,l,p]),y=S.useCallback(()=>{r(f=>uc(f)),i(0),a(""),c(!1),d(!1)},[]);return S.useEffect(()=>{m(t)},[t,m]),{currentChord:h,nextChord:g,feedback:o,progression:n,skipProgression:y}},fA=({progression:t,currentChord:e,nextChord:n})=>C.jsxs("div",{className:"mb-6 w-full rounded-lg bg-gray-100 p-4 text-center shadow-inner",children:[C.jsxs("h2",{className:"mb-4 text-xl font-bold text-gray-800",children:["Progression: ",C.jsx("span",{className:"text-blue-500",children:t.name})]}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsxs("h2",{className:"text-lg font-semibold",children:["Current Chord: ",e.name]}),n&&C.jsxs("p",{className:"text-sm",children:["Next Chord: ",n.name]})]})]}),pA=()=>{const{currentChord:t,nextChord:e,feedback:n,progression:r,skipProgression:s}=hA();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-blue-600",children:"Chord Progression Practice Mode"}),C.jsx(fA,{progression:r,currentChord:t,nextChord:e}),C.jsx(Wy,{chord:t}),C.jsx(Qs,{}),C.jsx(Xs,{message:n}),C.jsx(wt,{className:"mt-4",onClick:s,children:"Skip Progression"})]})},wh=()=>{const t=S.useContext(cy);if(!t)throw new Error("useSound must be used within a SoundProvider");return t},mA=()=>{const{lowKey:t,highKey:e}=Mn(),{playNote:n}=wh(),[r,s]=S.useState(null),[i,o]=S.useState(""),[a,l]=S.useState("initial"),c=S.useCallback(()=>{const g=uu(t,e,r||void 0);s(g),o("")},[t,e,r]),u=S.useCallback(async()=>{if(r===null)return;const g=at(r);n&&await n(g)},[r,n]),d=S.useCallback(()=>{c(),l("playing")},[c]),h=S.useCallback(g=>{a!=="playing"||r===null||(g===r?(o("Correct!"),l("answered"),setTimeout(()=>{c(),l("playing")},1e3)):o("Try Again!"))},[a,r,c]);return ev(h),S.useEffect(()=>{a==="playing"&&u()},[r,a,u]),{state:a,start:d,feedback:i,currentNote:r,playCurrentNote:u}},gA=()=>{const{state:t,start:e,feedback:n,playCurrentNote:r}=mA();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-orange-600",children:"Ear Training Mode"}),C.jsx("p",{className:"mb-4 text-lg text-gray-700",children:"Listen to the note and try to play it on your keyboard."}),t==="initial"&&C.jsx(wt,{onClick:e,children:"Start"}),t!=="initial"&&C.jsxs(C.Fragment,{children:[C.jsx(Qs,{}),C.jsx(Xs,{message:n}),C.jsx("div",{className:"mt-4 flex gap-4",children:C.jsx(wt,{onClick:r,disabled:t!=="playing",children:"Replay Note"})})]})]})},vA=()=>{const{lowKey:t,highKey:e,enabledIntervals:n,intervalDirection:r}=Mn(),{playNote:s}=wh(),[i,o]=S.useState("initial"),[a,l]=S.useState(null),[c,u]=S.useState(""),d=S.useCallback(()=>{const _=Array.from(n).map(w=>ks[w]).filter(w=>w.semitones>=1&&w.semitones<=12);if(_.length===0)return null;const E=_.sort(()=>.5-Math.random());for(const w of E){const N=[];if((r==="ascending"||r==="both")&&N.push("ascending"),(r==="descending"||r==="both")&&N.push("descending"),N.length===0)continue;const b=N.sort(()=>.5-Math.random());for(const x of b){let A=t,T=e;if(x==="ascending"?T=e-w.semitones:A=t+w.semitones,A>T)continue;const I=g(A,T);if(I===null)continue;let k;if(x==="ascending"?k=I+w.semitones:k=I-w.semitones,!(k<t||k>e))return{name:h(w.semitones),semitones:w.semitones,direction:x,firstNote:I,secondNote:k}}}return null},[n,r,t,e]),h=_=>{for(const[E,w]of Object.entries(ks))if(w.semitones===_)return E;throw new Error(`No interval found with semitones: ${_}`)},g=(_,E)=>{if(_>E)return null;const w=E-_+1;return _+Math.floor(Math.random()*w)},p=S.useCallback(()=>{const _=d();if(!_){u("No intervals selected or invalid range.");return}l(_),u(""),s(at(_.firstNote)),setTimeout(()=>{s(at(_.secondNote))},1e3)},[d,s]),m=S.useCallback(()=>{if(!a){u("No interval to replay.");return}s(at(a.firstNote)),setTimeout(()=>{s(at(a.secondNote))},1e3)},[a,s]),y=S.useCallback(()=>{l(null),u(""),o("playing"),p()},[p]),f=_=>{if(!a){u("Please play an interval first.");return}_===a.name?u("Correct!"):u("Incorrect :("),o("answered")},v=S.useCallback(()=>{o("playing"),p()},[p]);return{state:i,start:v,feedback:c,playInterval:p,nextInterval:y,replayInterval:m,currentInterval:a,submitAnswer:f,enabledIntervals:n}},yA=({submitAnswer:t,state:e})=>{const{enabledIntervals:n}=Mn();return C.jsx("div",{className:"mt-8 grid grid-cols-3 gap-4",children:Object.keys(ks).filter(r=>n.has(r)).map(r=>{const s=r,i=ks[s];return C.jsx(wt,{onClick:()=>t(s),disabled:e==="answered",children:i.label},s)})})},_A=()=>{const{state:t,start:e,feedback:n,nextInterval:r,replayInterval:s,currentInterval:i,submitAnswer:o}=vA();return C.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[C.jsx("h2",{className:"mb-4 text-2xl font-bold text-indigo-600",children:"Interval Practice Mode"}),C.jsx("p",{className:"mb-4 text-lg text-gray-700",children:"Practice identifying intervals by ear."}),t==="initial"&&C.jsx(wt,{onClick:e,children:"Start"}),t!=="initial"&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-full rounded-lg bg-gray-100 p-4 text-center shadow-inner",children:C.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:i?t==="answered"?C.jsxs(C.Fragment,{children:[i.direction==="ascending"?"↑":"↓"," ",i.name.charAt(0).toUpperCase()+i.name.slice(1).replace("-"," ")]}):C.jsx(C.Fragment,{children:"?"}):"No interval selected"})}),C.jsx(Xs,{message:n}),C.jsxs("div",{className:"mt-4 flex gap-4",children:[C.jsx(wt,{onClick:s,disabled:!i,children:"Replay Interval"}),C.jsx(wt,{onClick:r,children:"Next Interval"})]}),C.jsx(yA,{submitAnswer:o,state:t})]})]})};function Yy(t,[e,n]){return Math.min(n,Math.max(e,t))}var Qy=["PageUp","PageDown"],Xy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Zy={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Zs="Slider",[Nu,wA,SA]=py(Zs),[Jy,VM]=Br(Zs,[SA]),[CA,kl]=Jy(Zs),e0=S.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:g=!1,...p}=t,m=S.useRef(new Set),y=S.useRef(0),v=o==="horizontal"?EA:xA,[_=[],E]=qs({prop:u,defaultProp:c,onChange:T=>{var k;(k=[...m.current][y.current])==null||k.focus(),d(T)}}),w=S.useRef(_);function N(T){const I=AA(_,T);A(T,I)}function b(T){A(T,y.current)}function x(){const T=w.current[y.current];_[y.current]!==T&&h(_)}function A(T,I,{commit:k}={commit:!1}){const V=OA(i),B=PA(Math.round((T-r)/i)*i+r,V),$=Yy(B,[r,s]);E((F=[])=>{const U=TA(F,$,I);if(RA(U,l*i)){y.current=U.indexOf($);const R=String(U)!==String(F);return R&&k&&h(U),R?U:F}else return F})}return C.jsx(CA,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:y,thumbs:m.current,values:_,orientation:o,children:C.jsx(Nu.Provider,{scope:t.__scopeSlider,children:C.jsx(Nu.Slot,{scope:t.__scopeSlider,children:C.jsx(v,{"aria-disabled":a,"data-disabled":a?"":void 0,...p,ref:e,onPointerDown:ce(p.onPointerDown,()=>{a||(w.current=_)}),min:r,max:s,inverted:g,onSlideStart:a?void 0:N,onSlideMove:a?void 0:b,onSlideEnd:a?void 0:x,onHomeKeyDown:()=>!a&&A(r,0,{commit:!0}),onEndKeyDown:()=>!a&&A(s,_.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:I})=>{if(!a){const B=Qy.includes(T.key)||T.shiftKey&&Xy.includes(T.key)?10:1,$=y.current,F=_[$],U=i*B*I;A(F+U,$,{commit:!0})}}})})})})});e0.displayName=Zs;var[t0,n0]=Jy(Zs,{startEdge:"left",endEdge:"right",size:"width",direction:1}),EA=S.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=S.useState(null),g=$e(e,_=>h(_)),p=S.useRef(),m=dh(s),y=m==="ltr",f=y&&!i||!y&&i;function v(_){const E=p.current||d.getBoundingClientRect(),w=[0,E.width],b=Sh(w,f?[n,r]:[r,n]);return p.current=E,b(_-E.left)}return C.jsx(t0,{scope:t.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:C.jsx(r0,{dir:m,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const E=v(_.clientX);o==null||o(E)},onSlideMove:_=>{const E=v(_.clientX);a==null||a(E)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:_=>{const w=Zy[f?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:w?-1:1})}})})}),xA=S.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=S.useRef(null),d=$e(e,u),h=S.useRef(),g=!s;function p(m){const y=h.current||u.current.getBoundingClientRect(),f=[0,y.height],_=Sh(f,g?[r,n]:[n,r]);return h.current=y,_(m-y.top)}return C.jsx(t0,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:C.jsx(r0,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const y=p(m.clientY);i==null||i(y)},onSlideMove:m=>{const y=p(m.clientY);o==null||o(y)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const f=Zy[g?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:f?-1:1})}})})}),r0=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=kl(Zs,n);return C.jsx(Te.span,{...c,ref:e,onKeyDown:ce(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):Qy.concat(Xy).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ce(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:ce(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:ce(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),i(d))})})}),s0="SliderTrack",i0=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=kl(s0,n);return C.jsx(Te.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});i0.displayName=s0;var Tu="SliderRange",o0=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=kl(Tu,n),i=n0(Tu,n),o=S.useRef(null),a=$e(e,o),l=s.values.length,c=s.values.map(h=>l0(h,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return C.jsx(Te.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});o0.displayName=Tu;var ku="SliderThumb",a0=S.forwardRef((t,e)=>{const n=wA(t.__scopeSlider),[r,s]=S.useState(null),i=$e(e,a=>s(a)),o=S.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return C.jsx(bA,{...t,ref:i,index:o})}),bA=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,o=kl(ku,n),a=n0(ku,n),[l,c]=S.useState(null),u=$e(e,v=>c(v)),d=l?!!l.closest("form"):!0,h=hh(l),g=o.values[r],p=g===void 0?0:l0(g,o.min,o.max),m=kA(r,o.values.length),y=h==null?void 0:h[a.size],f=y?IA(y,p,a.direction):0;return S.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),C.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${f}px)`},children:[C.jsx(Nu.ItemSlot,{scope:t.__scopeSlider,children:C.jsx(Te.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:t.style,onFocus:ce(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&C.jsx(NA,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),value:g},r)]})});a0.displayName=ku;var NA=t=>{const{value:e,...n}=t,r=S.useRef(null),s=fh(e);return S.useEffect(()=>{const i=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&l){const c=new Event("input",{bubbles:!0});l.call(i,e),i.dispatchEvent(c)}},[s,e]),C.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function TA(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function l0(t,e,n){const i=100/(n-e)*(t-e);return Yy(i,[0,100])}function kA(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function AA(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function IA(t,e,n){const r=t/2,i=Sh([0,50],[0,r]);return(r-i(e)*n)*n}function MA(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function RA(t,e){if(e>0){const n=MA(t);return Math.min(...n)>=e}return!0}function Sh(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function OA(t){return(String(t).split(".")[1]||"").length}function PA(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var c0=e0,DA=i0,LA=o0,FA=a0;const u0=S.forwardRef(({className:t,...e},n)=>C.jsxs(c0,{ref:n,orientation:"vertical",className:He("relative flex h-full w-4 touch-none select-none items-center",t),...e,children:[C.jsxs(DA,{className:"bg-primary/20 relative h-full w-1.5 grow overflow-hidden rounded-full",children:[" ",C.jsx(LA,{className:"bg-primary absolute w-full"})," "]}),C.jsx(FA,{className:"border-primary/50 bg-background focus-visible:ring-ring block h-4 w-4 rounded-full border shadow transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50"})]}));u0.displayName=c0.displayName;const jA=()=>{const{pressedNotes:t}=Dr(),{lowKey:e,highKey:n}=Mn(),{volume:r,changeVolume:s}=wh(),{whiteKeys:i,blackKeys:o}=By(e,n),a=t.map(at),l=c=>a.includes(c);return C.jsxs("div",{className:"mt-8 flex gap-4",children:[C.jsxs("div",{className:"flex flex-col items-center gap-1",children:[C.jsx(uA,{className:"h-6 w-6 text-gray-700"}),C.jsx(yh,{className:"w-[30px] text-center",children:r}),C.jsx(u0,{defaultValue:[r],max:200,min:0,step:1,onValueChange:c=>s(c[0])})]}),C.jsx("div",{className:"flex flex-col items-center justify-center",children:C.jsxs("div",{className:"relative flex",children:[i.map(({note:c,midiNumber:u})=>C.jsx("div",{className:He("relative flex h-40 w-12 items-end justify-center border border-gray-400 bg-white shadow-md",l(c)&&"bg-blue-300"),children:C.jsx("span",{className:"mb-2 text-sm font-semibold text-gray-700",children:c[0]})},u)),C.jsx("div",{className:"pointer-events-none absolute inset-0 grid",style:{gridTemplateColumns:`repeat(${i.length}, 1fr)`},children:o.map(({note:c,midiNumber:u})=>{const d=i.findIndex(h=>at(h.midiNumber+1)===c);return d===-1?null:C.jsx("div",{className:He("pointer-events-auto relative h-24 w-8 -translate-x-1/2 transform bg-black shadow-lg",l(c)&&"bg-blue-700"),style:{gridColumnStart:d+2}},u)})})]})})]})};function VA(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BA="DismissableLayer",Au="dismissableLayer.update",zA="dismissableLayer.pointerDownOutside",UA="dismissableLayer.focusOutside",_p,d0=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),h0=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(d0),[u,d]=S.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=S.useState({}),p=$e(e,b=>d(b)),m=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),f=m.indexOf(y),v=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,E=v>=f,w=$A(b=>{const x=b.target,A=[...c.branches].some(T=>T.contains(x));!E||A||(s==null||s(b),o==null||o(b),b.defaultPrevented||a==null||a())},h),N=HA(b=>{const x=b.target;[...c.branches].some(T=>T.contains(x))||(i==null||i(b),o==null||o(b),b.defaultPrevented||a==null||a())},h);return VA(b=>{v===c.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},h),S.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(_p=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),wp(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=_p)}},[u,h,n,c]),S.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),wp())},[u,c]),S.useEffect(()=>{const b=()=>g({});return document.addEventListener(Au,b),()=>document.removeEventListener(Au,b)},[]),C.jsx(Te.div,{...l,ref:p,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,N.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,w.onPointerDownCapture)})});h0.displayName=BA;var WA="DismissableLayerBranch",GA=S.forwardRef((t,e)=>{const n=S.useContext(d0),r=S.useRef(null),s=$e(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),C.jsx(Te.div,{...t,ref:s})});GA.displayName=WA;function $A(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){f0(zA,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function HA(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&f0(UA,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wp(){const t=new CustomEvent(Au);document.dispatchEvent(t)}function f0(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?IT(s,i):s.dispatchEvent(i)}var dc="focusScope.autoFocusOnMount",hc="focusScope.autoFocusOnUnmount",Sp={bubbles:!1,cancelable:!0},qA="FocusScope",p0=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=ir(s),u=ir(i),d=S.useRef(null),h=$e(e,m=>l(m)),g=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let m=function(_){if(g.paused||!a)return;const E=_.target;a.contains(E)?d.current=E:Fn(d.current,{select:!0})},y=function(_){if(g.paused||!a)return;const E=_.relatedTarget;E!==null&&(a.contains(E)||Fn(d.current,{select:!0}))},f=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Fn(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",y);const v=new MutationObserver(f);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",y),v.disconnect()}}},[r,a,g.paused]),S.useEffect(()=>{if(a){Ep.add(g);const m=document.activeElement;if(!a.contains(m)){const f=new CustomEvent(dc,Sp);a.addEventListener(dc,c),a.dispatchEvent(f),f.defaultPrevented||(KA(JA(m0(a)),{select:!0}),document.activeElement===m&&Fn(a))}return()=>{a.removeEventListener(dc,c),setTimeout(()=>{const f=new CustomEvent(hc,Sp);a.addEventListener(hc,u),a.dispatchEvent(f),f.defaultPrevented||Fn(m??document.body,{select:!0}),a.removeEventListener(hc,u),Ep.remove(g)},0)}}},[a,c,u,g]);const p=S.useCallback(m=>{if(!n&&!r||g.paused)return;const y=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,f=document.activeElement;if(y&&f){const v=m.currentTarget,[_,E]=YA(v);_&&E?!m.shiftKey&&f===E?(m.preventDefault(),n&&Fn(_,{select:!0})):m.shiftKey&&f===_&&(m.preventDefault(),n&&Fn(E,{select:!0})):f===v&&m.preventDefault()}},[n,r,g.paused]);return C.jsx(Te.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});p0.displayName=qA;function KA(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Fn(r,{select:e}),document.activeElement!==n)return}function YA(t){const e=m0(t),n=Cp(e,t),r=Cp(e.reverse(),t);return[n,r]}function m0(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Cp(t,e){for(const n of t)if(!QA(n,{upTo:e}))return n}function QA(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function XA(t){return t instanceof HTMLInputElement&&"select"in t}function Fn(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&XA(t)&&e&&t.select()}}var Ep=ZA();function ZA(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xp(t,e),t.unshift(e)},remove(e){var n;t=xp(t,e),(n=t[0])==null||n.resume()}}}function xp(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function JA(t){return t.filter(e=>e.tagName!=="A")}var eI="Portal",g0=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);Hi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Rw.createPortal(C.jsx(Te.div,{...r,ref:e}),o):null});g0.displayName=eI;var fc=0;function tI(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??bp()),document.body.insertAdjacentElement("beforeend",t[1]??bp()),fc++,()=>{fc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fc--}},[])}function bp(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var ea="right-scroll-bar-position",ta="width-before-scroll-bar",nI="with-scroll-bars-hidden",rI="--removed-body-scroll-bar-size";function pc(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function sI(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var iI=typeof window<"u"?S.useLayoutEffect:S.useEffect,Np=new WeakMap;function oI(t,e){var n=sI(null,function(r){return t.forEach(function(s){return pc(s,r)})});return iI(function(){var r=Np.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||pc(a,null)}),i.forEach(function(a){s.has(a)||pc(a,o)})}Np.set(n,t)},[t]),n}function aI(t){return t}function lI(t,e){e===void 0&&(e=aI);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function cI(t){t===void 0&&(t={});var e=lI(null);return e.options=an({async:!0,ssr:!1},t),e}var v0=function(t){var e=t.sideCar,n=Zv(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,an({},n))};v0.isSideCarExport=!0;function uI(t,e){return t.useMedium(e),v0}var y0=cI(),mc=function(){},Al=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:mc,onWheelCapture:mc,onTouchMoveCapture:mc}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,g=t.noIsolation,p=t.inert,m=t.allowPinchZoom,y=t.as,f=y===void 0?"div":y,v=t.gapMode,_=Zv(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,w=oI([n,e]),N=an(an({},_),s);return S.createElement(S.Fragment,null,u&&S.createElement(E,{sideCar:y0,removeScrollBar:c,shards:d,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?S.cloneElement(S.Children.only(a),an(an({},N),{ref:w})):S.createElement(f,an({},N,{className:l,ref:w}),a))});Al.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Al.classNames={fullWidth:ta,zeroRight:ea};var dI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hI(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=dI();return e&&t.setAttribute("nonce",e),t}function fI(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function pI(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mI=function(){var t=0,e=null;return{add:function(n){t==0&&(e=hI())&&(fI(e,n),pI(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},gI=function(){var t=mI();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_0=function(){var t=gI(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},vI={left:0,top:0,right:0,gap:0},gc=function(t){return parseInt(t||"",10)||0},yI=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[gc(n),gc(r),gc(s)]},_I=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vI;var e=yI(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},wI=_0(),_s="data-scroll-locked",SI=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(nI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(_s,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ea,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ta,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ea," .").concat(ea,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ta," .").concat(ta,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_s,`] {
    `).concat(rI,": ").concat(a,`px;
  }
`)},Tp=function(){var t=parseInt(document.body.getAttribute(_s)||"0",10);return isFinite(t)?t:0},CI=function(){S.useEffect(function(){return document.body.setAttribute(_s,(Tp()+1).toString()),function(){var t=Tp()-1;t<=0?document.body.removeAttribute(_s):document.body.setAttribute(_s,t.toString())}},[])},EI=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;CI();var i=S.useMemo(function(){return _I(s)},[s]);return S.createElement(wI,{styles:SI(i,!e,s,n?"":"!important")})},Iu=!1;if(typeof window<"u")try{var Po=Object.defineProperty({},"passive",{get:function(){return Iu=!0,!0}});window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Iu=!1}var Gr=Iu?{passive:!1}:!1,xI=function(t){return t.tagName==="TEXTAREA"},w0=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!xI(t)&&n[e]==="visible")},bI=function(t){return w0(t,"overflowY")},NI=function(t){return w0(t,"overflowX")},kp=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=S0(t,r);if(s){var i=C0(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TI=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},kI=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},S0=function(t,e){return t==="v"?bI(e):NI(e)},C0=function(t,e){return t==="v"?TI(e):kI(e)},AI=function(t,e){return t==="h"&&e==="rtl"?-1:1},II=function(t,e,n,r,s){var i=AI(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var g=C0(t,a),p=g[0],m=g[1],y=g[2],f=m-y-i*p;(p||f)&&S0(t,a)&&(d+=f,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(h)<1||!s))&&(c=!0),c},Do=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ap=function(t){return[t.deltaX,t.deltaY]},Ip=function(t){return t&&"current"in t?t.current:t},MI=function(t,e){return t[0]===e[0]&&t[1]===e[1]},RI=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},OI=0,$r=[];function PI(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(OI++)[0],i=S.useState(_0)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=jN([t.lockRef.current],(t.shards||[]).map(Ip),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(m,y){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var f=Do(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-f[0],E="deltaY"in m?m.deltaY:v[1]-f[1],w,N=m.target,b=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in m&&b==="h"&&N.type==="range")return!1;var x=kp(b,N);if(!x)return!0;if(x?w=b:(w=b==="v"?"h":"v",x=kp(b,N)),!x)return!1;if(!r.current&&"changedTouches"in m&&(_||E)&&(r.current=w),!w)return!0;var A=r.current||w;return II(A,y,m,A==="h"?_:E,!0)},[]),l=S.useCallback(function(m){var y=m;if(!(!$r.length||$r[$r.length-1]!==i)){var f="deltaY"in y?Ap(y):Do(y),v=e.current.filter(function(w){return w.name===y.type&&(w.target===y.target||y.target===w.shadowParent)&&MI(w.delta,f)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(Ip).filter(Boolean).filter(function(w){return w.contains(y.target)}),E=_.length>0?a(y,_[0]):!o.current.noIsolation;E&&y.cancelable&&y.preventDefault()}}},[]),c=S.useCallback(function(m,y,f,v){var _={name:m,delta:y,target:f,should:v,shadowParent:DI(f)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),u=S.useCallback(function(m){n.current=Do(m),r.current=void 0},[]),d=S.useCallback(function(m){c(m.type,Ap(m),m.target,a(m,t.lockRef.current))},[]),h=S.useCallback(function(m){c(m.type,Do(m),m.target,a(m,t.lockRef.current))},[]);S.useEffect(function(){return $r.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Gr),document.addEventListener("touchmove",l,Gr),document.addEventListener("touchstart",u,Gr),function(){$r=$r.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Gr),document.removeEventListener("touchmove",l,Gr),document.removeEventListener("touchstart",u,Gr)}},[]);var g=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(i,{styles:RI(s)}):null,g?S.createElement(EI,{gapMode:t.gapMode}):null)}function DI(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const LI=uI(y0,PI);var E0=S.forwardRef(function(t,e){return S.createElement(Al,an({},t,{ref:e,sideCar:LI}))});E0.classNames=Al.classNames;var FI=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Hr=new WeakMap,Lo=new WeakMap,Fo={},vc=0,x0=function(t){return t&&(t.host||x0(t.parentNode))},jI=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=x0(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},VI=function(t,e,n,r){var s=jI(e,Array.isArray(t)?t:[t]);Fo[n]||(Fo[n]=new WeakMap);var i=Fo[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var g=h.getAttribute(r),p=g!==null&&g!=="false",m=(Hr.get(h)||0)+1,y=(i.get(h)||0)+1;Hr.set(h,m),i.set(h,y),o.push(h),m===1&&p&&Lo.set(h,!0),y===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(f){console.error("aria-hidden: cannot operate on ",h,f)}})};return u(e),a.clear(),vc++,function(){o.forEach(function(d){var h=Hr.get(d)-1,g=i.get(d)-1;Hr.set(d,h),i.set(d,g),h||(Lo.has(d)||d.removeAttribute(r),Lo.delete(d)),g||d.removeAttribute(n)}),vc--,vc||(Hr=new WeakMap,Hr=new WeakMap,Lo=new WeakMap,Fo={})}},BI=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=FI(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),VI(r,s,n,"aria-hidden")):function(){return null}},Ch="Dialog",[b0,BM]=Br(Ch),[zI,nn]=b0(Ch),N0=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c=!1,u]=qs({prop:r,defaultProp:s,onChange:i});return C.jsx(zI,{scope:e,triggerRef:a,contentRef:l,contentId:Jo(),titleId:Jo(),descriptionId:Jo(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};N0.displayName=Ch;var T0="DialogTrigger",k0=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=nn(T0,n),i=$e(e,s.triggerRef);return C.jsx(Te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":bh(s.open),...r,ref:i,onClick:ce(t.onClick,s.onOpenToggle)})});k0.displayName=T0;var Eh="DialogPortal",[UI,A0]=b0(Eh,{forceMount:void 0}),I0=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=nn(Eh,e);return C.jsx(UI,{scope:e,forceMount:n,children:S.Children.map(r,o=>C.jsx(Ks,{present:n||i.open,children:C.jsx(g0,{asChild:!0,container:s,children:o})}))})};I0.displayName=Eh;var za="DialogOverlay",M0=S.forwardRef((t,e)=>{const n=A0(za,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=nn(za,t.__scopeDialog);return i.modal?C.jsx(Ks,{present:r||i.open,children:C.jsx(WI,{...s,ref:e})}):null});M0.displayName=za;var WI=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=nn(za,n);return C.jsx(E0,{as:Fs,allowPinchZoom:!0,shards:[s.contentRef],children:C.jsx(Te.div,{"data-state":bh(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Rr="DialogContent",R0=S.forwardRef((t,e)=>{const n=A0(Rr,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=nn(Rr,t.__scopeDialog);return C.jsx(Ks,{present:r||i.open,children:i.modal?C.jsx(GI,{...s,ref:e}):C.jsx($I,{...s,ref:e})})});R0.displayName=Rr;var GI=S.forwardRef((t,e)=>{const n=nn(Rr,t.__scopeDialog),r=S.useRef(null),s=$e(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return BI(i)},[]),C.jsx(O0,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,i=>i.preventDefault())})}),$I=S.forwardRef((t,e)=>{const n=nn(Rr,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return C.jsx(O0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),O0=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=nn(Rr,n),l=S.useRef(null),c=$e(e,l);return tI(),C.jsxs(C.Fragment,{children:[C.jsx(p0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:C.jsx(h0,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":bh(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(HI,{titleId:a.titleId}),C.jsx(KI,{contentRef:l,descriptionId:a.descriptionId})]})]})}),xh="DialogTitle",P0=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=nn(xh,n);return C.jsx(Te.h2,{id:s.titleId,...r,ref:e})});P0.displayName=xh;var D0="DialogDescription",L0=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=nn(D0,n);return C.jsx(Te.p,{id:s.descriptionId,...r,ref:e})});L0.displayName=D0;var F0="DialogClose",j0=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=nn(F0,n);return C.jsx(Te.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});j0.displayName=F0;function bh(t){return t?"open":"closed"}var V0="DialogTitleWarning",[zM,B0]=ET(V0,{contentName:Rr,titleName:xh,docsSlug:"dialog"}),HI=({titleId:t})=>{const e=B0(V0),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},qI="DialogDescriptionWarning",KI=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${B0(qI).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},YI=N0,QI=k0,XI=I0,z0=M0,U0=R0,W0=P0,G0=L0,ZI=j0;const JI=YI,eM=QI,tM=XI,$0=S.forwardRef(({className:t,...e},n)=>C.jsx(z0,{ref:n,className:He("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...e}));$0.displayName=z0.displayName;const H0=S.forwardRef(({className:t,children:e,...n},r)=>C.jsxs(tM,{children:[C.jsx($0,{}),C.jsxs(U0,{ref:r,className:He("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",t),...n,children:[e,C.jsxs(ZI,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[C.jsx(ST,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));H0.displayName=U0.displayName;const q0=({className:t,...e})=>C.jsx("div",{className:He("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});q0.displayName="DialogHeader";const K0=S.forwardRef(({className:t,...e},n)=>C.jsx(W0,{ref:n,className:He("text-xl font-bold leading-none tracking-tight",t),...e}));K0.displayName=W0.displayName;const Y0=S.forwardRef(({className:t,...e},n)=>C.jsx(G0,{ref:n,className:He("text-muted-foreground text-sm",t),...e}));Y0.displayName=G0.displayName;var Nh="Checkbox",[nM,UM]=Br(Nh),[rM,sM]=nM(Nh),Q0=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[d,h]=S.useState(null),g=$e(e,_=>h(_)),p=S.useRef(!1),m=d?!!d.closest("form"):!0,[y=!1,f]=qs({prop:s,defaultProp:i,onChange:c}),v=S.useRef(y);return S.useEffect(()=>{const _=d==null?void 0:d.form;if(_){const E=()=>f(v.current);return _.addEventListener("reset",E),()=>_.removeEventListener("reset",E)}},[d,f]),C.jsxs(rM,{scope:n,state:y,disabled:a,children:[C.jsx(Te.button,{type:"button",role:"checkbox","aria-checked":Er(y)?"mixed":y,"aria-required":o,"data-state":J0(y),"data-disabled":a?"":void 0,disabled:a,value:l,...u,ref:g,onKeyDown:ce(t.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:ce(t.onClick,_=>{f(E=>Er(E)?!0:!E),m&&(p.current=_.isPropagationStopped(),p.current||_.stopPropagation())})}),m&&C.jsx(iM,{control:d,bubbles:!p.current,name:r,value:l,checked:y,required:o,disabled:a,style:{transform:"translateX(-100%)"}})]})});Q0.displayName=Nh;var X0="CheckboxIndicator",Z0=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=sM(X0,n);return C.jsx(Ks,{present:r||Er(i.state)||i.state===!0,children:C.jsx(Te.span,{"data-state":J0(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Z0.displayName=X0;var iM=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=S.useRef(null),o=fh(n),a=hh(e);return S.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:r});l.indeterminate=Er(n),d.call(l,Er(n)?!1:n),l.dispatchEvent(h)}},[o,n,r]),C.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:Er(n)?!1:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Er(t){return t==="indeterminate"}function J0(t){return Er(t)?"indeterminate":t?"checked":"unchecked"}var e_=Q0,oM=Z0;const na=S.forwardRef(({className:t,...e},n)=>C.jsx(e_,{ref:n,className:He("border-primary focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer flex h-4 w-4 shrink-0 items-center justify-center rounded-sm border shadow focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:C.jsx(oM,{className:He("flex items-center justify-center text-current"),children:C.jsx(hy,{className:"h-4 w-4"})})}));na.displayName=e_.displayName;const aM=({children:t})=>{const{lowKey:e,highKey:n,isSettingLowKey:r,isSettingHighKey:s,startSetLowKey:i,startSetHighKey:o,cancelSetKey:a,enabledChordTypes:l,toggleChordType:c,enabledScales:u,toggleScale:d,enabledIntervals:h,toggleInterval:g,intervalDirection:p,setIntervalDirection:m}=Mn();return C.jsxs(JI,{onOpenChange:y=>{y||a()},children:[C.jsx(eM,{asChild:!0,children:t}),C.jsxs(H0,{className:"max-h-[90%] overflow-auto pb-4 sm:max-w-[425px]",children:[C.jsxs(q0,{children:[C.jsx(K0,{children:"Settings"}),C.jsx(Y0,{children:"Edit your exercise preferences here."})]}),C.jsx("div",{className:"flex flex-col gap-4 py-4",children:C.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[C.jsxs("div",{className:"col-span-4",children:[C.jsx("h3",{className:"text-lg font-bold",children:"Keyboard Range"}),C.jsxs("p",{className:"text-sm text-gray-600",children:["Current Range: ",at(e)," to"," ",at(n)]}),C.jsxs("div",{className:"mt-2 flex gap-4",children:[C.jsx(wt,{className:"flex-1",onClick:r?a:i,children:r?"Press a key...":"Set Lowest Key"}),C.jsx(wt,{className:"flex-1",onClick:s?a:o,children:s?"Press a key...":"Set Highest Key"})]})]}),C.jsxs("div",{className:"col-span-4 mt-4",children:[C.jsx("h3",{className:"mb-4 text-lg font-bold",children:"Select Chord Types for Practice"}),C.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Nd).map(([y,{label:f}])=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(na,{id:`chord-${y}`,checked:l&&l.has(y),onCheckedChange:()=>c(y)}),C.jsx(zn,{htmlFor:`chord-${y}`,className:"flex items-center gap-2",children:f})]},y))})]}),C.jsxs("div",{className:"col-span-4",children:[C.jsx("h3",{className:"mb-4 text-lg font-bold",children:"Select Scale Types for Practice"}),C.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Td).map(([y,{label:f}])=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(na,{id:`scale-${y}`,checked:u&&u.has(y),onCheckedChange:()=>d(y)}),C.jsx(zn,{htmlFor:`scale-${y}`,className:"flex items-center gap-2",children:f})]},y))})]}),C.jsxs("div",{className:"col-span-4 mt-4",children:[C.jsx("h3",{className:"mb-4 text-lg font-bold",children:"Select Intervals for Practice"}),C.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(ks).map(([y,{label:f,semitones:v}])=>v>=1&&v<=12?C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(na,{id:`interval-${y}`,checked:h&&h.has(y),onCheckedChange:()=>g(y)}),C.jsx(zn,{htmlFor:`interval-${y}`,className:"flex items-center gap-2",children:f})]},y):null)})]}),C.jsxs("div",{className:"col-span-4 mt-4",children:[C.jsx("h3",{className:"mb-4 text-lg font-bold",children:"Interval Direction"}),C.jsxs(vh,{value:p,onValueChange:y=>m(y),className:"flex flex-col gap-2",children:[C.jsxs(zn,{htmlFor:"ascending",className:"flex items-center",children:[C.jsx(xi,{value:"ascending",id:"ascending"}),C.jsx("span",{className:"ml-2",children:"Ascending"})]}),C.jsxs(zn,{htmlFor:"descending",className:"flex items-center",children:[C.jsx(xi,{value:"descending",id:"descending"}),C.jsx("span",{className:"ml-2",children:"Descending"})]}),C.jsxs(zn,{htmlFor:"both",className:"flex items-center",children:[C.jsx(xi,{value:"both",id:"both"}),C.jsx("span",{className:"ml-2",children:"Both"})]})]})]})]})})]})]})},lM=({children:t,desiredWidth:e,className:n})=>{const r=S.useRef(null),[s,i]=S.useState(1),o=S.useCallback(()=>{const a=r.current;if(!a)return;const c=a.clientWidth/e;i(c<1?c:1)},[e,i]);return S.useLayoutEffect(()=>(o(),setTimeout(()=>{o()},0),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[o]),C.jsx("div",{ref:r,className:`flex w-full items-center justify-center ${n||""}`,children:C.jsx("div",{className:"min-w-0",style:{transform:`scale(${s})`,transformOrigin:"top left"},children:t})})},cM=()=>{const{mode:t}=uy(),{lowKey:e,highKey:n}=Mn(),r=()=>{switch(t){case"playground":return C.jsx(Wk,{});case"note":return C.jsx(qk,{});case"chord":return C.jsx(Yk,{});case"scale":return C.jsx(dA,{});case"progression":return C.jsx(pA,{});case"ear-training":return C.jsx(gA,{});case"interval-training":return C.jsx(_A,{});default:return C.jsx("div",{children:"Please select a mode from the sidebar."})}};return C.jsxs("div",{className:"flex min-h-screen gap-8 bg-gray-100 p-8",children:[C.jsx(Uk,{}),C.jsxs("div",{className:"my-auto flex min-w-0 flex-1 flex-col items-center justify-center",children:[C.jsxs("h1",{className:"relative mb-6 flex w-full items-center justify-center text-center text-5xl font-extrabold text-blue-600",children:["Piano Maestro",C.jsx(aM,{children:C.jsx(wt,{variant:"ghost",className:"absolute right-[20px] p-0 text-4xl text-gray-400 hover:bg-transparent hover:text-gray-600",children:C.jsx(lA,{})})})]}),C.jsx("div",{className:"my-auto flex w-full max-w-2xl flex-col items-center justify-center rounded-lg border border-gray-300 bg-gradient-to-b from-white to-gray-50 p-8 shadow-lg",children:r()}),C.jsx(lM,{desiredWidth:By(e,n).whiteKeys.length*48+46,children:C.jsx(jA,{})})]})]})};Wg(document.getElementById("root")).render(C.jsx(S.StrictMode,{children:C.jsx(SS,{children:C.jsx(yT,{children:C.jsx(Ow,{children:C.jsx(ES,{children:C.jsx(cM,{})})})})})}));
